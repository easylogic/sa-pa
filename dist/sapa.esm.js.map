{"version":3,"file":"sapa.esm.js","sources":["../src/Event.ts","../src/functions/registElement.ts","../src/functions/func.ts","../src/BaseStore.ts","../src/functions/DomDiff.ts","../src/functions/Dom.ts","../src/handler/BaseHandler.ts","../src/handler/DomEventHandler.ts","../src/handler/BindHandler.ts","../src/functions/uuid.ts","../src/EventMachine.ts","../src/UIElement.ts","../src/App.ts"],"sourcesContent":["export const MAGIC_METHOD = \"@magic:\";\n\nexport const makeEventChecker = (value: string, split = CHECK_SAPARATOR) => {\n  return ` ${split} ${value}`;\n}\n\n// event name regular expression\nexport const CHECK_DOM_EVENT_PATTERN = /domevent (.*)/gi;\nexport const CHECK_LOAD_PATTERN = /load (.*)/gi;\nexport const CHECK_BIND_PATTERN = /bind (.*)/gi;\nexport const CHECK_SUBSCRIBE_PATTERN = /subscribe (.*)/gi;\n\nconst SPLITTER = \"|\";\n\nexport const PIPE = (...args: string[]) => {\n  return args.join(SPLITTER);\n};\n\nexport const NAME_SAPARATOR = \":\";\nexport const CHECK_SAPARATOR = \"|\";\nexport const DOM_EVENT_SAPARATOR = `${MAGIC_METHOD}domevent `;\nexport const LOAD_SAPARATOR = `${MAGIC_METHOD}load `;\nexport const BIND_SAPARATOR = `${MAGIC_METHOD}bind `;\nexport const SUBSCRIBE_SAPARATOR = `${MAGIC_METHOD}subscribe `;\n\nexport const SAPARATOR = ' ';\n\nconst refManager = {};\n\nconst DOM_EVENT_MAKE = (...keys: string[]) => {\n  var key = keys.join(NAME_SAPARATOR);\n  return (...args: string[]) => {\n    return DOM_EVENT_SAPARATOR + [key, ...args].join(SAPARATOR);\n  };\n};\n\nconst SUBSCRIBE_EVENT_MAKE = (...args: string[]) => {\n  return SUBSCRIBE_SAPARATOR + args.join(CHECK_SAPARATOR);\n}\n\n\n// Predefined CHECKER\nexport const CHECKER = (value: string, split = CHECK_SAPARATOR) => {\n  return makeEventChecker(value, split);\n};\n\nexport const AFTER = (value: string, split = CHECK_SAPARATOR) => {\n  return makeEventChecker(`after(${value})`, split);\n};\n\nexport const BEFORE = (value: any, split = CHECK_SAPARATOR) => {\n  return makeEventChecker(`before(${value})`, split);  \n};\n\nexport const IF = CHECKER;\nexport const KEY = CHECKER; \n\nexport const ARROW_UP = CHECKER('ArrowUp');\nexport const ARROW_DOWN = CHECKER('ArrowDown');\nexport const ARROW_LEFT = CHECKER('ArrowLeft');\nexport const ARROW_RIGHT = CHECKER('ArrowRight');\nexport const ENTER = CHECKER('Enter');\nexport const SPACE = CHECKER('Space');\nexport const ESCAPE = CHECKER('Escape');\n\nexport const ALT = CHECKER(\"isAltKey\");\nexport const SHIFT = CHECKER(\"isShiftKey\");\nexport const META = CHECKER(\"isMetaKey\");\nexport const CONTROL = CHECKER(\"isCtrlKey\");\nexport const MOUSE = CHECKER(\"hasMouse\");\nexport const TOUCH = CHECKER(\"hasTouch\");\nexport const PEN = CHECKER(\"hasPen\");\nexport const SELF = CHECKER(\"self\");\nexport const LEFT_BUTTON = CHECKER(\"isMouseLeftButton\")\nexport const RIGHT_BUTTON = CHECKER(\"isMouseRightButton\")\n\nexport const FIT = CHECKER(\"fit\");\nexport const PASSIVE = CHECKER(\"passive\");\nexport const DOMDIFF = CHECKER('domdiff');\n\n// event config method\nexport const DEBOUNCE = (t = 100) => {\n  return CHECKER(`debounce(${t})`);\n};\n\nexport const DELAY = (t = 300) => {\n  return CHECKER(`delay(${t})`);\n};\n\nexport const D1000 = DEBOUNCE(1000)\n\nexport const THROTTLE = (t = 100) => {\n  return CHECKER(`throttle(${t})`);\n};\nexport const ALL_TRIGGER = CHECKER(\"allTrigger()\");\nexport const SELF_TRIGGER = CHECKER(\"selfTrigger()\");\n\nexport const CAPTURE = CHECKER(\"capture()\");\n\n// event config method\n\n// before method\n\n// after method\nexport const PREVENT = AFTER(`preventDefault`);\nexport const STOP = AFTER(`stopPropagation`);\n\nexport const SUBSCRIBE = SUBSCRIBE_EVENT_MAKE;\nexport const SUBSCRIBE_ALL = (...args: any[]) => SUBSCRIBE_EVENT_MAKE(...args, ALL_TRIGGER);\nexport const SUBSCRIBE_SELF = (...args: any[]) => SUBSCRIBE_EVENT_MAKE(...args, SELF_TRIGGER);\nexport const CONFIG = (config: any, ...args: any[]) => SUBSCRIBE_EVENT_MAKE(`config:${config}`, ...args);\nexport const CUSTOM = DOM_EVENT_MAKE;\nexport const CLICK = DOM_EVENT_MAKE(\"click\");\nexport const DOUBLECLICK = DOM_EVENT_MAKE(\"dblclick\");\nexport const MOUSEDOWN = DOM_EVENT_MAKE(\"mousedown\");\nexport const MOUSEUP = DOM_EVENT_MAKE(\"mouseup\");\nexport const MOUSEMOVE = DOM_EVENT_MAKE(\"mousemove\");\nexport const MOUSEOVER = DOM_EVENT_MAKE(\"mouseover\");\nexport const MOUSEOUT = DOM_EVENT_MAKE(\"mouseout\");\nexport const MOUSEENTER = DOM_EVENT_MAKE(\"mouseenter\");\nexport const MOUSELEAVE = DOM_EVENT_MAKE(\"mouseleave\");\nexport const TOUCHSTART = DOM_EVENT_MAKE(\"touchstart\");\nexport const TOUCHMOVE = DOM_EVENT_MAKE(\"touchmove\");\nexport const TOUCHEND = DOM_EVENT_MAKE(\"touchend\");\nexport const KEYDOWN = DOM_EVENT_MAKE(\"keydown\");\nexport const KEYUP = DOM_EVENT_MAKE(\"keyup\");\nexport const KEYPRESS = DOM_EVENT_MAKE(\"keypress\");\nexport const DRAG = DOM_EVENT_MAKE(\"drag\");\nexport const DRAGSTART = DOM_EVENT_MAKE(\"dragstart\");\nexport const DROP = DOM_EVENT_MAKE(\"drop\");\nexport const DRAGOVER = DOM_EVENT_MAKE(\"dragover\");\nexport const DRAGENTER = DOM_EVENT_MAKE(\"dragenter\");\nexport const DRAGLEAVE = DOM_EVENT_MAKE(\"dragleave\");\nexport const DRAGEXIT = DOM_EVENT_MAKE(\"dragexit\");\nexport const DRAGOUT = DOM_EVENT_MAKE(\"dragout\");\nexport const DRAGEND = DOM_EVENT_MAKE(\"dragend\");\nexport const CONTEXTMENU = DOM_EVENT_MAKE(\"contextmenu\");\nexport const CHANGE = DOM_EVENT_MAKE(\"change\");\nexport const INPUT = DOM_EVENT_MAKE(\"input\");\nexport const FOCUS = DOM_EVENT_MAKE(\"focus\");\nexport const FOCUSIN = DOM_EVENT_MAKE(\"focusin\");\nexport const FOCUSOUT = DOM_EVENT_MAKE(\"focusout\");\nexport const BLUR = DOM_EVENT_MAKE(\"blur\");\nexport const PASTE = DOM_EVENT_MAKE(\"paste\");\nexport const RESIZE = DOM_EVENT_MAKE(\"resize\");\nexport const SCROLL = DOM_EVENT_MAKE(\"scroll\");\nexport const SUBMIT = DOM_EVENT_MAKE(\"submit\");\n\n// pointerstart 의 경우 drag 를 위한 시작점이기 때문에  left button 만 허용한다. \n// context 메뉴나 wheel 은 허용하지 않는다. \nexport const POINTERSTART = (...args: any[]) => {\n  return (CUSTOM(\"pointerdown\")(...args) + LEFT_BUTTON);\n}\n// \n\nexport const POINTEROVER = CUSTOM(\"pointerover\");\nexport const POINTERENTER = CUSTOM(\"pointerenter\");\nexport const POINTEROUT = CUSTOM(\"pointerout\");\nexport const POINTERMOVE = CUSTOM(\"pointermove\");\nexport const POINTEREND = CUSTOM(\"pointerup\");\nexport const CHANGEINPUT = CUSTOM(\"change\", \"input\");\nexport const WHEEL = CUSTOM(\"wheel\", \"mousewheel\", \"DOMMouseScroll\");\nexport const ANIMATIONSTART = DOM_EVENT_MAKE('animationstart');\nexport const ANIMATIONEND = DOM_EVENT_MAKE('animationend');\nexport const ANIMATIONITERATION = DOM_EVENT_MAKE('animationiteration');\nexport const TRANSITIONSTART = DOM_EVENT_MAKE('transitionstart');\nexport const TRANSITIONEND = DOM_EVENT_MAKE('transitionend');\nexport const TRANSITIONRUN = DOM_EVENT_MAKE('transitionrun');\nexport const TRANSITIONCANCEL = DOM_EVENT_MAKE('transitioncancel');\nexport const DOUBLETAB = CUSTOM('doubletab')\n\n\n// Predefined LOADER\nexport const LOAD = (value = \"$el\") => {\n  return LOAD_SAPARATOR + value;\n};\n\nexport const getRef = (id: string | number) => {\n  return refManager[id] || '';\n};\n\nexport const BIND_CHECK_FUNCTION = (field: string | number) => {\n  return function() {\n    return this.prevState[field] != this.state[field];\n  };\n};\n\nexport const BIND_CHECK_DEFAULT_FUNCTION = () => {\n  return true;\n};\n\nexport const BIND = (value = \"$el\") => {\n  return (\n    BIND_SAPARATOR + value\n  );\n};\n\nexport function normalizeWheelEvent (e: { deltaX: any; deltaY: any; shiftKey: any; deltaMode: number; }) {\n  let dx = e.deltaX;\n  let dy = e.deltaY;\n\n\n  if (dx === 0 && e.shiftKey) {\n    [dy, dx] = [dx, dy];\n  }  \n\n  if (e.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n    dy *= 8;\n  } else if (e.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n    dy *= 24; \n  }\n\n\n  return [\n    limit(dx, 24), \n    limit(dy, 24), \n    0\n  ]\n}\n\nfunction limit (delta: number, maxDelta: number) {\n  return Math.sign(delta) * Math.min( maxDelta, Math.abs(delta))\n}\n\nexport default {\n  addDomEvent(dom: Element, eventName: keyof ElementEventMap, callback: EventListenerOrEventListenerObject, options: boolean|AddEventListenerOptions = false) {\n    if (dom) {\n      dom.addEventListener(eventName, callback, options);\n    }\n  },\n\n  removeDomEvent(dom: Element, eventName: keyof ElementEventMap, callback: EventListenerOrEventListenerObject) {\n    if (dom) {\n      dom.removeEventListener(eventName, callback);\n    }\n  },\n\n  pos(e: { touches: any[]; }) {\n    if (e.touches && e.touches[0]) {\n      return e.touches[0];\n    }\n\n    return e;\n  },\n\n  posXY(e: any) {\n    var pos = this.pos(e);\n    return {\n      x: pos.pageX,\n      y: pos.pageY\n    };\n  }\n};\n","import { IKeyValue } from \"../types\";\n\nconst map = new Map();\n\n/**\n * Element 등록\n * \n * @param {object} classes 클래스명 리스트 \n */ \nexport function registElement(classes: IKeyValue = {}) {\n\n    Object.keys(classes).forEach(key => {\n        if (map.has(key)) {\n            // console.warn(`${key} element is duplicated.`)\n            return;\n        } \n\n        map.set(key, classes[key]);\n    })\n}\n\n/**\n * 등록된 Element 반환 \n * \n * @param {string} key\n * @returns {IUIElement}\n */ \nexport function retriveElement(className: string) {\n    return map.get(className);\n}","import { IKeyValue, IMultiCallback, ISplitedMethod } from \"../types\";\n\nconst identity = () => true; \n\n/**\n * property 수집하기\n * 상위 클래스의 모든 property 를 수집해서 리턴한다.\n * \n * @param {Object} root  상속관계에 있는 인스턴스 \n * @param {Function} checkFunction 제외될 필드 리스트 { [field]: true }\n * @returns {string[]} 나의 상위 모든 메소드를 수집해서 리턴한다. \n */\nexport function collectProps(root: Object, checkFunction: Function = identity) {\n\n    let p = root;\n    let results: any[] = [];\n    do {\n        const isObject = p instanceof Object;\n\n        if (isObject === false) {\n            break;\n        }\n\n        const names = Object.getOwnPropertyNames(p).filter(name => {\n            return root && isFunction(root[name]) && checkFunction(name);\n        });\n\n        results.push.apply(results, names);\n    } while (p = Object.getPrototypeOf(p));\n\n\n    return results;\n}\n\nexport function debounce(callback: IMultiCallback, delay = 0) {\n\n    if (delay === 0) {\n        return callback;\n    }\n\n    var t: NodeJS.Timeout | undefined = undefined;\n\n    return function (...args: any[]) {\n        if (t) {\n            clearTimeout(t);\n        }\n\n        t = setTimeout(function () {\n            callback(...args);\n        }, delay || 300);\n    }\n}\n\n\nexport function throttle(callback: IMultiCallback, delay: number) {\n\n    var t: NodeJS.Timeout | null | undefined = undefined;\n\n    return function (...args: any[]) {\n        if (!t) {\n            t = setTimeout(function () {\n                callback(...args);\n                t = null;\n            }, delay || 300);\n        }\n\n    }\n}\n\nexport function ifCheck(callback: Function, context: IKeyValue, checkMethods: any[]) {\n    return (...args: any) => {\n        const ifResult = checkMethods.every((check: { target: string | number; }) => {\n            return context[check.target].apply(context, args);\n        });\n\n        if (ifResult) {\n            callback.apply(context, args);\n        }\n    }\n}\n\nexport function keyEach(obj: IKeyValue, callback: (key: string, value: any, index: number) => void) {\n    Object.keys(obj).forEach((key, index) => {\n        callback(key, obj[key], index);\n    })\n}\n\nexport function defaultValue(value: any, defaultValue: any) {\n    return typeof value == 'undefined' ? defaultValue : value;\n}\n\nexport function isUndefined(value: null) {\n    return typeof value == 'undefined' || value === null;\n}\n\nexport function isNotUndefined(value: any) {\n    return isUndefined(value) === false;\n}\n\nexport function isBoolean(value: any) {\n    return typeof value == 'boolean'\n}\n\nexport function isString(value: any) {\n    return typeof value == 'string'\n}\n\nexport function isNotString(value: any) {\n    return isString(value) === false;\n}\n\nexport function isObject(value: any) {\n    return typeof value == 'object' && !Array.isArray(value) && !isNumber(value) && !isString(value) && value !== null;\n}\n\nexport function isFunction(value: any) {\n    return typeof value == 'function'\n}\n\nexport function isNumber(value: any) {\n    return typeof value == 'number';\n}\n\nexport function isZero(num: number) {\n    return num === 0;\n}\n\nexport function isNotZero(num: number) {\n    return !isZero(num);\n}\n\nexport function clone(obj: any) {\n    if (isUndefined(obj)) return undefined;\n    return JSON.parse(JSON.stringify(obj));\n}\n\n\nexport function combineKeyArray(obj: IKeyValue) {\n    Object.keys(obj).forEach(key => {\n        if (Array.isArray(obj[key])) {\n            obj[key] = obj[key].join(', ')\n        }\n    })\n\n    return obj;\n}\n\n\n\nconst short_tag_regexp = /\\<(\\w*)([^\\>]*)\\/\\>/gim;\n\nconst HTML_TAG = {\n    'image': true,\n    'input': true,\n    'br': true,\n    'path': true,\n    'line': true,\n    'circle': true,\n    'rect': true,\n    'polygon': true,\n    'polyline': true,\n    'use': true\n}\n\n\nexport const html = (strings: TemplateStringsArray, ...args: any[]): string => {\n\n    var results = strings.map((it: any, index: string | number) => {\n\n        var results = args[index] || ''\n\n        if (isFunction(results)) {\n            console.log(results);\n            // results = results()\n        }\n\n        if (!Array.isArray(results)) {\n            results = [results]\n        }\n\n        results = results.join('')\n\n        return it + results;\n    }).join('');\n\n    results = results.replace(short_tag_regexp, function (match: string, p1: string) {\n        if (HTML_TAG[p1.toLowerCase()]) {\n            return match;\n        } else {\n            return match.replace('/>', `></${p1}>`)\n        }\n    })\n\n    return results;\n}\n\n\n/**\n * 전체 문자열에서 특정 키워드 함수를 사용하는 패턴을 찾아 리턴해준다. \n * \n * @param {string[]} arr \n * @param {string} keyword \n */\nexport const splitMethodByKeyword = (arr: any[], keyword: string) => {\n    const filterKeys = arr.filter((code: string | string[]) => code.indexOf(`${keyword}(`) > -1);\n    const filterMaps = filterKeys.map((code: { split: (arg0: string) => { split: (arg0: string) => { trim: () => { (): any; new(): any; split: { (arg0: string): [any, any]; new(): any; }; }; }[]; }[]; }) => {\n        const [target, param] = code\n            .split(`${keyword}(`)[1]\n            .split(\")\")[0]\n            .trim()\n            .split(\" \");\n\n        return { target, param } as ISplitedMethod;\n    });\n\n    return [filterKeys, filterMaps];\n};","import { debounce, ifCheck, isFunction, throttle } from \"./functions/func\";\nimport { IMultiCallback, IKeyValue } from \"./types\";\n \n/**\n * @class BaseStore\n * @description BaseStore is the base class for all stores.\n * \n */ \nexport class BaseStore {\n  cachedCallback: {};\n  callbacks: {};\n  editor: any;\n  source: any;\n  constructor(editor?: any) {\n    this.cachedCallback = {};\n    this.callbacks = {};\n    this.editor = editor;\n  }\n\n  getCallbacks(event: string) {\n    if (!this.callbacks[event]) {\n      this.callbacks[event] = []\n    }\n\n    return this.callbacks[event]\n  }\n\n  setCallbacks(event: string, list = []) {\n    this.callbacks[event] = list; \n  }\n\n  /**\n   * 메세지 등록 \n   * \n   * @param {string} event \n   * @param {Function} originalCallback \n   * @param {EventMachine} context \n   * @param {number} debounceDelay \n   * @param {number} throttleDelay \n   * @param {boolean} enableAllTrigger\n   * @param {boolean} enableSelfTrigger\n   * @param {string[]} [beforeMethods=[]]\n   * @returns {Function} off callback \n   */\n  on(event: any, originalCallback: IMultiCallback, context: IKeyValue, debounceDelay = 0, throttleDelay = 0, enableAllTrigger = false, enableSelfTrigger = false, beforeMethods = []) {\n    var callback = originalCallback;\n    \n    if (debounceDelay > 0)  callback = debounce(originalCallback, debounceDelay);\n    else if (throttleDelay > 0)  callback = throttle(originalCallback, throttleDelay);\n\n    if (beforeMethods.length) {\n      callback = ifCheck(callback, context, beforeMethods);\n    }\n\n    this.getCallbacks(event).push({ event, callback, context, originalCallback, enableAllTrigger, enableSelfTrigger });\n\n    this.debug('add message event', event, context.sourceName );\n\n    return () => {\n      this.off(event, originalCallback);\n    }\n  }\n  debug(message: string, event: any, sourceName?: any) {\n    // console.log({message, event, sourceName});\n  }\n\n  /**\n   * 메세지 해제\n   * \n   * @param {string} event \n   * @param {*} originalCallback \n   */\n  off(event: any, originalCallback: IMultiCallback) {\n\n    this.debug('off message event', event );\n\n    if (arguments.length == 1) {\n      this.setCallbacks(event);\n    } else if (arguments.length == 2) {      \n      this.setCallbacks(event, this.getCallbacks(event).filter((f: { originalCallback: any; }) => {\n        return f.originalCallback !== originalCallback\n      }));\n    }\n  }\n\n  offAll (context: any) {\n\n    Object.keys(this.callbacks).forEach(event => {\n      this.setCallbacks(event, this.getCallbacks(event).filter((f: { context: any; }) => {\n        return f.context !== context;  \n      }))\n    })\n    this.debug('off all message', context.sourceName );\n  }\n\n  getCachedCallbacks (event: any) {\n    return this.getCallbacks(event);\n  }\n\n  sendMessage(source: any, event: string|Function, ...args: any[]) {\n    Promise.resolve().then(() => {\n      var list = this.getCachedCallbacks(event);\n      if (list) {\n\n        for(var i = 0, len = list.length; i < len; i++) {\n          const f = list[i];\n          // console.log(source);\n          if (f.enableSelfTrigger) continue;\n\n          if (f.enableAllTrigger || f.originalCallback.source !== source) {\n            f.callback.apply(f.context, args)  \n          }\n        }\n      }\n\n    });\n  }\n\n  nextSendMessage(source: any, callback: IMultiCallback, ...args: any[]) {\n    Promise.resolve().then(() => {\n      callback(...args)\n    });\n  }\n\n  triggerMessage(source: (source: any, event: any, arg2: any) => void, event: any, ...args: any[]) {\n    Promise.resolve().then(() => {\n      var list = this.getCachedCallbacks(event);\n\n      if (list) {\n        for(var i = 0, len = list.length; i < len; i++) {\n          const f = list[i];\n          if (f.originalCallback.source === source) {\n            f.callback.apply(f.context, args)  \n          }\n        }\n      } else {\n        console.warn(event, ' is not valid event');\n      }\n\n\n    });\n  }\n\n  emit(event: IMultiCallback| string, ...args: any[]) {\n\n    if (isFunction(event)) {\n      (event as IMultiCallback)(...args);\n    } else {\n      this.sendMessage(this.source, event, ...args);\n    }\n\n  }\n  \n  /**\n   * 마이크로 Task 실행 \n   * \n   * @param {Function} callback  마이크로Task 형식으로 실행될 함수 \n   */\n  nextTick (callback: IMultiCallback) {\n    this.nextSendMessage(this.source, callback);\n  }\n\n  trigger(event: IMultiCallback|string, ...args: any[]) {\n\n    if (isFunction(event)) {\n      (event as IMultiCallback)(...args);\n    } else {\n      this.triggerMessage(this.source, event, ...args);\n    }\n\n  }\n}\n","import { HTMLInstance, IDom, IKeyValue } from \"../types\";\n\nconst setBooleanProp = (el: Element, name: string, value: boolean) => {\n    if (value) {\n        el.setAttribute(name, name);\n        el[name] = value;\n    } else {\n        el.removeAttribute(name);\n        el[name] = value;\n    }\n  };\n  \nconst setProp = (el: Element, name: string, value: boolean|any) => {\n    if (typeof value === 'boolean') {\n        setBooleanProp(el, name, value);\n    } else {\n        el.setAttribute(name, value);\n    }\n};\n\n\nconst removeBooleanProp = (node: Element, name: string) => {\n    node.removeAttribute(name);\n    node[name] = false;\n};\n\nconst removeUndefinedProp = (node: Element, name: string) => {\n    node.removeAttribute(name);\n}\n  \nconst removeProp = (node: Element, name: string, value: any) => {\n    if (typeof value === 'boolean') {\n        removeBooleanProp(node, name);\n    } else if (name) {\n        removeUndefinedProp(node, name);\n    }\n};\n  \n\nconst updateProp = (node: Element, name: string, newValue: any, oldValue: any) => {\n    if (!newValue) {\n      removeProp(node, name, oldValue);\n    } else if (!oldValue || newValue !== oldValue) {\n      setProp(node, name, newValue);\n    }\n  };\n\n\nconst updateProps = (node: Element, newProps: IKeyValue = {}, oldProps: IKeyValue = {}) => {\n\n    const keyList: any[] = [];\n    keyList.push.apply(keyList, Object.keys(newProps))\n    keyList.push.apply(keyList, Object.keys(oldProps))\n\n    const props = [...new Set(keyList)]\n  \n    for(var i = 0, len = props.length; i < len; i++) {\n        const key = props[i];\n        updateProp(node, key, newProps[key], oldProps[key]);\n    }\n};\n\n/**\n * TEXT_NODE 일 때   둘 다 공백일 때는  비교하지 않는다. \n * \n * @param {*} node1 \n * @param {*} node2 \n */\nfunction changed(node1: { nodeType: number; textContent: any; nodeName: any; }, node2: { textContent: any; nodeName: any; }) {\n    return (\n        (node1.nodeType === Node.TEXT_NODE && node1.textContent !== node2.textContent) \n        || node1.nodeName !== node2.nodeName\n    ) \n}\n\nfunction hasPassed(node1: Element) {\n    return (\n        (node1.nodeType !== Node.TEXT_NODE && node1.getAttribute('data-domdiff-pass') === 'true') \n    ) \n}\n\n/**\n * refClass 속성을 가지고 있으면 기존 el 을 대체한다. \n * \n */ \nfunction hasRefClass(node1: Element) {\n    return (\n        (node1.nodeType !== Node.TEXT_NODE && (node1.getAttribute('refClass'))) \n    ) \n}\n\nfunction getProps (attributes: NamedNodeMap) {\n    var results = {}\n    const len = attributes.length;\n    for(let i = 0; i < len; i++) {\n        const t = attributes[i];\n        results[t.name] = t.value;        \n    }\n\n    return results;\n    \n}\n\nfunction updateElement (parentElement: Element, oldEl: Element, newEl: Element, i: number) {\n\n    if (!oldEl) {\n        // console.log('replace');        \n        parentElement.appendChild(newEl.cloneNode(true));\n    } else if (!newEl) {\n        // console.log('replace');        \n        parentElement.removeChild(oldEl);\n    } else if (hasPassed(oldEl) || hasPassed(newEl)) {\n        // NOOP\n        // data-domdiff-pass=\"true\" 일 때는 아무것도 비교하지 않고 끝낸다. \n        // console.log(oldEl, newEl, 'passed');\n    } else if (changed(newEl, oldEl) || hasRefClass(newEl)) {\n        // node 가 같지 않으면 바꾸고, refClass 속성이 있으면 바꾸고\n        parentElement.replaceChild(newEl.cloneNode(true), oldEl);\n    } else if (\n        newEl.nodeType !== Node.TEXT_NODE \n\n        && newEl.nodeType !== Node.COMMENT_NODE\n        && newEl.toString() !== \"[object HTMLUnknownElement]\"\n    ) {\n        // console.log(newEl);\n        updateProps(oldEl, getProps(newEl.attributes), getProps(oldEl.attributes)); // added        \n        var oldChildren = children(oldEl);\n        var newChildren = children(newEl);\n        var max = Math.max(oldChildren.length, newChildren.length);\n\n        for (var i = 0; i < max; i++) {\n            updateElement(oldEl, oldChildren[i], newChildren[i], i);\n        }\n    }\n\n}\n\nconst children = (el: Element): Element[] => {\n    var element = el.firstChild; \n\n    if (!element) {\n        return [] \n    }\n\n    var results = [] as Element[]\n\n    do {\n        results.push(element as Element);\n        element = element.nextSibling;\n    } while (element);\n\n    return results; \n}\n\n\nexport function DomDiff (A: HTMLInstance | IDom, B: HTMLInstance | IDom) {\n\n    A = (A as IDom).el || A; \n    B = (B as IDom).el || B; \n\n    var childrenA = children(A as Element);\n    var childrenB = children(B as Element); \n\n    var len = Math.max(childrenA.length, childrenB.length);\n    for (var i = 0; i < len; i++) {\n        updateElement(A as Element, childrenA[i], childrenB[i], i);\n    }\n}\n","\nimport { DomElement, HTMLInstance, IDom, IKeyValue } from \"../types\";\nimport { DomDiff } from \"./DomDiff\";\n\n/**\n * Dom 유틸리티 \n * \n */ \nexport class Dom implements IDom {\n  el: HTMLInstance;\n  _initContext: any;\n  constructor(tag: DomElement, className: string = '', attr: IKeyValue = {}) {\n    if (typeof tag !== 'string') {\n      this.el = tag;\n    } else {\n      var el = document.createElement(tag);\n\n      if (className) {\n        el.className = className;\n      }\n \n      for (var k in attr) {\n        el.setAttribute(k, attr[k]);\n      }\n\n      this.el = el;\n    }\n  }\n\n  static create (tag: DomElement, className: string = '', attr: IKeyValue = {}) {\n    return new Dom(tag, className, attr);\n  }\n \n  /**\n   * @param {any} htmlString\n   */\n  static createByHTML (htmlString: any) {\n    var div = Dom.create('div')\n    var list = (div.html(htmlString) as Dom).children();\n\n    if (list.length) {\n      return Dom.create(list[0].el);\n    }\n\n    return null; \n  }\n\n  static getScrollTop() {\n    return Math.max(\n      window.pageYOffset,\n      document.documentElement.scrollTop,\n      document.body.scrollTop\n    );\n  }\n\n  static getScrollLeft() {\n    return Math.max(\n      window.pageXOffset,\n      document.documentElement.scrollLeft,\n      document.body.scrollLeft\n    );\n  }\n\n  static parse(html: string) {\n    var parser = new DOMParser();\n    return parser.parseFromString(html, \"text/html\");\n  }\n\n  static body () {\n    return Dom.create(document.body)\n  }\n\n  get htmlEl (): HTMLElement {\n    return this.el as HTMLElement;\n  }\n  \n  get inputEl (): HTMLInputElement {\n    return this.el as HTMLInputElement\n  }\n  get svgEl (): SVGElement {\n    return this.el as SVGElement;\n  }\n\n  setAttr (obj: IKeyValue) {\n    Object.keys(obj).forEach(key => {\n      this.attr(key, obj[key])\n    })\n    return this;  \n  }\n\n  setAttrNS (obj: IKeyValue, namespace = 'http://www.w3.org/2000/svg') {\n    Object.keys(obj).forEach(key => {\n      this.attrNS(key, obj[key], namespace)\n    })\n    return this;  \n  }  \n\n  setProp (obj: IKeyValue) {\n    Object.keys(obj).forEach(key => {\n      // 동일한 값을 갱신하지 않는다. \n      if (this.htmlEl[key] != obj[key]) {\n        this.htmlEl[key] = obj[key];\n      }\n    })\n    return this;  \n  }\n\n  /**\n   * data-xxx 속성을 관리한다. \n   * \n   * @param {string} key \n   * @param {any} value \n   */\n  data (key: string, value: any) {\n    if (arguments.length === 1) {\n      return this.attr('data-' + key);\n    } else if (arguments.length === 2) {\n      return this.attr('data-' + key, value);\n    }\n\n    //TODO:  data 속성을 모두 {[key]: value} 형태로 리턴하기 \n\n    return this; \n  }\n\n  /**\n   * Dom attribute 얻기 또는 설정 \n   * \n   * get ->  Dom.create(targetElement).attr('key');\n   * set -> Dom.create(targetElement).attr('key', value);\n   * \n   * @param {string} key \n   * @param {[string]} value \n   */\n  attr(key: string, value?: undefined) {\n    if (arguments.length == 1) {\n      return this.htmlEl.getAttribute(key);\n    }\n\n    // 동일한 속성 값이 있다면 변경하지 않는다. \n    if (this.htmlEl.getAttribute(key) != value) {\n      this.htmlEl.setAttribute(key, `${value}`);\n    }\n\n    return this;\n  }\n\n  /**\n   * @param {any} key\n   * @param {any} value\n   */\n  attrNS(key: string, value: any, namespace = 'http://www.w3.org/2000/svg') {\n    if (arguments.length == 1) {\n      return this.svgEl.getAttributeNS(namespace, key);\n    }\n\n    // 동일한 속성 값이 있다면 변경하지 않는다. \n    if (this.svgEl.getAttributeNS(namespace, key) != value) {\n      this.svgEl.setAttributeNS(namespace, key, value);\n    }\n\n    return this;\n  }  \n\n  /**\n   * @param {any} keyField\n   */\n  attrKeyValue(keyField: any): IKeyValue {\n    return {\n      [`${this.htmlEl.getAttribute(keyField)}`]: this.val()\n    }\n  }\n\n  attrs(...args: string[]) {\n    return args.map(key => {\n      return this.htmlEl.getAttribute(key);\n    });\n  }\n\n  /**\n   * @param {any[]} args\n   */\n  styles(...args: any[]) {\n    return args.map(key => {\n      return this.htmlEl.style[key];\n    });\n  }  \n\n  /**\n   * @param {string} key\n   */\n  removeAttr(key: string) {\n    this.htmlEl.removeAttribute(key);\n\n    return this;\n  }\n\n  /**\n   * @param {any} key\n   */\n  removeStyle(key: any) {\n    this.htmlEl.style.removeProperty(key);\n    return this;\n  }\n\n  /**\n   * @param {{ el: any; }} checkElement\n   */\n  is(checkElement: { el: any; }) {\n    return this.htmlEl === (checkElement.el || checkElement);\n  }\n\n  /**\n   * @param {string} tag\n   */\n  isTag(tag: string) {\n    return this.htmlEl.tagName.toLowerCase() === tag.toLowerCase()\n  }\n\n  /**\n   * @param {any} cls\n   */\n  closest(cls: any) {\n    var temp: Dom = this;\n    var checkCls = false;\n\n    while (!(checkCls = temp.hasClass(cls))) {\n      if (temp.el.parentNode) {\n        temp = Dom.create(temp.el.parentNode as HTMLElement);\n      } else {\n        return null;\n      }\n    }\n\n    if (checkCls) {\n      return temp;\n    }\n\n    return null;\n  }\n\n  path(): Dom[] {\n\n    if (!this.htmlEl) return [];\n\n    const $parentNode = this.parent(); \n\n    if ($parentNode) {\n      return [...$parentNode.path(), this]\n    } else {\n      return [this]\n    }\n\n\n  }\n\n  parent() {\n    return Dom.create(this.htmlEl.parentNode as HTMLElement);\n  }\n\n  hasParent () {\n    return !!this.htmlEl.parentNode\n  }\n\n  /**\n   * @param {any[]} args\n   */\n  removeClass(...args: any[]) {\n    this.htmlEl.classList.remove(...args);\n    return this;\n  }\n\n  /**\n   * @param {any} cls\n   */\n  hasClass(cls: any) {\n    if (!this.htmlEl.classList) return false;\n    return this.htmlEl.classList.contains(cls);\n  }\n\n  /**\n   * @param {any[]} args\n   */\n  addClass(...args: any[]) {\n    this.htmlEl.classList.add(...args);\n\n    return this;\n  }\n\n  /**\n   * @param {any} cls\n   */\n  onlyOneClass(cls: any) {\n    var parent = this.parent();\n\n    parent.children().forEach(it => {\n      it.removeClass(cls);\n    })\n\n    this.addClass(cls);\n  }\n\n  /**\n   * @param {string} cls\n   * @param {any} isForce\n   */\n  toggleClass(cls: string, isForce: any) {\n    this.htmlEl.classList.toggle(cls, isForce);\n    return this; \n  }\n\n  /**\n   * @param {string} html\n   */\n  html(html: string) {\n    if (typeof html === 'undefined') {\n      return this.htmlEl.innerHTML;\n    }\n\n    if (typeof html === 'string') {\n      this.htmlEl.innerHTML = html;\n    } else {\n      this.empty().append(html);\n    }\n\n    return this;\n  }\n\n  /**\n   * @param {any} fragment\n   */\n  htmlDiff(fragment: HTMLInstance) {\n    DomDiff(this, fragment);\n  }\n  /**\n   * @param {any} html\n   */\n  updateDiff (html: string, rootElement:string = 'div') {\n    DomDiff(this, Dom.create(rootElement).html(html) as Dom)\n  }\n\n  /**\n   * @param {any} html\n   */\n  updateSVGDiff (html: any, rootElement = 'div') {\n    DomDiff(this, (Dom.create(rootElement).html(`<svg>${html}</svg>`) as Dom).firstChild.firstChild)\n  }  \n\n  /**\n   * @param {any} selector\n   */\n  find(selector: any) {\n    return this.htmlEl.querySelector(selector);\n  }\n\n  /**\n   * @param {any} selector\n   */\n  $(selector: any) {\n    var node = this.find(selector);\n    return node ? Dom.create(node) : null;\n  }\n\n  /**\n   * @param {any} selector\n   */\n  findAll(selector: string) {\n    return Array.from(this.htmlEl.querySelectorAll(selector));\n  }\n\n  $$(selector: string) {\n    var arr = this.findAll(selector);\n    return arr.map(node => Dom.create(node as HTMLElement));\n  }\n\n  empty() {\n    while (this.htmlEl.firstChild) this.htmlEl.removeChild(this.htmlEl.firstChild);\n    return this;\n  }\n\n\n  append(el: string | HTMLInstance | Dom) {\n    if (typeof el === 'string') {\n      this.htmlEl.appendChild(document.createTextNode(el));\n    } else {\n      this.htmlEl.appendChild((el as Dom).el || el);\n    }\n\n    return this;\n  }\n\n  prepend(el: string| HTMLInstance | Dom) {\n    if (typeof el === 'string') {\n      this.htmlEl.prepend(document.createTextNode(el));\n    } else {\n      this.htmlEl.prepend((el as Dom).el || el);\n    }\n\n    return this;    \n  }\n\n  prependHTML(html: string) {\n    var $dom = Dom.create(\"div\").html(html);\n\n    this.prepend(($dom as Dom).createChildrenFragment());\n\n    return $dom;\n  }\n\n  appendHTML(html: string) {\n    var $dom = Dom.create(\"div\").html(html);\n\n    this.append(($dom as Dom).createChildrenFragment());\n\n    return $dom;\n  }\n\n  /**\n   * create document fragment with children dom\n   */\n  createChildrenFragment() {\n    const list = this.children();\n\n    var fragment = document.createDocumentFragment();\n    list.forEach($el => fragment.appendChild($el.el));\n\n    return fragment;\n  }\n\n  /**\n   * @param {{ el: any; }} target\n   */\n  appendTo(target: { el: any; }) {\n    var t = target.el ? target.el : target;\n\n    t.appendChild(this.htmlEl);\n\n    return this;\n  }\n\n  remove() {\n    if (this.htmlEl.parentNode) {\n      this.htmlEl.parentNode.removeChild(this.htmlEl);\n    }\n\n    return this;\n  }\n\n  /**\n   * @param {{ el: any; }} el\n   */\n  removeChild(el: { el: any; }) {\n    this.htmlEl.removeChild(el.el || el);\n    return this; \n  }\n\n  /**\n   * \n   * @param {string} value \n   * @returns {string} 파라미터가 없을 때  textContent 를 리턴한다. \n   */\n  text(value?: string | Dom | undefined) {\n    if (typeof value === 'undefined') {\n      return this.htmlEl.textContent;\n    } else {\n      var tempText: string = value as string;\n\n      if (value instanceof Dom) {\n        tempText = value.text() as string;\n      }\n\n      // 값의 변경 사항이 없으면 업데이트 하지 않는다. \n      if (this.htmlEl.textContent !== tempText) {\n        this.htmlEl.textContent = tempText;\n      }\n\n      return this;\n    }\n  }\n\n  /**\n   *\n   * $el.css`\n   *  border-color: yellow;\n   * `\n   *\n   * @param {*} key\n   * @param {*} value\n   */\n\n  css(key: string | ArrayLike<unknown> | IKeyValue, value?: string | undefined) {\n    const el = this.htmlEl  as HTMLElement;\n    if (typeof key === 'string' && typeof value !== 'undefined') {\n      if (key.indexOf('--') === 0 &&  typeof value !== 'undefined' ) {\n        el.style.setProperty(key, value);\n      } else {\n        el.style[key] = value;\n      }\n    } else if (typeof key !== 'undefined') {\n      if (typeof key === 'string') {\n        return getComputedStyle(el)[key];  \n      } else {\n        Object.entries(key).forEach(([localKey, value]) => {\n          if (localKey.indexOf('--') === 0 && typeof value !== 'undefined' ) {\n            el.style.setProperty(localKey, value);\n          } else {\n            el.style[localKey] = value;\n          }          \n        })\n      }\n    }\n\n    return this;\n  }\n\n  getComputedStyle (...list: string[]) {\n    var css = getComputedStyle(this.htmlEl);\n\n    var obj = {}\n    list.forEach(it => {\n      obj[it] = css[it]\n    })\n\n    return obj; \n  }\n\n  /**\n   * @param {any[]} list\n   */\n  getStyleList(...list: string[]) {\n    const el = this.htmlEl; \n    var style = {};\n\n    var len = el.style.length;\n    for (var i = 0; i < len; i++) {\n      var key = el.style[i];\n\n      style[key] = el.style[key];\n    }\n\n    list.forEach(key => {\n      style[key] = this.css(key);\n    });\n\n    return style;\n  }\n\n  /**\n   * @param {any} value\n   */\n  cssText(value: any): string|Dom {\n    const el = this.htmlEl;\n    if (typeof value === 'undefined') {\n      return el.style.cssText;\n    }\n\n    return this;\n  }\n\n  cssFloat(key: string) {\n    return parseFloat(this.css(key));\n  }\n\n  cssInt(key: any) {\n    return parseInt(this.css(key));\n  }\n\n  /**\n   * @param {string} key\n   * @param {number} value\n   */\n  px(key: string, value: number) {\n    return this.css(key, `${value}px`);\n  }\n\n  rect() {\n    return this.htmlEl.getBoundingClientRect();\n  }\n\n  bbox () {\n    return (this.el as SVGSVGElement).getBBox();\n  }\n\n  isSVG () {\n    return this.htmlEl.tagName.toUpperCase() === 'SVG';\n  }\n\n  offsetRect() {\n    const el = this.htmlEl;\n    if (this.isSVG()) {\n      const parentBox = this.parent().rect();\n      const box = this.rect();\n\n      return {\n        x: box.x - parentBox.x,\n        y: box.y - parentBox.y,\n        top: box.x - parentBox.x,\n        left: box.y - parentBox.y,\n        width: box.width,\n        height: box.height\n      }\n    }\n\n    return {\n      x: el.offsetLeft,\n      y: el.offsetTop,\n      top: el.offsetTop,\n      left: el.offsetLeft,\n      width: el.offsetWidth,\n      height: el.offsetHeight\n    };\n  }\n\n  offset() {\n    var rect = this.rect();\n\n    var scrollTop = Dom.getScrollTop();\n    var scrollLeft = Dom.getScrollLeft();\n\n    return {\n      top: rect.top + scrollTop,\n      left: rect.left + scrollLeft\n    };\n  }\n\n  offsetLeft() {\n    return this.offset().left;\n  }\n\n  offsetTop() {\n    return this.offset().top;\n  }\n\n  position() {\n    if (this.htmlEl.style.top) {\n      return {\n        top: parseFloat(this.css(\"top\")),\n        left: parseFloat(this.css(\"left\"))\n      };\n    } else {\n      return this.rect();\n    }\n  }\n\n  size() {\n    return [this.width(), this.height()];\n  }\n\n  width() {\n    return this.htmlEl.offsetWidth || this.rect().width;\n  }\n\n  contentWidth() {\n    return (\n      this.width() -\n      this.cssFloat(\"padding-left\") -\n      this.cssFloat(\"padding-right\")\n    );\n  }\n\n  height() {\n    return this.htmlEl.offsetHeight || this.rect().height;\n  }\n\n  contentHeight() {\n    return (\n      this.height() -\n      this.cssFloat(\"padding-top\") -\n      this.cssFloat(\"padding-bottom\")\n    );\n  }\n\n  /**\n   * @param {{ val: () => any; } | undefined} [value]\n   */\n  val(value?: Dom | string) {\n    if (typeof value === 'undefined') {\n      return this.inputEl.value;\n    } else if (typeof value !== 'undefined') {\n      var tempValue = value;\n\n      if (value instanceof Dom) {\n        tempValue = value.val() as string;\n      } else {\n        this.inputEl.value = tempValue as string;\n      }\n\n\n    }\n\n    return this;\n  }\n\n  matches (selector: string): Dom | null {\n    if (this.htmlEl) {\n\n      if (!this.htmlEl.matches) return null;\n\n      if (this.htmlEl.matches(selector)) {\n        return this;\n      }\n      return this.parent().matches(selector);\n    }\n\n    return null;\n}  \n\n\n  get value() {\n    return this.inputEl.value;\n  }\n\n  get files() {\n    return this.inputEl.files ? Array.from(this.inputEl.files) : [];\n  }\n\n  show(displayType = \"block\") {\n    this.htmlEl.style.display = displayType != \"none\" ? displayType : \"block\"\n\n    return this; \n  }\n\n  hide() {\n    this.htmlEl.style.display = 'none';\n\n    return this; \n  }\n\n  isHide () {\n    return this.htmlEl.style.display  === \"none\"\n  }\n\n  isShow () {\n    return !this.isHide();\n  }\n\n  /**\n   * @param {any} isForce\n   */\n  toggle(isForce: any) {\n    var currentHide = this.isHide();\n\n    if (arguments.length == 1) {\n      if (isForce) {\n        return this.show();\n      } else {\n        return this.hide();\n      }\n    } else {\n      if (currentHide) {\n        return this.show();\n      } else {\n        return this.hide();\n      }\n    }\n  }\n\n  scrollIntoView () {\n    this.htmlEl.scrollIntoView()\n  }\n\n  /**\n   * @param {any} dt\n   */\n  addScrollLeft (dt: any) {\n    this.htmlEl.scrollLeft += dt; \n    return this; \n  }\n\n  /**\n   * @param {any} dt\n   */\n  addScrollTop (dt: any) {\n    this.htmlEl.scrollTop += dt; \n    return this; \n  }  \n\n  /**\n   * @param {any} scrollTop\n   */\n  setScrollTop(scrollTop: any) {\n    this.htmlEl.scrollTop = scrollTop;\n    return this;\n  }\n\n  /**\n   * @param {any} scrollLeft\n   */\n  setScrollLeft(scrollLeft: any) {\n    this.htmlEl.scrollLeft = scrollLeft;\n    return this;\n  }\n\n  scrollTop() {\n    if (this.htmlEl === document.body) {\n      return Dom.getScrollTop();\n    }\n\n    return this.htmlEl.scrollTop;\n  }\n\n  scrollLeft() {\n    if (this.htmlEl === document.body) {\n      return Dom.getScrollLeft();\n    }\n\n    return this.htmlEl.scrollLeft;\n  }\n\n  scrollHeight() {\n    return this.htmlEl.scrollHeight;\n  }\n\n  scrollWidth() {\n    return this.htmlEl.scrollWidth;\n  }  \n\n  /**\n   * @param {any} eventName\n   * @param {any} callback\n   * @param {any} opt1\n   * @param {any} opt2\n   */\n  on(eventName: keyof HTMLElementEventMap, callback: (...arg: any[]) => any, opt1: any) {\n    this.htmlEl.addEventListener(eventName, callback, opt1);\n\n    return this;\n  }\n\n  off(eventName: keyof HTMLElementEventMap, callback: (...arg: any[]) => any) {\n    this.htmlEl.removeEventListener(eventName, callback);\n\n    return this;\n  }\n\n  getElement() {\n    return this.htmlEl;\n  }\n\n  /**\n   * @param {any} tag\n   */\n  createChild(tag: any, className = '', attrs = {}, css = {}) {\n    let $element = Dom.create(tag, className, attrs);\n    $element.css(css);\n\n    this.append($element);\n\n    return $element;\n  }\n\n  get firstChild() {\n    return Dom.create(this.htmlEl.firstElementChild as HTMLElement);\n  }\n\n  children() {\n    var element = this.htmlEl.firstElementChild;\n\n    if (!element) {\n      return [];\n    }\n\n    var results = [];\n\n    do {\n      results.push(Dom.create(element as HTMLElement));\n      element = element.nextElementSibling;\n    } while (element);\n\n    return results;\n  }\n\n  childLength() {\n    return this.htmlEl.children.length;\n  }\n\n  /**\n   * @param {{ el: any; }} newElement\n   */\n  replace(newElement: { el: any; }) {\n\n    if (this.htmlEl.parentNode) {\n      this.htmlEl.parentNode.replaceChild(newElement.el || newElement, this.htmlEl);\n    }\n\n    return this;\n  }\n\n  /**\n   * @param {{ el: any; }} oldElement\n   * @param {{ el: any; }} newElement\n   */\n  replaceChild(oldElement: { el: any; }, newElement: { el: any; }) {\n    this.htmlEl.replaceChild(newElement.el || newElement, oldElement.el || oldElement);\n\n    return this;\n  }  \n\n  checked(isChecked = false) {\n    if (arguments.length == 0) {\n      return !!this.inputEl.checked;\n    }\n\n    this.inputEl.checked = !!isChecked;\n\n    return this;\n  }\n\n\n  click () {\n    this.htmlEl.click();\n\n    return this; \n  }  \n\n  focus() {\n    this.htmlEl.focus();\n\n    return this;\n  }\n\n  select() {\n    // contenteditable 의 경우 selection api 를 사용해서 select() 를 수행한다.\n    if (this.attr('contenteditable') === 'true') {\n      var range = document.createRange();\n      range.selectNodeContents(this.htmlEl);\n      var sel = window.getSelection();\n      sel?.removeAllRanges();\n      sel?.addRange(range);\n    } else {\n      this.inputEl.select();\n    }\n\n    return this;\n  }\n\n  blur() {\n    this.htmlEl.blur();\n\n    return this;\n  }\n}\n","import { IBaseHandler, IEventMachine, IKeyValue } from \"../types\";\n\n\nexport class BaseHandler implements IBaseHandler {\n    context: IEventMachine;\n    options: IKeyValue;\n    constructor (context: IEventMachine, options: IKeyValue = {}) {\n        this.context = context;\n        this.options = options;\n    }\n\n    // 초기화 설정 \n    initialize () {\n\n    }\n\n    // html 을 로드 할 때 \n    load () {\n\n    }\n\n    // 새로고침 할 때 \n    refresh () {\n\n    }\n    \n    // 화면에 그린 이후에 실행 되는 로직들 \n    render () {\n\n    }\n\n    getRef(id: string): any {\n        return this.context.getRef(id);\n    }\n\n    run () {\n\n    }\n\n    destroy() {\n\n    }\n}","\nimport Event, { CHECK_SAPARATOR, DOM_EVENT_SAPARATOR, SAPARATOR, NAME_SAPARATOR, CHECK_DOM_EVENT_PATTERN } from \"../Event\";\nimport { Dom } from \"../functions/Dom\";\nimport { debounce, throttle, isNotUndefined, isFunction, splitMethodByKeyword } from \"../functions/func\";\nimport { DomElement, IDom, IDomEventObject, IDomEventObjectOption, IMultiCallback } from \"../types\";\nimport { BaseHandler } from \"./BaseHandler\";\n\n\nconst scrollBlockingEvents = {\n    'touchstart': true,\n    'touchmove': true,\n    'mousedown': true,\n    'mouseup': true,\n    'mousemove': true,\n    // wheel, mousewheel 은 prevent 를 해야한다. 그래서 scroll blocking 을 막아야 한다. \n    // 'wheel': true,   \n    // 'mousewheel': true\n}\n\nconst eventConverts = {\n  'doubletab': 'touchend'\n}\n\nconst customEventNames = {\n  'doubletab': true \n}\n\nexport class DomEventHandler extends BaseHandler {\n    _domEvents: any;\n    _bindings?: IDomEventObject[];\n    doubleTab: any;\n\n\n    initialize() {\n        this.destroy();\n\n        if (!this._domEvents) {\n          this._domEvents = this.context.filterProps(CHECK_DOM_EVENT_PATTERN)\n        }\n\n        this._domEvents.forEach((key: string) => this.parseDomEvent(key));\n    }\n\n    destroy() {\n        this.removeEventAll();\n    }\n\n\n    removeEventAll() {\n        this.getBindings()?.forEach((obj: IDomEventObject) => {\n          this.removeDomEvent(obj);\n        });\n        this.initBindings();\n    }\n\n    removeDomEvent({ eventName, dom, callback }: IDomEventObject) {\n      if (dom) {\n        Event.removeDomEvent(dom, eventName, callback as EventListenerOrEventListenerObject);\n      }\n    }    \n\n    getBindings() {\n        if (!this._bindings) {\n          this.initBindings();\n        }\n    \n        return this._bindings;\n    }\n\n    addBinding(obj: IDomEventObject) {\n        this.getBindings()?.push(obj);\n    }\n\n    initBindings() {\n        this._bindings = [];\n    }    \n\n\n    matchPath (el: Element, selector: string): Element|null {\n        if (el) {\n          if (el.matches(selector)) {\n            return el;\n          }\n          return this.matchPath(el.parentElement as Element, selector);\n        }\n        return null;\n    }\n      \n    hasDelegate (e: any, eventObject: IDomEventObject) {\n        return this.matchPath(e.target || e.srcElement, eventObject.delegate as string);\n    }\n      \n    makeCallback (eventObject: IDomEventObject, callback: Function) {\n      if (eventObject.delegate) {\n        return this.makeDelegateCallback(eventObject, callback);\n      } else {\n        return this.makeDefaultCallback(eventObject, callback);\n      }\n    }\n      \n    makeDefaultCallback (eventObject: IDomEventObject, callback: Function) {\n        return (e: any) => {\n          var returnValue = this.runEventCallback(e, eventObject, callback);\n          if (isNotUndefined(returnValue)) {\n            return returnValue;\n          }\n        };\n    }\n      \n    makeDelegateCallback (eventObject: IDomEventObject, callback: Function) {\n        return (e: any) => {\n          const delegateTarget = this.hasDelegate(e, eventObject);\n      \n          if (delegateTarget) {\n            // delegate target 이 있는 경우만 callback 실행\n            e.$dt = Dom.create(delegateTarget as DomElement);      \n      \n            var returnValue = this.runEventCallback(e, eventObject, callback);\n            if (isNotUndefined(returnValue)) {\n              return returnValue;\n            }\n          }\n        };\n    }\n      \n    runEventCallback (e: any, eventObject: IDomEventObject, callback: Function) {\n        const context = this.context;\n        e.xy = Event.posXY(e);\n      \n        if (eventObject.beforeMethods.length) {\n          eventObject.beforeMethods.every((before) => {\n            return context[before.target].call(context, e, before.param);\n          });\n        }\n      \n        if (this.checkEventType(e, eventObject)) {\n          var returnValue = callback(e, e.$dt, e.xy); \n      \n          if (returnValue !== false && eventObject.afterMethods.length) {\n            eventObject.afterMethods.forEach(after => {\n              return context[after.target].call(context, e, after.param)\n            });\n          }\n      \n          return returnValue;\n        }\n    }\n      \n    checkEventType (e: any, eventObject: IDomEventObject) {\n        const context = this.context;\n        // 특정 keycode 를 가지고 있는지 체크\n        var hasKeyCode = true;\n        if (eventObject.codes.length) {\n          hasKeyCode =\n            (e.code ? eventObject.codes.indexOf(e.code.toLowerCase()) > -1 : false) ||\n            (e.key ? eventObject.codes.indexOf(e.key.toLowerCase()) > -1 : false);\n        }\n      \n        // 체크 메소드들은 모든 메소드를 다 적용해야한다.\n        var isAllCheck = true;\n        if (eventObject.checkMethodList.length) {\n          isAllCheck = eventObject.checkMethodList.every(field => {\n            var fieldValue = context[field];    \n            if (isFunction(fieldValue) && fieldValue) {\n              // check method\n              return fieldValue.call(context, e);\n            } else if (isNotUndefined(fieldValue)) {\n      \n              // check field value\n              return !!fieldValue;\n            }\n            return true;\n          });\n        }\n      \n        return hasKeyCode && isAllCheck;\n    }\n      \n    getDefaultDomElement(dom: Element|string) {\n        const context = this.context;\n        let el;\n      \n        if (typeof dom === 'string' && dom) {\n          el = context.refs[dom] || context[dom] || window[dom];\n        } else {\n          el = context.el || context.$el || context.$root;\n        }\n      \n        if (el instanceof Dom) {\n          return el.getElement();\n        }\n      \n        return el;\n    };\n      \n    getRealEventName (eventName: string) {\n      return eventConverts[eventName] || eventName;\n    }\n\n    getCustomEventName (eventName: string) {\n      return customEventNames[eventName] ? eventName:  '';\n    }\n\n    /**\n     * \n     * doubletab -> touchend 로 바뀜 \n     */\n    getDefaultEventObject (eventName: string, checkMethodFilters: string[]): IDomEventObject {\n        const context = this.context;\n        let arr = checkMethodFilters;\n      \n        // context 에 속한 변수나 메소드 리스트 체크\n        const checkMethodList = arr.filter(code => !!context[code]);\n      \n        // 이벤트 정의 시점에 적용 되어야 하는 것들은 모두 method() 화 해서 정의한다.\n        const [afters, afterMethods] = splitMethodByKeyword(arr, \"after\");\n        const [befores, beforeMethods] = splitMethodByKeyword(arr, \"before\");\n        const [debounces, debounceMethods] = splitMethodByKeyword(arr, \"debounce\");\n        const [delays, delayMethods] = splitMethodByKeyword(arr, \"delay\");        \n        const [throttles, throttleMethods] = splitMethodByKeyword(arr, \"throttle\");\n        const [captures] = splitMethodByKeyword(arr, \"capture\");\n      \n        // 위의 5개 필터 이외에 있는 코드들은 keycode 로 인식한다.\n        const filteredList = [\n          ...checkMethodList,\n          ...afters,\n          ...befores,\n          ...delays,\n          ...debounces,\n          ...throttles,\n          ...captures\n        ];\n      \n        var codes = arr\n          .filter(code => filteredList.indexOf(code) === -1)\n          .map(code => code.toLowerCase());\n      \n        return {\n          eventName: this.getRealEventName(eventName),\n          customEventName: this.getCustomEventName(eventName), \n          codes,\n          captures,\n          afterMethods,\n          beforeMethods,\n          delayMethods,\n          debounceMethods,\n          throttleMethods,\n          checkMethodList\n        };\n    }\n      \n      \n    addDomEvent (eventObject: IDomEventObject, callback: Function) {\n        eventObject.callback = this.makeCallback(eventObject, callback);\n        this.addBinding(eventObject);\n      \n        var options: boolean|IDomEventObjectOption = !!eventObject.captures.length\n      \n        if (scrollBlockingEvents[eventObject.eventName]) {\n          options = {\n            passive: true,\n            capture: options  \n          }\n        }\n      \n        if (eventObject?.dom) {\n\n          Event.addDomEvent(\n            eventObject?.dom,\n            eventObject.eventName,\n            eventObject.callback,\n            options\n          );\n        }\n\n    }\n\n    makeCustomEventCallback (eventObject: IDomEventObject, callback: Function): IMultiCallback {\n\n      if (eventObject.customEventName === 'doubletab') {\n        var delay = 300;\n        \n        if (eventObject.delayMethods.length) {\n          delay = +eventObject.delayMethods[0].target;\n        }\n        return (...args: any[]) => {\n\n          if (!this.doubleTab) {\n            this.doubleTab = {\n                time: performance.now(),\n            }\n          } else {\n            if (performance.now() - this.doubleTab.time < delay) {\n              callback(...args);\n            }\n\n            this.doubleTab = null;\n          }\n        }\n\n      } \n\n      return callback as IMultiCallback; \n    }\n      \n    bindingDomEvent ( [eventName, dom, ...delegate]: string[], checkMethodFilters: string[], callback: IMultiCallback ) {\n        let eventObject = this.getDefaultEventObject(eventName, checkMethodFilters);\n      \n        eventObject.dom = this.getDefaultDomElement(dom);\n        eventObject.delegate = delegate.join(SAPARATOR);\n\n        \n        if (eventObject.debounceMethods.length) {\n          var debounceTime = +eventObject.debounceMethods[0].target;\n          callback = debounce(callback, debounceTime);\n        } else if (eventObject.throttleMethods.length) {\n          var throttleTime = +eventObject.throttleMethods[0].target;\n          callback = throttle(callback, throttleTime);\n        }\n\n        // custom event callback 만들기 \n        callback = this.makeCustomEventCallback(eventObject, callback)\n      \n        this.addDomEvent(eventObject, callback);\n    };\n      \n    getEventNames (eventName: string) {\n        let results: string[] = [];\n        \n        eventName.split(NAME_SAPARATOR).forEach(e => {\n            var arr = e.split(NAME_SAPARATOR);\n        \n            results.push.apply(results, arr);\n        });\n        \n        return results;\n    }\n    \n    /**\n     * 이벤트 문자열 파싱하기 \n     * \n     * @param {string} key \n     */\n    parseDomEvent (key: string) {\n        const context = this.context;\n        let checkMethodFilters = key.split(CHECK_SAPARATOR).map(it => it.trim()).filter(Boolean);\n        \n        var prefix = checkMethodFilters.shift()\n        var eventSelectorAndBehave = prefix?.split(DOM_EVENT_SAPARATOR)[1];\n        \n        var arr = eventSelectorAndBehave?.split(SAPARATOR);\n\n        if (arr) {\n          var eventNames = this.getEventNames(arr[0]);\n\n          var callback = context[key].bind(context);\n  \n          for(let i = 0, len = eventNames.length; i< len; i++) {\n            arr[0] = eventNames[i];\n            this.bindingDomEvent(arr, checkMethodFilters, callback);\n          }\n        }\n        \n    }  \n}","\nimport { isObject } from \"../functions/func\";\nimport { CHECK_BIND_PATTERN, BIND_CHECK_FUNCTION, CHECK_SAPARATOR, BIND_CHECK_DEFAULT_FUNCTION, BIND_SAPARATOR } from \"../Event\";\nimport { BaseHandler } from \"./BaseHandler\";\nimport { IBindHandlerData, IDom, IKeyValue } from \"../types\";\n\n/**\n * \n * @param {Dom} $element \n * @param {string} key \n * @param {any} value \n */\nconst applyElementAttribute = ($element: IDom, key: string|IKeyValue, value?: string|string[]|object|Function) => {\n\n  if (key === 'cssText') {\n    /**\n     * cssText: 'position:absolute'\n     */\n    ($element as IDom).cssText(value);\n    return; \n  } else if (key === \"style\") {\n    /**\n     * style: { key: value }\n     */\n    if (typeof(value) !== 'string') {\n      $element.css(value);\n    }\n\n    return;\n  } else if (key === \"class\") {\n    //  \"class\" : [ 'className', 'className' ] \n    //  \"class\" : { key: true, key: false } \n    //  \"class\" : 'string-class' \n\n    if (Array.isArray(value)) {\n      $element.addClass(...(value)?.filter(Boolean));\n    } else if (isObject(value)) {\n      const keys = Object.keys(value as IKeyValue);\n      for(var i = 0, len = keys.length; i < len; i++) {\n        const className = keys[i];\n        const hasClass = (value as IKeyValue)[className];\n\n        $element.toggleClass(className, hasClass);\n      }\n    } else {\n      $element.htmlEl.className  = value;\n    }\n\n    return;\n  } else if (key === 'callback') {\n    if (typeof value === 'function') {\n      value ();\n      return; \n    }\n  }\n\n  if (typeof value === 'undefined') {\n    $element.removeAttr(key);\n  } else {\n    if ($element.el.nodeName === \"TEXTAREA\" && key === \"value\") {\n      $element.text(value);\n    } else if (key === 'text' || key === 'textContent') {\n      $element.text(value);\n    } else if (key === 'innerHTML' || key === 'html') {\n      $element.html(value);\n    } else if (key === 'htmlDiff') {\n      $element.updateDiff(value);\n    } else if (key === 'svgDiff') {\n      $element.updateSVGDiff(value);\n    } else if (key === 'value') {\n      $element.val(value);\n    } else {\n      $element.attr(key, value);\n    }\n  }\n};\n\nexport class BindHandler extends BaseHandler {\n    _bindMethods: string[] | undefined;\n\n    load (...args: string[]) {\n      this.bindData(...args);\n    }\n\n    // 어떻게 실행하는게 좋을까? \n    // this.runHandle('bind', ...);\n    bindData (...args: string[]) {\n      if (!this._bindMethods) {\n        this._bindMethods = this.context.filterProps(CHECK_BIND_PATTERN);\n      }\n      /**\n       * BIND 를 해보자.\n       * 이시점에 하는게 맞는지는 모르겠지만 일단은 해보자.\n       * BIND 는 특정 element 에 html 이 아닌 데이타를 업데이트하기 위한 간단한 로직이다.\n       */\n      const bindList = this._bindMethods?.filter(originalCallbackName => {\n          if (!args.length) return true; \n          var [callbackName, id] = originalCallbackName.split(CHECK_SAPARATOR);        \n  \n          var [_, $bind] = callbackName.split(' ')\n  \n          return args.indexOf($bind) >  -1 \n        })\n\n        bindList?.forEach(async (callbackName) => {\n          const bindMethod = this.context[callbackName];\n          var [callbackName, id] = callbackName.split(CHECK_SAPARATOR);\n  \n          const refObject = this.getRef(id);\n          let refCallback = BIND_CHECK_DEFAULT_FUNCTION;\n  \n          if (typeof(refObject) === 'string' && refObject !== '') {\n            refCallback = BIND_CHECK_FUNCTION(refObject);\n          } else if (typeof refObject === 'function') {\n            refCallback = refObject;\n          }\n  \n          const elName = callbackName.split(BIND_SAPARATOR)[1];\n          let $element = this.context.refs[elName];\n  \n          // isBindCheck 는 binding 하기 전에 변화된 지점을 찾아서 업데이트를 제한한다.\n          const isBindCheck = typeof(refCallback) === 'function' && refCallback.call(this.context);\n          if ($element && isBindCheck) {\n            const results = (await bindMethod.call(this.context, ...args)) as IBindHandlerData;\n\n            if (!results) return;\n  \n            const keys = Object.keys(results);\n            for(var elementKeyIndex = 0, len = keys.length; elementKeyIndex < len; elementKeyIndex++) {\n              const key = keys[elementKeyIndex];\n              const value = results[key];\n\n              applyElementAttribute($element, key, value);\n            }\n          }\n        });\n    }    \n\n    destroy() {\n      this._bindMethods = undefined\n    }\n\n\n}","\nconst UUID_REG = /[xy]/g\n\nexport function uuid() {\n    var dt = new Date().getTime();\n    var uuid = 'xxx12-xx-34xx'.replace(UUID_REG, function (c) {\n        var r = (dt + Math.random() * 16) % 16 | 0;\n        dt = Math.floor(dt / 16);\n        return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n    });\n    return uuid;\n}\n\nexport function uuidShort() {\n    var dt = new Date().getTime();\n    var uuid = 'idxxxxxxx'.replace(UUID_REG, function (c) {\n        var r = (dt + Math.random() * 16) % 16 | 0;\n        dt = Math.floor(dt / 16);\n        return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n    });\n    return uuid;\n}\n","import {\n  CHECK_SAPARATOR,\n  CHECK_LOAD_PATTERN,\n  LOAD_SAPARATOR,\n  DOMDIFF,\n  getRef,\n  MAGIC_METHOD,\n} from \"./Event\";\n\nimport {\n  isFunction,\n  html,\n  keyEach,\n  collectProps,\n  isString\n} from \"./functions/func\";\n\nimport {DomEventHandler} from \"./handler/DomEventHandler\";\nimport {BindHandler} from \"./handler/BindHandler\";\nimport { retriveElement } from \"./functions/registElement\";\nimport { uuid, uuidShort } from \"./functions/uuid\";\nimport { Dom } from \"./functions/Dom\";\nimport { IBaseHandler, IDom, IEventMachine, IKeyValue } from \"./types\";\n\n\nconst REFERENCE_PROPERTY = \"ref\";\nconst TEMP_DIV = Dom.create(\"div\");\nconst QUERY_PROPERTY = `[${REFERENCE_PROPERTY}]`;\nconst REF_CLASS = 'refclass';\nconst REF_CLASS_PROPERTY = `[${REF_CLASS}]`\nconst VARIABLE_SAPARATOR = \"__ref__variable:\";\n\n\nexport class EventMachine implements IEventMachine {\n  state: any;\n  prevState: any;\n  children: any;\n  _bindings: never[];\n  id: string;\n  __tempVariables: Map<string, any>;\n  handlers: (BindHandler | DomEventHandler)[];\n  _loadMethods: any;\n  __cachedMethodList: any;\n  constructor(opt: Object | IEventMachine, props: IKeyValue) {\n    this.state = {};\n    this.prevState = {};\n    this.refs = {};\n    this.children = {};\n    this._bindings = [];\n    this.id = uuid();    \n    this.__tempVariables = new Map();\n    this.handlers = this.initializeHandler()\n\n    this.initializeProperty(opt, props);\n\n    this.initComponents();\n  }\n  private _$store: any;\n  public get $store(): any {\n    return this._$store;\n  }\n  public set $store(value: any) {\n    this._$store = value;\n  }\n  el: any;\n  $el: any;\n  $root: any;\n  refs: any;\n  opt!: IKeyValue;\n  parent!: IEventMachine;\n  props!: IKeyValue;\n  source!: string;\n  sourceName!: string;\n  childComponents!: IKeyValue;\n\n\n\n  /**\n   * UIElement instance 에 필요한 기본 속성 설정 \n   */\n  initializeProperty (opt: any, props = {}) {\n\n    this.opt = opt || {};\n    this.parent = this.opt as IEventMachine;\n    this.props = props;\n    this.source = uuid();\n    this.sourceName = this.constructor.name;  \n\n\n\n  }\n\n  initComponents() {\n    this.childComponents = this.components() \n  }\n\n  initializeHandler () {\n    return [\n      new BindHandler(this as any),\n      new DomEventHandler(this as any)\n    ]\n  }\n\n  /**\n   * state 를 초기화 한것을 리턴한다. \n   * \n   * @protected\n   * @returns {Object} \n   */\n  initState() {\n    return {};\n  }\n\n  /**\n   * state 를 변경한다. \n   * \n   * @param {Object} state  새로운 state \n   * @param {Boolean} isLoad  다시 로드 할 것인지 체크 , true 면 state 변경후 다시 로드 \n   */\n  setState(state = {}, isLoad = true) {\n    this.prevState = this.state;\n    this.state = Object.assign({}, this.state, state );\n    if (isLoad) {\n      this.load();\n    }\n  }\n\n  /**\n   * state 에 있는 key 필드의 값을 토글한다. \n   * Boolean 형태의 값만 동작한다. \n   * \n   * @param {string} key \n   * @param {Boolean} isLoad \n   */\n  toggleState(key: string | number, isLoad = true) {\n    this.setState({\n      [key]: !(this.state[key])\n    }, isLoad)\n  }\n\n  /**\n   * props 를 넘길 때 해당 참조를 그대로 넘기기 위한 함수 \n   * \n   * @param {any} value\n   * @returns {string} 참조 id 생성 \n   */ \n  variable(value: any) {\n    const id = `${VARIABLE_SAPARATOR}${uuidShort()}`;\n\n    this.__tempVariables.set(id, value);\n\n    return id;\n  }\n\n  /**\n   * 참조 id 를 가지고 있는 variable 을 복구한다. \n   */ \n  recoverVariable(id: string) {\n    if (isString(id) === false) {\n      return id;\n    }\n\n    let value = id;\n\n    if (this.__tempVariables.has(id)) {\n      value = this.__tempVariables.get(id);\n\n      this.__tempVariables.delete(id);\n    }\n\n    return value;\n  }\n\n  /**\n   * 객체를 다시 그릴 때 사용한다. \n   * \n   * @param {*} props \n   * @protected\n   */\n  _reload(props: any) {\n    this.props = props;\n    this.state = {}; \n    this.setState(this.initState(), false);\n    this.refresh();\n  }\n\n  /**\n   * template 을 렌더링 한다. \n   * \n   * @param {Dom|undefined} $container  컴포넌트가 그려질 대상 \n   */\n  render($container: IDom) {\n    this.$el = this.parseTemplate(\n      html`\n        ${this.template()}\n      `\n    );\n    this.refs.$el = this.$el;\n\n    if ($container) {\n      $container.append(this.$el);\n    }\n\n    // LOAD 로 정의된 것들을 수행한다. \n    this.load();\n\n    // render 이후에 실행될 콜백을 정의한다. \n    this.afterRender();\n  }\n\n  initialize() {\n    this.state = this.initState();\n  }\n\n  /**\n   * render 이후에 실행될 함수 \n   * dom 이 실제로 생성된 이후에 수행할 작업들을 정의한다. \n   * \n   * @protected\n   */\n  afterRender() {}\n\n  /**\n   * 하위에 연결될 객체들을 정의한다 \n   * \n   * @protected\n   * @returns {Object}\n   */\n  components() {\n    return {};\n  }\n\n  /**\n   * ref 이름을 가진 Component 를 가지고 온다. \n   * \n   * @param  {any[]} args \n   * @returns {EventMachine}\n   */\n  getRef(...args: string[]) {\n    const key = args.join('')\n    return this.refs[key];\n  }\n\n  /**\n   * template() 함수의 결과물을 파싱해서 dom element 를 생성한다. \n   * \n   * @param {string} html \n   * @param {Boolean} [isLoad=false] \n   */\n  parseTemplate(html: string, isLoad: boolean | undefined = false) {\n    //FIXME: html string, element 형태 모두 array 로 받을 수 있도록 해보자. \n    if (Array.isArray(html)) {\n      html = html.join('');\n    }\n\n    html = html.trim();\n    const list = (TEMP_DIV.html(html) as IDom).children();\n    /////////////////////////////////\n\n    for(var i = 0, len = list.length; i < len; i++) {\n      const $el = list[i];\n\n      var ref = $el.attr(REFERENCE_PROPERTY)\n      if (ref) {\n        this.refs[ref] = $el;\n      }\n\n      var refs = $el.$$(QUERY_PROPERTY);\n      var temp = {} \n\n      for(var refsIndex = 0, refsLen = refs.length; refsIndex < refsLen; refsIndex++) {\n        const $dom = refs[refsIndex];\n\n        const name = $dom.attr(REFERENCE_PROPERTY);\n        if (temp[name]) {\n          console.warn(`${ref} is duplicated. - ${this.sourceName}`, this)\n        } else {\n          temp[name] = true; \n        }\n\n        this.refs[name] = $dom;             \n      }\n    }\n\n    if (!isLoad && list.length) {\n      return list[0];\n    }\n\n    return Dom.create(TEMP_DIV.createChildrenFragment());\n  }\n\n  parseProperty ($dom: IDom) {\n    let props = {};\n\n    // parse properties \n    for(var t of $dom.htmlEl.attributes) {\n      props[t.nodeName] = this.recoverVariable(t.nodeValue);\n    }\n\n    if (props['props']) {\n      props = {\n        ...props,\n        ...getRef(props['props'])\n      }\n    }\n\n    $dom.$$('property').forEach(($p: { attrs: (arg0: string, arg1: string, arg2: string) => [any, any, any]; text: () => any; }) => {\n      const [name, value, valueType] = $p.attrs('name', 'value', 'valueType')\n\n      let realValue = value || $p.text();\n\n      if (valueType === 'json') {          \n        realValue = JSON.parse(realValue);\n      }\n    \n      props[name] = realValue; \n    })\n\n    return props;\n  }\n\n  getEventMachineComponent (refClassName: string) {\n    var EventMachineComponent = retriveElement(refClassName) || this.childComponents[refClassName];\n\n    return EventMachineComponent;\n  }\n\n  parseComponent() {\n    const $el = this.$el;\n\n    let targets = $el.$$(REF_CLASS_PROPERTY);\n\n    targets.forEach(($dom: IDom) => {\n\n      const EventMachineComponent = this.getEventMachineComponent($dom.attr(REF_CLASS))\n\n      if (EventMachineComponent) {\n        let props = this.parseProperty($dom);\n  \n        // create component \n        let refName = $dom.attr(REFERENCE_PROPERTY);\n        var instance = null; \n  \n        // 동일한 refName 의 EventMachine 이 존재하면  해당 컴포넌트는 다시 그려진다. \n        // 루트 element 는 변경되지 않는다. \n        if (this.children[refName]) {\n          instance = this.children[refName] \n          instance._reload(props);\n        } else {\n          // 기존의 refName 이 존재하지 않으면 Component 를 생성해서 element 를 교체한다. \n          instance = new EventMachineComponent(this, props);\n  \n          this.children[refName || instance.id] = instance;\n  \n          instance.render();\n        }\n        \n\n        if (instance.renderTarget) {\n          instance.$el?.appendTo(instance.renderTarget);\n          $dom.remove();\n        } else {\n          $dom.replace(instance.$el);     \n        }\n\n      } else {\n        $dom.remove();\n      }\n \n  \n    })\n\n    keyEach(this.children, (key, obj) => {\n      if (obj && obj.clean()) {\n        delete this.children[key]\n      }\n    })\n  }\n\n  clean () {\n    if (this.$el && !this.$el.hasParent()) {\n\n      keyEach(this.children, (key, child) => {\n        child.clean();\n      })\n\n      this.destroy();  \n\n      this.$el = null;\n      return true; \n    }\n  }\n\n  /**\n   * refresh 는 load 함수들을 실행한다. \n   */\n  refresh() {\n    this.load()\n  }\n\n  _afterLoad () {\n\n    this.runHandlers('initialize');\n\n    this.bindData();\n\n    this.parseComponent();\n  }\n\n  async load(...args: string[]) {\n    if (!this._loadMethods) {\n      this._loadMethods = this.filterProps(CHECK_LOAD_PATTERN);\n    }\n\n    // loop 가 비동기라 await 로 대기를 시켜줘야 나머지 html 업데이트에 대한 순서를 맞출 수 있다. \n    const localLoadMethods = this._loadMethods.filter((callbackName: string) => {\n        const elName = callbackName.split(LOAD_SAPARATOR)[1]\n                                  .split(CHECK_SAPARATOR)\n                                  .map((it: string) => it.trim())[0];\n        if (!args.length) return true; \n        return args.indexOf(elName) > -1\n      })\n\n\n\n    await localLoadMethods.forEach(async (callbackName: string) => {\n      let methodName = callbackName.split(LOAD_SAPARATOR)[1];\n      var [elName, ...checker] = methodName.split(CHECK_SAPARATOR).map((it: string) => it.trim())\n\n      checker = checker.map((it: string) => it.trim())\n      \n      const isDomDiff = Boolean(checker.filter((it: string) => DOMDIFF.includes(it)).length);\n\n      if (this.refs[elName]) {        \n        var newTemplate = await this[callbackName].call(this, ...args);\n\n        if (Array.isArray(newTemplate)) {\n          newTemplate = newTemplate.join('');\n        }\n\n        // create fragment \n        const fragment = this.parseTemplate(html`${newTemplate}`, true);\n        if (isDomDiff) {\n          this.refs[elName].htmlDiff(fragment);\n        } else {\n          this.refs[elName].html(fragment);\n        }\n\n      }\n    });\n\n    this._afterLoad();\n\n  }\n\n  runHandlers(func = 'run', ...args: any[]) {\n    this.handlers.forEach((h: IBaseHandler) => h[func](...args));\n  }\n\n  bindData (...args: string[]) {\n    this.runHandlers('load', ...args);\n  }\n\n  /**\n   * 템플릿 지정 \n   * \n   * 템플릿을 null 로 지정하면 자동으로 DocumentFragment 을 생성한다.\n   * 화면에는 보이지 않지만 document, window 처럼 다른 영역의 이벤트로 정의하거나 subscribe 형태로 가져올 수 있다.\n   * \n   */ \n  template(): string|string[]|DocumentFragment|null {\n    return null;\n  }\n\n  eachChildren(callback: Function) {\n    if (!isFunction(callback)) return;\n\n    keyEach(this.children, (_, Component) => {\n      callback(Component);\n    });\n  }\n\n  rerender () {\n    var $parent = this.$el.parent();\n    this.destroy();\n    this.render($parent);  \n  }\n\n  /**\n   * 자원을 해제한다.\n   * 이것도 역시 자식 컴포넌트까지 제어하기 때문에 가장 최상위 부모에서 한번만 호출되도 된다.\n   * \n   */\n  destroy() {\n    this.eachChildren((childComponent: IEventMachine) => {\n      childComponent.destroy();\n    });\n\n    this.runHandlers('destroy');\n    if (this.$el) {\n      this.$el.remove();\n    }\n\n    this.$el = null; \n    this.refs = {} \n    this.children = {} \n  }\n\n  /**\n   * property 수집하기\n   * 상위 클래스의 모든 property 를 수집해서 리턴한다.\n   * \n   * @returns {string[]} 나의 상위 모든 메소드를 수집해서 리턴한다. \n   */\n  collectProps() {\n\n    if (!this.__cachedMethodList){\n      this.__cachedMethodList = collectProps(this, (name: string | string[]) => {\n        return name.indexOf(MAGIC_METHOD) === 0; \n      });\n    }\n\n    return this.__cachedMethodList;\n  }\n\n  filterProps(pattern: RegExp) {\n    return this.collectProps().filter((key: string) => {\n      return key.match(pattern);\n    });\n  }\n\n  /* magic check method  */\n\n  self(e: any) {\n    return e && e.$dt && e.$dt.is(e.target);\n  }\n  isAltKey(e: any) {\n    return e.altKey;\n  }\n  isCtrlKey(e: any) {\n    return e.ctrlKey;\n  }\n  isShiftKey(e: any) {\n    return e.shiftKey;\n  }\n  isMetaKey(e: any) {\n    return e.metaKey || e.key == 'Meta' || e.code.indexOf('Meta') > -1 ;\n  }\n  isMouseLeftButton(e: any) {\n    return e.buttons === 1;     // 1 is left button \n  }\n\n  isMouseRightButton(e: any) {\n    return e.buttons === 2;     // 2 is right button \n  }  \n\n  hasMouse(e: any) { \n    return e.pointerType === 'mouse';\n  }\n\n  hasTouch(e: any) {\n    return e.pointerType === 'touch';\n  }\n\n  hasPen(e: any) {\n    return e.pointerType === 'pen';\n  }  \n\n  /** before check method */\n\n  /* after check method */\n\n  preventDefault(e: any) {\n    e.preventDefault();\n    return true;\n  }\n\n  stopPropagation(e: any) {\n    e.stopPropagation();\n    return true;\n  }\n}\n","import { CHECK_SAPARATOR, CHECK_SUBSCRIBE_PATTERN, SUBSCRIBE_SAPARATOR } from \"./Event\";\nimport { EventMachine } from \"./EventMachine\";\nimport { isFunction, splitMethodByKeyword } from \"./functions/func\";\nimport { uuidShort } from \"./functions/uuid\";\nimport { IBaseStore, IKeyValue } from \"./types\";\n\n/**\n * UI 를 만드는 기본 단위 \n * \n * dom handler, \n * bind handler, \n * store handler 를 가진다. \n */\nexport class UIElement extends EventMachine {\n  private __storeInstance: any;\n  constructor(opt: UIElement|Object, props: IKeyValue) {\n    super(opt, props);\n\n    if (props.store) {\n      this.__storeInstance = props.store;\n    }\n\n    this.created();\n\n    this.initialize();\n\n    this.initializeStoreEvent();\n\n  }\n\n  setStore (storeInstance: IBaseStore) {\n    this.__storeInstance = storeInstance;\n  }\n\n  /**\n   * 메세징 루트를 재정의 할 수 있음. \n   * \n   * @override\n   */\n  get $store() {\n    return this.__storeInstance || this.parent.$store;\n  }  \n\n  /**\n   * UIElement 가 생성될 때 호출되는 메소드 \n   * @protected\n   */\n  created() {}\n\n  getRealEventName(e: string, separator: string) {\n    var startIndex = e.indexOf(separator);\n    return e.substr(startIndex < 0 ? 0 : startIndex + separator.length);\n  }\n\n  /**\n   * 메소드 분리 \n   * \n   * @returns {any[]}\n   */ \n  splitMethod (arr: string[], keyword: string, defaultValue: any = 0) {\n    var [methods, params] = splitMethodByKeyword(arr, keyword);\n\n    return [\n      methods.length ? +params[0].target : defaultValue,\n      methods, \n      params\n    ]\n  }\n\n  createLocalCallback(event:string, callback: Function) {\n    var newCallback = callback.bind(this);\n    newCallback.displayName = `${this.sourceName}.${event}`;\n    newCallback.source = this.source;\n\n    return newCallback;\n  }\n\n  /**\n   * initialize store event\n   *\n   * you can define '@xxx' method(event) in UIElement\n   *\n   * Store Event 를 초기화 한다. \n   *\n   */\n  initializeStoreEvent() {\n    this.filterProps(CHECK_SUBSCRIBE_PATTERN).forEach((key: string) => {\n      const events = this.getRealEventName(key, SUBSCRIBE_SAPARATOR);\n      // context 에 속한 변수나 메소드 리스트 체크\n      const [method, ...methodLine] = events.split(CHECK_SAPARATOR);\n      const checkMethodList = methodLine.map(it => it.trim()).filter(code => this[code]).map(target => ({target}));\n\n      // support deboounce for store event    \n      const [debounceSecond, debounceMethods] = this.splitMethod(methodLine, 'debounce');\n      const [throttleSecond, throttleMethods] = this.splitMethod(methodLine, 'throttle');      \n      const [allTrigger, allTriggerMethods] = this.splitMethod(methodLine, 'allTrigger');   \n      const [selfTrigger, selfTriggerMethods] = this.splitMethod(methodLine, 'selfTrigger');            \n\n      events\n        .split(CHECK_SAPARATOR)\n        .filter(it => {\n          return (\n              debounceMethods.indexOf(it) === -1 && \n              allTriggerMethods.indexOf(it) === -1 &&               \n              selfTriggerMethods.indexOf(it) === -1 &&                             \n              throttleMethods.indexOf(it) === -1\n          )\n        })\n        .map(it => it.trim())\n        .filter(Boolean)\n        .forEach(e => {\n\n          if (isFunction(this[key])) {\n            var callback = this.createLocalCallback(e, this[key] )\n            this.$store.on(e, callback, this, debounceSecond, throttleSecond, allTriggerMethods.length, selfTriggerMethods.length, checkMethodList);\n          }\n\n      });\n    });\n  }\n\n  /**\n   * 현재 UIElement 와 연결된 모든 메세지를 해제한다. \n   */\n  destoryStoreSUBSCRIBE() {\n    this.$store.offAll(this);\n  }\n\n  destroy () {\n    super.destroy()\n\n    this.destoryStoreSUBSCRIBE();\n  }\n\n  /**\n   * UIElement 를 다시 그린다. \n   * \n   * template 정의 부터  메세지 이벤트 정의까지 모두 다시 한다. \n   */\n  rerender() {\n    super.rerender();\n\n    this.initialize();\n\n    this.initializeStoreEvent();\n  }\n\n\n  /**\n   * UIElement 기반으로 메세지를 호출 한다. \n   * 나 이외의 객체들에게 메세지를 전달한다. \n   * \n   * @param {string} messageName\n   * @param {any[]} args \n   */\n  emit(messageName: string, ...args: any[]) {\n    this.$store.source = this.source;\n    this.$store.sourceContext = this; \n    this.$store.emit(messageName, ...args);\n  }\n\n  /**\n   * MicroTask 를 수행한다. \n   * \n   * @param {Function} callback \n   */\n  nextTick (callback: Function) {\n    this.$store.nextTick(callback);\n  }\n\n  /**\n   * \n   * UIElement 자신의 메세지를 수행한다. \n   * emit 은 나외의 객체에게 메세지를 보내고 \n   * \n   * @param {string} messageName \n   * @param {any[]} args \n   */\n  trigger(messageName: string, ...args: any[]) {\n    this.$store.source = this.source;\n    this.$store.trigger(messageName, ...args);\n  }\n\n  /**\n   * 자식 객체에게만 호출되는 메세지를 수행한다.\n   * \n   * @param {string} messageName\n   * @param {any[]} args\n   */ \n  broadcast(messageName: string, ...args: any[]) {\n    Object.keys(this.children).forEach(key => {\n      this.children[key].trigger(messageName, ...args);\n    })\n  }\n\n  /**\n   * message 이벤트에 주어진 callack 을 등록 \n   * 동일한 메세지 명으로 callback 은 list 화 되어서 관리 됩니다. \n   * \n   * @param {string} message 이벤트 메세지 이름 \n   * @param {Function} callback 메세지 지정시 실행될 함수\n   */ \n  on (message: string, callback: Function) {\n    this.$store.on(message, callback);\n  }\n\n  /**\n   * @param {string} message message name or function \n   * @param {Function} callback\n   */ \n  off (message: string, callback: Function) {\n    this.$store.off(message, callback);\n  }\n\n  /**\n   * 동적으로 subscribe 함수를 지정합니다. \n   * \n   * template 안에서 동적으로 수행할 수 있습니다. \n   * \n   * 이렇게 생성된 subscribe 함수는 외부에서는 실행 할수가 없는 SUBSCRIBE_SELF 로 생성됩니다. \n   * \n   * 함수 내부에서 context 를 유지하기 때문에 this 로 instance 에 접근 할 수 있습니다. \n   * \n   * @example\n   * \n   * ```js\n   * html`\n   *     <div clickElement=${this.subscribe(() => { \n   *        console.log('click is fired'); \n   *        console.log(this.source);\n   *     })}>\n   *        Click me\n   *     </div>\n   * `\n   * ```\n   * \n   * @returns {string} function id \n   */ \n  subscribe(callback: Function, debounceSecond = 0, throttleSecond = 0) {\n    const id = `subscribe.${uuidShort()}`;\n\n    const newCallback = this.createLocalCallback(id, callback);\n\n    this.$store.on(id, newCallback, this, debounceSecond, throttleSecond, false, /*self trigger*/true);    \n\n    return id; \n  }\n}\n","import { BaseStore } from \"./BaseStore\";\nimport { Dom } from \"./functions/Dom\";\nimport { IStartOptions, UIElementConstructor } from \"./types\";\nimport { UIElement } from \"./UIElement\";\n\n/**\n * UIElement 렌더링 하기 \n * \n * @param {IUIElement} ElementClass\n * @param {Object} opt \n * @param {string|HTMLElement} opt.container  렌더링 될 객체 \n * @returns {UIElement}\n */ \nexport const start = (ElementClass: UIElementConstructor, opt: IStartOptions = {}): UIElement => {\n\n  const $container = Dom.create(opt?.container || document.body);\n\n  const app = new ElementClass(opt, {\n    ...opt,\n    store: opt.store || new BaseStore()\n  });\n\n  app.render($container);\n\n  return app; \n};"],"names":["MAGIC_METHOD","makeEventChecker","value","split","CHECK_SAPARATOR","CHECK_DOM_EVENT_PATTERN","CHECK_LOAD_PATTERN","CHECK_BIND_PATTERN","CHECK_SUBSCRIBE_PATTERN","PIPE","join","NAME_SAPARATOR","DOM_EVENT_SAPARATOR","LOAD_SAPARATOR","BIND_SAPARATOR","SUBSCRIBE_SAPARATOR","SAPARATOR","refManager","DOM_EVENT_MAKE","key","SUBSCRIBE_EVENT_MAKE","CHECKER","AFTER","BEFORE","IF","KEY","ARROW_UP","ARROW_DOWN","ARROW_LEFT","ARROW_RIGHT","ENTER","SPACE","ESCAPE","ALT","SHIFT","META","CONTROL","MOUSE","TOUCH","PEN","SELF","LEFT_BUTTON","RIGHT_BUTTON","FIT","PASSIVE","DOMDIFF","DEBOUNCE","t","DELAY","D1000","THROTTLE","ALL_TRIGGER","SELF_TRIGGER","CAPTURE","PREVENT","STOP","SUBSCRIBE","SUBSCRIBE_ALL","SUBSCRIBE_SELF","CONFIG","config","CUSTOM","CLICK","DOUBLECLICK","MOUSEDOWN","MOUSEUP","MOUSEMOVE","MOUSEOVER","MOUSEOUT","MOUSEENTER","MOUSELEAVE","TOUCHSTART","TOUCHMOVE","TOUCHEND","KEYDOWN","KEYUP","KEYPRESS","DRAG","DRAGSTART","DROP","DRAGOVER","DRAGENTER","DRAGLEAVE","DRAGEXIT","DRAGOUT","DRAGEND","CONTEXTMENU","CHANGE","INPUT","FOCUS","FOCUSIN","FOCUSOUT","BLUR","PASTE","RESIZE","SCROLL","SUBMIT","POINTERSTART","POINTEROVER","POINTERENTER","POINTEROUT","POINTERMOVE","POINTEREND","CHANGEINPUT","WHEEL","ANIMATIONSTART","ANIMATIONEND","ANIMATIONITERATION","TRANSITIONSTART","TRANSITIONEND","TRANSITIONRUN","TRANSITIONCANCEL","DOUBLETAB","LOAD","getRef","id","BIND_CHECK_FUNCTION","field","prevState","this","state","BIND_CHECK_DEFAULT_FUNCTION","BIND","normalizeWheelEvent","e","dx","deltaX","dy","deltaY","shiftKey","deltaMode","WheelEvent","DOM_DELTA_LINE","DOM_DELTA_PAGE","limit","delta","maxDelta","Math","sign","min","abs","addDomEvent","dom","eventName","callback","options","addEventListener","removeDomEvent","removeEventListener","pos","touches","posXY","x","pageX","y","pageY","map","Map","registElement","classes","Object","keys","forEach","has","set","retriveElement","className","get","identity","debounce","delay","undefined","args","clearTimeout","setTimeout","throttle","keyEach","obj","index","isNotUndefined","isUndefined","isString","isFunction","short_tag_regexp","HTML_TAG","image","input","br","path","line","circle","rect","polygon","polyline","use","html","strings","results","it","console","log","Array","isArray","replace","match","p1","toLowerCase","splitMethodByKeyword","arr","keyword","filterKeys","filter","code","indexOf","filterMaps","trim","target","param","BaseStore","editor","cachedCallback","callbacks","source","_createClass","event","list","originalCallback","context","debounceDelay","throttleDelay","enableAllTrigger","enableSelfTrigger","beforeMethods","length","checkMethods","every","check","apply","ifCheck","getCallbacks","push","debug","sourceName","_this","off","message","arguments","setCallbacks","f","_this2","Promise","resolve","then","_this3","getCachedCallbacks","i","len","_this4","warn","sendMessage","nextSendMessage","triggerMessage","updateProp","node","name","newValue","oldValue","el","setAttribute","removeAttribute","setBooleanProp","setProp","removeBooleanProp","removeUndefinedProp","removeProp","hasPassed","node1","nodeType","Node","TEXT_NODE","getAttribute","getProps","attributes","updateElement","parentElement","oldEl","newEl","node2","textContent","nodeName","hasRefClass","replaceChild","cloneNode","COMMENT_NODE","toString","newProps","oldProps","keyList","props","Set","updateProps","oldChildren","children","newChildren","max","removeChild","appendChild","element","firstChild","nextSibling","DomDiff","A","B","childrenA","childrenB","Dom","tag","attr","_initContext","document","createElement","k","namespace","attrNS","htmlEl","svgEl","getAttributeNS","setAttributeNS","keyField","val","_this5","style","removeProperty","checkElement","tagName","cls","temp","checkCls","hasClass","parentNode","create","$parentNode","parent","classList","remove","contains","add","removeClass","addClass","isForce","toggle","innerHTML","empty","append","fragment","rootElement","selector","querySelector","find","from","querySelectorAll","findAll","createTextNode","prepend","$dom","createChildrenFragment","createDocumentFragment","$el","tempText","text","setProperty","getComputedStyle","entries","localKey","css","_this6","cssText","parseFloat","parseInt","getBoundingClientRect","getBBox","toUpperCase","isSVG","parentBox","box","top","left","width","height","offsetLeft","offsetTop","offsetWidth","offsetHeight","scrollTop","getScrollTop","scrollLeft","getScrollLeft","offset","cssFloat","inputEl","tempValue","matches","files","displayType","display","isHide","currentHide","show","hide","scrollIntoView","dt","body","scrollHeight","scrollWidth","opt1","attrs","$element","firstElementChild","nextElementSibling","newElement","oldElement","isChecked","checked","click","focus","range","createRange","selectNodeContents","sel","window","getSelection","removeAllRanges","addRange","select","blur","htmlString","pageYOffset","documentElement","pageXOffset","DOMParser","parseFromString","BaseHandler","scrollBlockingEvents","touchstart","touchmove","mousedown","mouseup","mousemove","eventConverts","doubletab","customEventNames","DomEventHandler","_domEvents","_bindings","doubleTab","destroy","filterProps","parseDomEvent","removeEventAll","getBindings","initBindings","Event","matchPath","eventObject","srcElement","delegate","makeDelegateCallback","makeDefaultCallback","returnValue","runEventCallback","delegateTarget","hasDelegate","$dt","xy","before","call","checkEventType","afterMethods","after","hasKeyCode","codes","isAllCheck","checkMethodList","fieldValue","refs","$root","getElement","checkMethodFilters","afters","befores","debounces","debounceMethods","delays","delayMethods","throttles","throttleMethods","captures","filteredList","getRealEventName","customEventName","getCustomEventName","makeCallback","addBinding","passive","capture","performance","now","time","getDefaultEventObject","getDefaultDomElement","makeCustomEventCallback","Boolean","prefix","shift","eventSelectorAndBehave","eventNames","getEventNames","bind","bindingDomEvent","applyElementAttribute","removeAttr","updateDiff","updateSVGDiff","isNumber","isObject","toggleClass","BindHandler","_bindMethods","bindData","bindList","_this$_bindMethods","originalCallbackName","callbackName","bindMethod","refObject","refCallback","elName","isBindCheck","elementKeyIndex","UUID_REG","uuid","Date","getTime","c","r","random","floor","uuidShort","TEMP_DIV","EventMachine","opt","__tempVariables","handlers","_loadMethods","__cachedMethodList","_$store","childComponents","initializeHandler","initializeProperty","initComponents","constructor","components","isLoad","assign","load","setState","initState","refresh","$container","parseTemplate","template","afterRender","ref","$$","refsIndex","refsLen","recoverVariable","nodeValue","$p","valueType","realValue","JSON","parse","refClassName","EventMachineComponent","getEventMachineComponent","parseProperty","refName","instance","_reload","render","renderTarget","appendTo","clean","hasParent","child","runHandlers","parseComponent","localLoadMethods","checker","isDomDiff","includes","newTemplate","htmlDiff","_afterLoad","func","h","_","Component","$parent","eachChildren","childComponent","root","checkFunction","p","names","getOwnPropertyNames","getPrototypeOf","collectProps","pattern","is","altKey","ctrlKey","metaKey","buttons","pointerType","preventDefault","stopPropagation","UIElement","__storeInstance","store","created","initialize","initializeStoreEvent","storeInstance","$store","separator","startIndex","substr","defaultValue","methods","params","newCallback","displayName","events","methodLine","splitMethod","debounceSecond","throttleSecond","allTriggerMethods","selfTriggerMethods","createLocalCallback","on","offAll","_get","destoryStoreSUBSCRIBE","messageName","sourceContext","emit","nextTick","trigger","start","ElementClass","container","app"],"mappings":"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"}