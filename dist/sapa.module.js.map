{"version":3,"file":"sapa.module.js","sources":["../src/Event.js","../src/functions/DomDiff.js","../src/functions/Dom.js","../src/functions/func.js","../src/handler/BaseHandler.js","../src/handler/DomEventHandler.js","../src/handler/BindHandler.js","../src/functions/registElement.js","../src/functions/uuid.js","../src/EventMachine.js","../src/BaseStore.js","../src/UIElement.js","../src/App.js"],"sourcesContent":["export const MAGIC_METHOD = \"@magic:\";\n\nexport const makeEventChecker = (value, split = CHECK_SAPARATOR) => {\n  return ` ${split} ${value}`;\n}\n\n// event name regular expression\nexport const CHECK_DOM_EVENT_PATTERN = /domevent (.*)/gi;\nexport const CHECK_LOAD_PATTERN = /load (.*)/gi;\nexport const CHECK_BIND_PATTERN = /bind (.*)/gi;\nexport const CHECK_SUBSCRIBE_PATTERN = /subscribe (.*)/gi;\n\nconst SPLITTER = \"|\";\n\nexport const PIPE = (...args) => {\n  return args.join(SPLITTER);\n};\n\nexport const NAME_SAPARATOR = \":\";\nexport const CHECK_SAPARATOR = \"|\";\nexport const DOM_EVENT_SAPARATOR = `${MAGIC_METHOD}domevent `;\nexport const LOAD_SAPARATOR = `${MAGIC_METHOD}load `;\nexport const BIND_SAPARATOR = `${MAGIC_METHOD}bind `;\nexport const SUBSCRIBE_SAPARATOR = `${MAGIC_METHOD}subscribe `;\n\nexport const SAPARATOR = ' ';\n\nconst refManager = {};\n\nconst DOM_EVENT_MAKE = (...keys) => {\n  var key = keys.join(NAME_SAPARATOR);\n  return (...args) => {\n    return DOM_EVENT_SAPARATOR + [key, ...args].join(SAPARATOR);\n  };\n};\n\nconst SUBSCRIBE_EVENT_MAKE = (...args) => {\n  return SUBSCRIBE_SAPARATOR + args.join(CHECK_SAPARATOR);\n}\n\n\n// Predefined CHECKER\nexport const CHECKER = (value, split = CHECK_SAPARATOR) => {\n  return makeEventChecker(value, split);\n};\n\nexport const AFTER = (value, split = CHECK_SAPARATOR) => {\n  return makeEventChecker(`after(${value})`, split);\n};\n\nexport const BEFORE = (value, split = CHECK_SAPARATOR) => {\n  return makeEventChecker(`before(${value})`, split);  \n};\n\nexport const IF = CHECKER;\nexport const KEY = CHECKER; \n\nexport const ARROW_UP = CHECKER('ArrowUp');\nexport const ARROW_DOWN = CHECKER('ArrowDown');\nexport const ARROW_LEFT = CHECKER('ArrowLeft');\nexport const ARROW_RIGHT = CHECKER('ArrowRight');\nexport const ENTER = CHECKER('Enter');\nexport const SPACE = CHECKER('Space');\nexport const ESCAPE = CHECKER('Escape');\n\nexport const ALT = CHECKER(\"isAltKey\");\nexport const SHIFT = CHECKER(\"isShiftKey\");\nexport const META = CHECKER(\"isMetaKey\");\nexport const CONTROL = CHECKER(\"isCtrlKey\");\nexport const MOUSE = CHECKER(\"hasMouse\");\nexport const TOUCH = CHECKER(\"hasTouch\");\nexport const PEN = CHECKER(\"hasPen\");\nexport const SELF = CHECKER(\"self\");\nexport const LEFT_BUTTON = CHECKER(\"isMouseLeftButton\")\nexport const RIGHT_BUTTON = CHECKER(\"isMouseRightButton\")\n\nexport const FIT = CHECKER(\"fit\");\nexport const PASSIVE = CHECKER(\"passive\");\nexport const DOMDIFF = CHECKER('domdiff');\n\n// event config method\nexport const DEBOUNCE = (t = 100) => {\n  return CHECKER(`debounce(${t})`);\n};\n\nexport const DELAY = (t = 300) => {\n  return CHECKER(`delay(${t})`);\n};\n\nexport const D1000 = DEBOUNCE(1000)\n\nexport const THROTTLE = (t = 100) => {\n  return CHECKER(`throttle(${t})`);\n};\nexport const ALL_TRIGGER = CHECKER(\"allTrigger()\");\nexport const SELF_TRIGGER = CHECKER(\"selfTrigger()\");\n\nexport const CAPTURE = CHECKER(\"capture()\");\n\n// event config method\n\n// before method\n\n// after method\nexport const PREVENT = AFTER(`preventDefault`);\nexport const STOP = AFTER(`stopPropagation`);\n\nexport const SUBSCRIBE = SUBSCRIBE_EVENT_MAKE;\nexport const SUBSCRIBE_ALL = (...args) => SUBSCRIBE_EVENT_MAKE(...args, ALL_TRIGGER);\nexport const SUBSCRIBE_SELF = (...args) => SUBSCRIBE_EVENT_MAKE(...args, SELF_TRIGGER);\nexport const CONFIG = (config, ...args) => SUBSCRIBE_EVENT_MAKE(`config:${config}`, ...args);\nexport const CUSTOM = DOM_EVENT_MAKE;\nexport const CLICK = DOM_EVENT_MAKE(\"click\");\nexport const DOUBLECLICK = DOM_EVENT_MAKE(\"dblclick\");\nexport const MOUSEDOWN = DOM_EVENT_MAKE(\"mousedown\");\nexport const MOUSEUP = DOM_EVENT_MAKE(\"mouseup\");\nexport const MOUSEMOVE = DOM_EVENT_MAKE(\"mousemove\");\nexport const MOUSEOVER = DOM_EVENT_MAKE(\"mouseover\");\nexport const MOUSEOUT = DOM_EVENT_MAKE(\"mouseout\");\nexport const MOUSEENTER = DOM_EVENT_MAKE(\"mouseenter\");\nexport const MOUSELEAVE = DOM_EVENT_MAKE(\"mouseleave\");\nexport const TOUCHSTART = DOM_EVENT_MAKE(\"touchstart\");\nexport const TOUCHMOVE = DOM_EVENT_MAKE(\"touchmove\");\nexport const TOUCHEND = DOM_EVENT_MAKE(\"touchend\");\nexport const KEYDOWN = DOM_EVENT_MAKE(\"keydown\");\nexport const KEYUP = DOM_EVENT_MAKE(\"keyup\");\nexport const KEYPRESS = DOM_EVENT_MAKE(\"keypress\");\nexport const DRAG = DOM_EVENT_MAKE(\"drag\");\nexport const DRAGSTART = DOM_EVENT_MAKE(\"dragstart\");\nexport const DROP = DOM_EVENT_MAKE(\"drop\");\nexport const DRAGOVER = DOM_EVENT_MAKE(\"dragover\");\nexport const DRAGENTER = DOM_EVENT_MAKE(\"dragenter\");\nexport const DRAGLEAVE = DOM_EVENT_MAKE(\"dragleave\");\nexport const DRAGEXIT = DOM_EVENT_MAKE(\"dragexit\");\nexport const DRAGOUT = DOM_EVENT_MAKE(\"dragout\");\nexport const DRAGEND = DOM_EVENT_MAKE(\"dragend\");\nexport const CONTEXTMENU = DOM_EVENT_MAKE(\"contextmenu\");\nexport const CHANGE = DOM_EVENT_MAKE(\"change\");\nexport const INPUT = DOM_EVENT_MAKE(\"input\");\nexport const FOCUS = DOM_EVENT_MAKE(\"focus\");\nexport const FOCUSIN = DOM_EVENT_MAKE(\"focusin\");\nexport const FOCUSOUT = DOM_EVENT_MAKE(\"focusout\");\nexport const BLUR = DOM_EVENT_MAKE(\"blur\");\nexport const PASTE = DOM_EVENT_MAKE(\"paste\");\nexport const RESIZE = DOM_EVENT_MAKE(\"resize\");\nexport const SCROLL = DOM_EVENT_MAKE(\"scroll\");\nexport const SUBMIT = DOM_EVENT_MAKE(\"submit\");\n\n// pointerstart 의 경우 drag 를 위한 시작점이기 때문에  left button 만 허용한다. \n// context 메뉴나 wheel 은 허용하지 않는다. \nexport const POINTERSTART = (...args) => {\n  return (CUSTOM(\"pointerdown\")(...args) + LEFT_BUTTON);\n}\n// \n\nexport const POINTEROVER = CUSTOM(\"pointerover\");\nexport const POINTERENTER = CUSTOM(\"pointerenter\");\nexport const POINTEROUT = CUSTOM(\"pointerout\");\nexport const POINTERMOVE = CUSTOM(\"pointermove\");\nexport const POINTEREND = CUSTOM(\"pointerup\");\nexport const CHANGEINPUT = CUSTOM(\"change\", \"input\");\nexport const WHEEL = CUSTOM(\"wheel\", \"mousewheel\", \"DOMMouseScroll\");\nexport const ANIMATIONSTART = DOM_EVENT_MAKE('animationstart');\nexport const ANIMATIONEND = DOM_EVENT_MAKE('animationend');\nexport const ANIMATIONITERATION = DOM_EVENT_MAKE('animationiteration');\nexport const TRANSITIONSTART = DOM_EVENT_MAKE('transitionstart');\nexport const TRANSITIONEND = DOM_EVENT_MAKE('transitionend');\nexport const TRANSITIONRUN = DOM_EVENT_MAKE('transitionrun');\nexport const TRANSITIONCANCEL = DOM_EVENT_MAKE('transitioncancel');\nexport const DOUBLETAB = CUSTOM('doubletab')\n\n\n// Predefined LOADER\nexport const LOAD = (value = \"$el\") => {\n  return LOAD_SAPARATOR + value;\n};\n\nexport const getRef = id => {\n  return refManager[id] || '';\n};\n\nexport const BIND_CHECK_FUNCTION = field => {\n  return function() {\n    return this.prevState[field] != this.state[field];\n  };\n};\n\nexport const BIND_CHECK_DEFAULT_FUNCTION = () => {\n  return true;\n};\n\nexport const BIND = (value = \"$el\") => {\n  return (\n    BIND_SAPARATOR + value\n  );\n};\n\nexport function normalizeWheelEvent (e) {\n  let dx = e.deltaX;\n  let dy = e.deltaY;\n\n\n  if (dx === 0 && e.shiftKey) {\n    [dy, dx] = [dx, dy];\n  }  \n\n  if (e.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n    dy *= 8;\n  } else if (e.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n    dy *= 24; \n  }\n\n\n  return [\n    limit(dx, 24), \n    limit(dy, 24), \n    0\n  ]\n}\n\nfunction limit (delta, maxDelta) {\n  return Math.sign(delta) * Math.min( maxDelta, Math.abs(delta))\n}\n\nexport default {\n  addDomEvent(dom, eventName, callback, useCapture = false) {\n    if (dom) {\n      dom.addEventListener(eventName, callback, useCapture);\n    }\n  },\n\n  removeDomEvent(dom, eventName, callback) {\n    if (dom) {\n      dom.removeEventListener(eventName, callback);\n    }\n  },\n\n  pos(e) {\n    if (e.touches && e.touches[0]) {\n      return e.touches[0];\n    }\n\n    return e;\n  },\n\n  posXY(e) {\n    var pos = this.pos(e);\n    return {\n      x: pos.pageX,\n      y: pos.pageY\n    };\n  }\n};\n","const setBooleanProp = (el, name, value) => {\n    if (value) {\n        el.setAttribute(name, name);\n        el[name] = value;\n    } else {\n        el.removeAttribute(name);\n        el[name] = value;\n    }\n  };\n  \nconst setProp = (el, name, value) => {\n    if (typeof value === 'boolean') {\n        setBooleanProp(el, name, value);\n    } else {\n        el.setAttribute(name, value);\n    }\n};\n\n\nconst removeBooleanProp = (node, name) => {\n    node.removeAttribute(name);\n    node[name] = false;\n};\n\nconst removeUndefinedProp = (node, name) => {\n    node.removeAttribute(name);\n}\n  \nconst removeProp = (node, name, value) => {\n    if (typeof value === 'boolean') {\n        removeBooleanProp(node, name);\n    } else if (name) {\n        removeUndefinedProp(node, name);\n    }\n};\n  \n\nconst updateProp = (node, name, newValue, oldValue) => {\n    if (!newValue) {\n      removeProp(node, name, oldValue);\n    } else if (!oldValue || newValue !== oldValue) {\n      setProp(node, name, newValue);\n    }\n  };\n\n\nconst updateProps = (node, newProps = {}, oldProps = {}) => {\n\n    const keyList = [];\n    keyList.push.apply(keyList, Object.keys(newProps))\n    keyList.push.apply(keyList, Object.keys(oldProps))\n\n    const props = [...new Set(keyList)]\n  \n    for(var i = 0, len = props.length; i < len; i++) {\n        const key = props[i];\n        updateProp(node, key, newProps[key], oldProps[key]);\n    }\n    // props.forEach((name) => {\n    //   updateProp(node, name, newProps[name], oldProps[name]);\n    // });\n};\n\n/**\n * TEXT_NODE 일 때   둘 다 공백일 때는  비교하지 않는다. \n * \n * @param {*} node1 \n * @param {*} node2 \n */\nfunction changed(node1, node2) {\n    return (\n        (node1.nodeType === Node.TEXT_NODE && node1.textContent !== node2.textContent) \n        || node1.nodeName !== node2.nodeName\n    ) \n}\n\nfunction hasPassed(node1) {\n    return (\n        (node1.nodeType !== Node.TEXT_NODE && node1.getAttribute('data-domdiff-pass') === 'true') \n    ) \n}\n\n/**\n * refClass 속성을 가지고 있으면 기존 el 을 대체한다. \n * \n */ \nfunction hasRefClass(node1) {\n    return (\n        (node1.nodeType !== Node.TEXT_NODE && (node1.getAttribute('refClass'))) \n    ) \n}\n\nfunction getProps (attributes) {\n    var results = {}\n    const len = attributes.length;\n    for(let i = 0; i < len; i++) {\n        const t = attributes[i];\n        results[t.name] = t.value;        \n    }\n\n    return results;\n    \n}\n\nfunction updateElement (parentElement, oldEl, newEl, i) {\n\n    if (!oldEl) {\n        // console.log('replace');        \n        parentElement.appendChild(newEl.cloneNode(true));\n    } else if (!newEl) {\n        // console.log('replace');        \n        parentElement.removeChild(oldEl);\n    } else if (hasPassed(oldEl) || hasPassed(newEl)) {\n        // NOOP\n        // data-domdiff-pass=\"true\" 일 때는 아무것도 비교하지 않고 끝낸다. \n        // console.log(oldEl, newEl, 'passed');\n    } else if (changed(newEl, oldEl) || hasRefClass(newEl)) {\n        // node 가 같지 않으면 바꾸고, refClass 속성이 있으면 바꾸고\n        parentElement.replaceChild(newEl.cloneNode(true), oldEl);\n    } else if (\n        newEl.nodeType !== Node.TEXT_NODE \n\n        && newEl.nodeType !== Node.COMMENT_NODE\n        && newEl.toString() !== \"[object HTMLUnknownElement]\"\n    ) {\n        // console.log(newEl);\n        updateProps(oldEl, getProps(newEl.attributes), getProps(oldEl.attributes)); // added        \n        var oldChildren = children(oldEl);\n        var newChildren = children(newEl);\n        var max = Math.max(oldChildren.length, newChildren.length);\n\n        for (var i = 0; i < max; i++) {\n            updateElement(oldEl, oldChildren[i], newChildren[i], i);\n        }\n    }\n\n}\n\nconst children = (el) => {\n    var element = el.firstChild; \n\n    if (!element) {\n        return [] \n    }\n\n    var results = [] \n\n    do {\n        results.push(element);\n        element = element.nextSibling;\n    } while (element);\n\n    return results; \n}\n\n\nexport function DomDiff (A, B) {\n\n    A = A.el || A; \n    B = B.el || B; \n\n    var childrenA = children(A);\n    var childrenB = children(B); \n\n    var len = Math.max(childrenA.length, childrenB.length);\n    for (var i = 0; i < len; i++) {\n        updateElement(A, childrenA[i], childrenB[i], i);\n    }\n}\n","import { DomDiff } from \"./DomDiff\";\n\n/**\n * Dom 유틸리티 \n * \n */ \nexport default class Dom {\n  constructor(tag, className, attr) {\n    if (typeof tag !== 'string') {\n      this.el = tag;\n    } else {\n      var el = document.createElement(tag);\n\n      if (className) {\n        el.className = className;\n      }\n \n      attr = attr || {};\n\n      for (var k in attr) {\n        el.setAttribute(k, attr[k]);\n      }\n\n      this.el = el;\n    }\n  }\n\n  static create (tag, className, attr) {\n    return new Dom(tag, className, attr);\n  }\n \n  static createByHTML (htmlString) {\n    var div = Dom.create('div')\n    var list = div.html(htmlString).children();\n\n    if (list.length) {\n      return Dom.create(list[0].el);\n    }\n\n    return null; \n  }\n\n  static getScrollTop() {\n    return Math.max(\n      window.pageYOffset,\n      document.documentElement.scrollTop,\n      document.body.scrollTop\n    );\n  }\n\n  static getScrollLeft() {\n    return Math.max(\n      window.pageXOffset,\n      document.documentElement.scrollLeft,\n      document.body.scrollLeft\n    );\n  }\n\n  static parse(html) {\n    var parser = DOMParser();\n    return parser.parseFromString(html, \"text/htmll\");\n  }\n\n  static body () {\n    return Dom.create(document.body)\n  }\n\n  setAttr (obj) {\n    Object.keys(obj).forEach(key => {\n      this.attr(key, obj[key])\n    })\n    return this;  \n  }\n\n  setAttrNS (obj, namespace = 'http://www.w3.org/2000/svg') {\n    Object.keys(obj).forEach(key => {\n      this.attr(key, obj[key], namespace)\n    })\n    return this;  \n  }  \n\n  setProp (obj) {\n    Object.keys(obj).forEach(key => {\n      // 동일한 값을 갱신하지 않는다. \n      if (this.el[key] != obj[key]) {\n        this.el[key] = obj[key];\n      }\n    })\n    return this;  \n  }\n\n  /**\n   * data-xxx 속성을 관리한다. \n   * \n   * @param {string} key \n   * @param {any} value \n   */\n  data (key, value) {\n    if (arguments.length === 1) {\n      return this.attr('data-' + key);\n    } else if (arguments.length === 2) {\n      return this.attr('data-' + key, value);\n    }\n\n    //TODO:  data 속성을 모두 {[key]: value} 형태로 리턴하기 \n\n    return this; \n  }\n\n  /**\n   * Dom attribute 얻기 또는 설정 \n   * \n   * get ->  Dom.create(targetElement).attr('key');\n   * set -> Dom.create(targetElement).attr('key', value);\n   * \n   * @param {string} key \n   * @param {[string]} value \n   */\n  attr(key, value) {\n    if (arguments.length == 1) {\n      return this.el.getAttribute(key);\n    }\n\n    // 동일한 속성 값이 있다면 변경하지 않는다. \n    if (this.el.getAttribute(key) != value) {\n      this.el.setAttribute(key, value);\n    }\n\n    return this;\n  }\n\n  attrNS(key, value, namespace = 'http://www.w3.org/2000/svg') {\n    if (arguments.length == 1) {\n      return this.el.getAttributeNS(namespace, key);\n    }\n\n    // 동일한 속성 값이 있다면 변경하지 않는다. \n    if (this.el.getAttributeNS(namespace, key) != value) {\n      this.el.setAttributeNS(namespace, key, value);\n    }\n\n    return this;\n  }  \n\n  attrKeyValue(keyField) {\n    return {\n      [this.el.getAttribute(keyField)]: this.val()\n    }\n  }\n\n  attrs(...args) {\n    return args.map(key => {\n      return this.el.getAttribute(key);\n    });\n  }\n\n  styles(...args) {\n    return args.map(key => {\n      return this.el.style[key];\n    });\n  }  \n\n  removeAttr(key) {\n    this.el.removeAttribute(key);\n\n    return this;\n  }\n\n  removeStyle(key) {\n    this.el.style.removeProperty(key);\n    return this;\n  }\n\n  is(checkElement) {\n    return this.el === (checkElement.el || checkElement);\n  }\n\n  isTag(tag) {\n    return this.el.tagName.toLowerCase() === tag.toLowerCase()\n  }\n\n  closest(cls) {\n    var temp = this;\n    var checkCls = false;\n\n    while (!(checkCls = temp.hasClass(cls))) {\n      if (temp.el.parentNode) {\n        temp = Dom.create(temp.el.parentNode);\n      } else {\n        return null;\n      }\n    }\n\n    if (checkCls) {\n      return temp;\n    }\n\n    return null;\n  }\n\n  path() {\n\n    if (!this.el) return [];\n\n    const $parentNode = this.parent(); \n\n    if ($parentNode) {\n      return [...$parentNode.path(), this]\n    } else {\n      return [this]\n    }\n\n\n  }\n\n  parent() {\n    return Dom.create(this.el.parentNode);\n  }\n\n  hasParent () {\n    return !!this.el.parentNode\n  }\n\n  removeClass(...args) {\n    this.el.classList.remove(...args);\n    return this;\n  }\n\n  hasClass(cls) {\n    if (!this.el.classList) return false;\n    return this.el.classList.contains(cls);\n  }\n\n  addClass(...args) {\n    this.el.classList.add(...args);\n\n    return this;\n  }\n\n  onlyOneClass(cls) {\n    var parent = this.parent();\n\n    parent.children().forEach(it => {\n      it.removeClass(cls);\n    })\n\n    this.addClass(cls);\n  }\n\n  toggleClass(cls, isForce) {\n    this.el.classList.toggle(cls, isForce);\n    return this; \n  }\n\n  html(html) {\n    if (typeof html === 'undefined') {\n      return this.el.innerHTML;\n    }\n\n    if (typeof html === 'string') {\n      this.el.innerHTML = html;\n    } else {\n      this.empty().append(html);\n    }\n\n    return this;\n  }\n\n  htmlDiff(fragment) {\n    DomDiff(this, fragment);\n  }\n  updateDiff (html, rootElement = 'div') {\n    DomDiff(this, Dom.create(rootElement).html(html))\n  }\n\n  updateSVGDiff (html, rootElement = 'div') {\n    DomDiff(this, Dom.create(rootElement).html(`<svg>${html}</svg>`).firstChild.firstChild)\n  }  \n\n  find(selector) {\n    return this.el.querySelector(selector);\n  }\n\n  $(selector) {\n    var node = this.find(selector);\n    return node ? Dom.create(node) : null;\n  }\n\n  findAll(selector) {\n    return Array.from(this.el.querySelectorAll(selector));\n  }\n\n  $$(selector) {\n    var arr = this.findAll(selector);\n    return arr.map(node => Dom.create(node));\n  }\n\n  empty() {\n    while (this.el.firstChild) this.el.removeChild(this.el.firstChild);\n    return this;\n  }\n\n  append(el) {\n    if (typeof el === 'string') {\n      this.el.appendChild(document.createTextNode(el));\n    } else {\n      this.el.appendChild(el.el || el);\n    }\n\n    return this;\n  }\n\n  prepend(el) {\n    if (typeof el === 'string') {\n      this.el.prepend(document.createTextNode(el));\n    } else {\n      this.el.prepend(el.el || el);\n    }\n\n    return this;    \n  }\n\n  prependHTML(html) {\n    var $dom = Dom.create(\"div\").html(html);\n\n    this.prepend($dom.createChildrenFragment());\n\n    return $dom;\n  }\n\n  appendHTML(html) {\n    var $dom = Dom.create(\"div\").html(html);\n\n    this.append($dom.createChildrenFragment());\n\n    return $dom;\n  }\n\n  /**\n   * create document fragment with children dom\n   */\n  createChildrenFragment() {\n    const list = this.children();\n\n    var fragment = document.createDocumentFragment();\n    list.forEach($el => fragment.appendChild($el.el));\n\n    return fragment;\n  }\n\n  appendTo(target) {\n    var t = target.el ? target.el : target;\n\n    t.appendChild(this.el);\n\n    return this;\n  }\n\n  remove() {\n    if (this.el.parentNode) {\n      this.el.parentNode.removeChild(this.el);\n    }\n\n    return this;\n  }\n\n  removeChild(el) {\n    this.el.removeChild(el.el || el);\n    return this; \n  }\n\n  /**\n   * \n   * @param {string} value \n   * @returns {string} 파라미터가 없을 때  textContent 를 리턴한다. \n   */\n  text(value) {\n    if (typeof value === 'undefined') {\n      return this.el.textContent;\n    } else {\n      var tempText = value;\n\n      if (value instanceof Dom) {\n        tempText = value.text();\n      }\n\n      // 값의 변경 사항이 없으면 업데이트 하지 않는다. \n      if (this.el.textContent !== tempText) {\n        this.el.textContent = tempText;\n      }\n\n      return this;\n    }\n  }\n\n  /**\n   *\n   * $el.css`\n   *  border-color: yellow;\n   * `\n   *\n   * @param {*} key\n   * @param {*} value\n   */\n\n  css(key, value) {\n    if (typeof key !== 'undefined' && typeof value !== 'undefined') {\n      if (key.indexOf('--') === 0 &&  typeof value !== 'undefined' ) {\n        this.el.style.setProperty(key, value);\n      } else {\n        this.el.style[key] = value;\n      }\n    } else if (typeof key !== 'undefined') {\n      if (typeof key === 'string') {\n        return getComputedStyle(this.el)[key];  \n      } else {\n        Object.entries(key).forEach(([localKey, value]) => {\n          if (localKey.indexOf('--') === 0 && typeof value !== 'undefined' ) {\n            this.el.style.setProperty(localKey, value);\n          } else {\n            this.el.style[localKey] = value;\n          }          \n        })\n      }\n    }\n\n    return this;\n  }\n\n  getComputedStyle (...list) {\n    var css = getComputedStyle(this.el);\n\n    var obj = {}\n    list.forEach(it => {\n      obj[it] = css[it]\n    })\n\n    return obj; \n  }\n\n  getStyleList(...list) {\n    var style = {};\n\n    var len = this.el.style.length;\n    for (var i = 0; i < len; i++) {\n      var key = this.el.style[i];\n\n      style[key] = this.el.style[key];\n    }\n\n    list.forEach(key => {\n      style[key] = this.css(key);\n    });\n\n    return style;\n  }\n\n  cssText(value) {\n    if (typeof value === 'undefined') {\n      return this.el.style.cssText;\n    }\n\n    if (value != this.el.tempCssText) {\n      this.el.style.cssText = value;\n      this.el.tempCssText = value; \n    } \n\n    return this;\n  }\n\n  cssArray(arr) {\n    if (arr[0]) this.el.style[arr[0]] = arr[1];\n    if (arr[2]) this.el.style[arr[2]] = arr[3];\n    if (arr[4]) this.el.style[arr[4]] = arr[5];\n    if (arr[6]) this.el.style[arr[6]] = arr[7];\n    if (arr[8]) this.el.style[arr[8]] = arr[9];\n\n    return this;\n  }\n\n  cssFloat(key) {\n    return parseFloat(this.css(key));\n  }\n\n  cssInt(key) {\n    return parseInt(this.css(key));\n  }\n\n  px(key, value) {\n    return this.css(key, `${value}px`);\n  }\n\n  rect() {\n    return this.el.getBoundingClientRect();\n  }\n\n  bbox () {\n    return this.el.getBBox();\n  }\n\n  isSVG () {\n    return this.el.tagName.toUpperCase() === 'SVG';\n  }\n\n  offsetRect() {\n\n    if (this.isSVG()) {\n      const parentBox = this.parent().rect();\n      const box = this.rect();\n\n      return {\n        x: box.x - parentBox.x,\n        y: box.y - parentBox.y,\n        top: box.x - parentBox.x,\n        left: box.y - parentBox.y,\n        width: box.width,\n        height: box.height\n      }\n    }\n\n    return {\n      x: this.el.offsetLeft,\n      y: this.el.offsetTop,\n      top: this.el.offsetTop,\n      left: this.el.offsetLeft,\n      width: this.el.offsetWidth,\n      height: this.el.offsetHeight\n    };\n  }\n\n  offset() {\n    var rect = this.rect();\n\n    var scrollTop = Dom.getScrollTop();\n    var scrollLeft = Dom.getScrollLeft();\n\n    return {\n      top: rect.top + scrollTop,\n      left: rect.left + scrollLeft\n    };\n  }\n\n  offsetLeft() {\n    return this.offset().left;\n  }\n\n  offsetTop() {\n    return this.offset().top;\n  }\n\n  position() {\n    if (this.el.style.top) {\n      return {\n        top: parseFloat(this.css(\"top\")),\n        left: parseFloat(this.css(\"left\"))\n      };\n    } else {\n      return this.rect();\n    }\n  }\n\n  size() {\n    return [this.width(), this.height()];\n  }\n\n  width() {\n    return this.el.offsetWidth || this.rect().width;\n  }\n\n  contentWidth() {\n    return (\n      this.width() -\n      this.cssFloat(\"padding-left\") -\n      this.cssFloat(\"padding-right\")\n    );\n  }\n\n  height() {\n    return this.el.offsetHeight || this.rect().height;\n  }\n\n  contentHeight() {\n    return (\n      this.height() -\n      this.cssFloat(\"padding-top\") -\n      this.cssFloat(\"padding-bottom\")\n    );\n  }\n\n  val(value) {\n    if (typeof value === 'undefined') {\n      return this.el.value;\n    } else if (typeof value !== 'undefined') {\n      var tempValue = value;\n\n      if (value instanceof Dom) {\n        tempValue = value.val();\n      }\n\n      this.el.value = tempValue;\n    }\n\n    return this;\n  }\n\n  matches (selector) {\n    if (this.el) {\n\n      if (!this.el.matches) return null;\n\n      if (this.el.matches(selector)) {\n        return this;\n      }\n      return this.parent().matches(selector);\n    }\n\n    return null;\n}  \n\n\n  get value() {\n    return this.el.value;\n  }\n\n  get naturalWidth () {\n    return this.el.naturalWidth\n  }\n\n  get naturalHeight () {\n    return this.el.naturalHeight\n  }  \n\n  get files() {\n    return this.el.files ? [...this.el.files] : [];\n  }\n\n  realVal() {\n    switch (this.el.nodeType) {\n      case \"INPUT\":\n        var type = this.attr(\"type\");\n        if (type == \"checkbox\" || type == \"radio\") {\n          return this.checked();\n        }\n      case \"SELECT\":\n      case \"TEXTAREA\":\n        return this.el.value;\n    }\n\n    return \"\";\n  }\n\n  int() {\n    return parseInt(this.val(), 10);\n  }\n\n  float() {\n    return parseFloat(this.val());\n  }\n\n  show(displayType = \"block\") {\n    this.el.style.display = displayType != \"none\" ? displayType : \"block\"\n\n    return this; \n  }\n\n  hide() {\n    this.el.style.display = 'none';\n\n    return this; \n  }\n\n  isHide () {\n    return this.el.style.display  === \"none\"\n  }\n\n  isShow () {\n    return !this.isHide();\n  }\n\n  toggle(isForce) {\n    var currentHide = this.isHide();\n\n    if (arguments.length == 1) {\n      if (isForce) {\n        return this.show();\n      } else {\n        return this.hide();\n      }\n    } else {\n      if (currentHide) {\n        return this.show();\n      } else {\n        return this.hide();\n      }\n    }\n  }\n\n  get totalLength () {\n    return this.el.getTotalLength()\n  }\n\n  scrollIntoView () {\n    this.el.scrollIntoView()\n  }\n\n  addScrollLeft (dt) {\n    this.el.scrollLeft += dt; \n    return this; \n  }\n\n  addScrollTop (dt) {\n    this.el.scrollTop += dt; \n    return this; \n  }  \n\n  setScrollTop(scrollTop) {\n    this.el.scrollTop = scrollTop;\n    return this;\n  }\n\n  setScrollLeft(scrollLeft) {\n    this.el.scrollLeft = scrollLeft;\n    return this;\n  }\n\n  scrollTop() {\n    if (this.el === document.body) {\n      return Dom.getScrollTop();\n    }\n\n    return this.el.scrollTop;\n  }\n\n  scrollLeft() {\n    if (this.el === document.body) {\n      return Dom.getScrollLeft();\n    }\n\n    return this.el.scrollLeft;\n  }\n\n  scrollHeight() {\n    return this.el.scrollHeight;\n  }\n\n  scrollWidth() {\n    return this.el.scrollWidth;\n  }  \n\n  on(eventName, callback, opt1, opt2) {\n    this.el.addEventListener(eventName, callback, opt1, opt2);\n\n    return this;\n  }\n\n  off(eventName, callback) {\n    this.el.removeEventListener(eventName, callback);\n\n    return this;\n  }\n\n  getElement() {\n    return this.el;\n  }\n\n  createChild(tag, className = '', attrs = {}, css = {}) {\n    let $element = Dom.create(tag, className, attrs);\n    $element.css(css);\n\n    this.append($element);\n\n    return $element;\n  }\n\n  get firstChild() {\n    return Dom.create(this.el.firstElementChild);\n  }\n\n  children() {\n    var element = this.el.firstElementChild;\n\n    if (!element) {\n      return [];\n    }\n\n    var results = [];\n\n    do {\n      results.push(Dom.create(element));\n      element = element.nextElementSibling;\n    } while (element);\n\n    return results;\n  }\n\n  childLength() {\n    return this.el.children.length;\n  }\n\n  replace(newElement) {\n\n    if (this.el.parentNode) {\n      this.el.parentNode.replaceChild(newElement.el || newElement, this.el);\n    }\n\n    return this;\n  }\n\n  replaceChild(oldElement, newElement) {\n    this.el.replaceChild(newElement.el || newElement, oldElement.el || oldElement);\n\n    return this;\n  }  \n\n  checked(isChecked = false) {\n    if (arguments.length == 0) {\n      return !!this.el.checked;\n    }\n\n    this.el.checked = !!isChecked;\n\n    return this;\n  }\n\n\n  click () {\n    this.el.click();\n\n    return this; \n  }  \n\n  focus() {\n    this.el.focus();\n\n    return this;\n  }\n\n  select() {\n    // contenteditable 의 경우 selection api 를 사용해서 select() 를 수행한다.\n    if (this.attr('contenteditable') === 'true') {\n      var range = document.createRange();\n      range.selectNodeContents(this.el);\n      var sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(range);\n    } else {\n      this.el.select();\n    }\n\n    return this;\n  }\n\n  blur() {\n    this.el.blur();\n\n    return this;\n  }\n\n  // canvas functions\n\n  context(contextType = \"2d\") {\n    if (!this._initContext) {\n      this._initContext = this.el.getContext(contextType);\n    }\n\n    return this._initContext;\n  }\n\n  resize({ width, height }) {\n    // support hi-dpi for retina display\n    this._initContext = null;\n    var ctx = this.context();\n    var scale = window.devicePixelRatio || 1;\n\n    this.px(\"width\", +width);\n    this.px(\"height\", +height);\n\n    this.el.width = width * scale;\n    this.el.height = height * scale;\n\n    ctx.scale(scale, scale);\n  }\n\n  toDataURL (type = 'image/png', quality = 1) {\n    return this.el.toDataURL(type, quality)\n  }\n\n  clear() {\n    this.context().clearRect(0, 0, this.el.width, this.el.height);\n  }\n\n  update(callback) {\n    this.clear();\n    callback.call(this, this);\n  }\n\n  drawImage (img, dx = 0, dy = 0) {\n    var ctx = this.context()\n    var scale = window.devicePixelRatio || 1;    \n    ctx.drawImage(img, dx, dy, img.width, img.height, 0, 0, this.el.width / scale, this.el.height / scale);\n  }\n\n  drawOption(option = {}) {\n    var ctx = this.context();\n    Object.assign(ctx, option);\n  }\n\n  drawLine(x1, y1, x2, y2) {\n    var ctx = this.context();\n\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n    ctx.closePath();\n  }\n\n  drawPath(...path) {\n    var ctx = this.context();\n\n    ctx.beginPath();\n\n    path.forEach((p, index) => {\n      if (index == 0) {\n        ctx.moveTo(p[0], p[1]);\n      } else {\n        ctx.lineTo(p[0], p[1]);\n      }\n    });\n    ctx.stroke();\n    ctx.fill();\n    ctx.closePath();\n  }\n\n  drawCircle(cx, cy, r) {\n    var ctx = this.context();\n    ctx.beginPath();\n    ctx.arc(cx, cy, r, 0, 2 * Math.PI);\n    ctx.stroke();\n    ctx.fill();\n  }\n\n  drawText(x, y, text) {\n    this.context().fillText(text, x, y);\n  }\n}\n","\nconst identity = () => true; \n\n/**\n * property 수집하기\n * 상위 클래스의 모든 property 를 수집해서 리턴한다.\n * \n * @param {Object} root  상속관계에 있는 인스턴스 \n * @param {Object} expectMethod 제외될 필드 리스트 { [field]: true }\n * @returns {string[]} 나의 상위 모든 메소드를 수집해서 리턴한다. \n */\nexport function collectProps(root, checkFunction = identity) {\n\n    let p = root;\n    let results = [];\n    do {\n        const isObject = p instanceof Object;\n\n        if (isObject === false) {\n            break;\n        }\n\n        const names = Object.getOwnPropertyNames(p).filter(name => {\n            return root && isFunction(root[name]) && checkFunction(name);\n        });\n\n        results.push.apply(results, names);\n    } while (p = Object.getPrototypeOf(p));\n\n\n    return results;\n}\n\nexport function debounce(callback, delay = 0) {\n\n    if (delay === 0) {\n        return callback;\n    }\n\n    var t = undefined;\n\n    return function ($1, $2, $3, $4, $5) {\n        if (t) {\n            clearTimeout(t);\n        }\n\n        t = setTimeout(function () {\n            callback($1, $2, $3, $4, $5);\n        }, delay || 300);\n    }\n}\n\n\nexport function throttle(callback, delay) {\n\n    var t = undefined;\n\n    return function ($1, $2, $3, $4, $5) {\n        if (!t) {\n            t = setTimeout(function () {\n                callback($1, $2, $3, $4, $5);\n                t = null;\n            }, delay || 300);\n        }\n\n    }\n}\n\nexport function ifCheck(callback, context, checkMethods) {\n    return (...args) => {\n        const ifResult = checkMethods.every(check => {\n            return context[check.target].apply(context, args);\n        });\n\n        if (ifResult) {\n            callback.apply(context, args);\n        }\n    }\n}\n\nexport function keyEach(obj, callback) {\n    Object.keys(obj).forEach((key, index) => {\n        callback(key, obj[key], index);\n    })\n}\n\nexport function get(obj, key, callback) {\n\n    var returnValue = defaultValue(obj[key], key);\n\n    if (isFunction(callback)) {\n        return callback(returnValue);\n    }\n\n    return returnValue;\n}\n\nexport function defaultValue(value, defaultValue) {\n    return typeof value == 'undefined' ? defaultValue : value;\n}\n\nexport function isUndefined(value) {\n    return typeof value == 'undefined' || value === null;\n}\n\nexport function isNotUndefined(value) {\n    return isUndefined(value) === false;\n}\n\nexport function isBoolean(value) {\n    return typeof value == 'boolean'\n}\n\nexport function isString(value) {\n    return typeof value == 'string'\n}\n\nexport function isNotString(value) {\n    return isString(value) === false;\n}\n\nexport function isObject(value) {\n    return typeof value == 'object' && !Array.isArray(value) && !isNumber(value) && !isString(value) && value !== null;\n}\n\nexport function isFunction(value) {\n    return typeof value == 'function'\n}\n\nexport function isNumber(value) {\n    return typeof value == 'number';\n}\n\nexport function isZero(num) {\n    return num === 0;\n}\n\nexport function isNotZero(num) {\n    return !isZero(num);\n}\n\nexport function clone(obj) {\n    if (isUndefined(obj)) return undefined;\n    return JSON.parse(JSON.stringify(obj));\n}\n\n\nexport function combineKeyArray(obj) {\n    Object.keys(obj).forEach(key => {\n        if (Array.isArray(obj[key])) {\n            obj[key] = obj[key].join(', ')\n        }\n    })\n\n    return obj;\n}\n\n\n\nconst short_tag_regexp = /\\<(\\w*)([^\\>]*)\\/\\>/gim;\n\nconst HTML_TAG = {\n    'image': true,\n    'input': true,\n    'br': true,\n    'path': true,\n    'line': true,\n    'circle': true,\n    'rect': true,\n    'path': true,\n    'polygon': true,\n    'polyline': true,\n    'use': true\n}\n\n\nexport const html = (strings, ...args) => {\n\n    var results = strings.map((it, index) => {\n\n        var results = args[index] || ''\n\n        if (isFunction(results)) {\n            console.log(results);\n            // results = results()\n        }\n\n        if (!Array.isArray(results)) {\n            results = [results]\n        }\n\n        results = results.join('')\n\n        return it + results;\n    }).join('');\n\n    results = results.replace(short_tag_regexp, function (match, p1) {\n        if (HTML_TAG[p1.toLowerCase()]) {\n            return match;\n        } else {\n            return match.replace('/>', `></${p1}>`)\n        }\n    })\n\n    return results;\n}\n\n\n/**\n * 전체 문자열에서 특정 키워드 함수를 사용하는 패턴을 찾아 리턴해준다. \n * \n * @param {string[]} arr \n * @param {string} keyword \n */\nexport const splitMethodByKeyword = (arr, keyword) => {\n    const filterKeys = arr.filter(code => code.indexOf(`${keyword}(`) > -1);\n    const filterMaps = filterKeys.map(code => {\n        const [target, param] = code\n            .split(`${keyword}(`)[1]\n            .split(\")\")[0]\n            .trim()\n            .split(\" \");\n\n        return { target, param };\n    });\n\n    return [filterKeys, filterMaps];\n};","export default class BaseHandler {\n    /**\n     * \n     * @param {EventMachine} context \n     * @param {*} options \n     */\n    constructor (context, options = {}) {\n        this.context = context;\n        this.options = options;\n    }\n\n    // 초기화 설정 \n    initialize () {\n\n    }\n\n    // html 을 로드 할 때 \n    load () {\n\n    }\n\n    // 새로고침 할 때 \n    refresh () {\n\n    }\n    \n    // 화면에 그린 이후에 실행 되는 로직들 \n    render () {\n\n    }\n\n    getRef(id) {\n        return this.context.getRef(id);\n    }\n\n    run () {\n\n    }\n\n    destroy() {\n\n    }\n}","import BaseHandler from \"./BaseHandler\";\nimport Event, { CHECK_SAPARATOR, DOM_EVENT_SAPARATOR, SAPARATOR, NAME_SAPARATOR, CHECK_DOM_EVENT_PATTERN } from \"../Event\";\nimport { debounce, throttle, isNotUndefined, isFunction, splitMethodByKeyword } from \"../functions/func\";\nimport Dom from \"../functions/Dom\";\n\n\nconst scrollBlockingEvents = {\n    'touchstart': true,\n    'touchmove': true,\n    'mousedown': true,\n    'mouseup': true,\n    'mousemove': true,\n    // wheel, mousewheel 은 prevent 를 해야한다. 그래서 scroll blocking 을 막아야 한다. \n    // 'wheel': true,   \n    // 'mousewheel': true\n}\n\nconst eventConverts = {\n  'doubletab': 'touchend'\n}\n\nconst customEventNames = {\n  'doubletab': true \n}\n\nexport default class DomEventHandler extends BaseHandler {\n\n\n    initialize() {\n        this.destroy();\n\n        if (!this._domEvents) {\n          this._domEvents = this.context.filterProps(CHECK_DOM_EVENT_PATTERN)\n        }\n\n        this._domEvents.forEach(key => this.parseDomEvent(key));\n    }\n\n    destroy() {\n        this.removeEventAll();\n    }\n\n\n    removeEventAll() {\n        this.getBindings().forEach(obj => {\n          this.removeDomEvent(obj);\n        });\n        this.initBindings();\n    }\n\n    removeDomEvent({ eventName, dom, callback }) {\n        Event.removeDomEvent(dom, eventName, callback);\n    }    \n\n    getBindings() {\n        if (!this._bindings) {\n          this.initBindings();\n        }\n    \n        return this._bindings;\n    }\n\n    addBinding(obj) {\n        this.getBindings().push(obj);\n    }\n\n    initBindings() {\n        this._bindings = [];\n    }    \n\n\n    matchPath (el, selector) {\n        if (el) {\n          if (el.matches(selector)) {\n            return el;\n          }\n          return this.matchPath(el.parentElement, selector);\n        }\n        return null;\n    }\n      \n    hasDelegate (e, eventObject) {\n        return this.matchPath(e.target || e.srcElement, eventObject.delegate);\n    }\n      \n    makeCallback (eventObject, callback) {\n      if (eventObject.delegate) {\n        return this.makeDelegateCallback(eventObject, callback);\n      } else {\n        return this.makeDefaultCallback(eventObject, callback);\n      }\n    }\n      \n    makeDefaultCallback (eventObject, callback) {\n        return e => {\n          var returnValue = this.runEventCallback(e, eventObject, callback);\n          if (isNotUndefined(returnValue)) {\n            return returnValue;\n          }\n        };\n    }\n      \n    makeDelegateCallback (eventObject, callback) {\n        return e => {\n          const delegateTarget = this.hasDelegate(e, eventObject);\n      \n          if (delegateTarget) {\n            // delegate target 이 있는 경우만 callback 실행\n            e.$dt = Dom.create(delegateTarget);      \n      \n            var returnValue = this.runEventCallback(e, eventObject, callback);\n            if (isNotUndefined(returnValue)) {\n              return returnValue;\n            }\n          }\n        };\n    }\n      \n    runEventCallback (e, eventObject, callback) {\n        const context = this.context;\n        e.xy = Event.posXY(e);\n      \n        if (eventObject.beforeMethods.length) {\n          eventObject.beforeMethods.every(before => {\n            return context[before.target].call(context, e, before.param);\n          });\n        }\n      \n        if (this.checkEventType(e, eventObject)) {\n          var returnValue = callback(e, e.$dt, e.xy); \n      \n          if (returnValue !== false && eventObject.afterMethods.length) {\n            eventObject.afterMethods.forEach(after => {\n              return context[after.target].call(context, e, after.param)\n            });\n          }\n      \n          return returnValue;\n        }\n    }\n      \n    checkEventType (e, eventObject) {\n        const context = this.context;\n        // 특정 keycode 를 가지고 있는지 체크\n        var hasKeyCode = true;\n        if (eventObject.codes.length) {\n          hasKeyCode =\n            (e.code ? eventObject.codes.indexOf(e.code.toLowerCase()) > -1 : false) ||\n            (e.key ? eventObject.codes.indexOf(e.key.toLowerCase()) > -1 : false);\n        }\n      \n        // 체크 메소드들은 모든 메소드를 다 적용해야한다.\n        var isAllCheck = true;\n        if (eventObject.checkMethodList.length) {\n          isAllCheck = eventObject.checkMethodList.every(field => {\n            var fieldValue = context[field];    \n            if (isFunction(fieldValue) && fieldValue) {\n              // check method\n              return fieldValue.call(context, e);\n            } else if (isNotUndefined(fieldValue)) {\n      \n              // check field value\n              return !!fieldValue;\n            }\n            return true;\n          });\n        }\n      \n        return hasKeyCode && isAllCheck;\n    }\n      \n    getDefaultDomElement(dom) {\n        const context = this.context;\n        let el;\n      \n        if (dom) {\n          el = context.refs[dom] || context[dom] || window[dom];\n        } else {\n          el = context.el || context.$el || context.$root;\n        }\n      \n        if (el instanceof Dom) {\n          return el.getElement();\n        }\n      \n        return el;\n    };\n      \n    getRealEventName (eventName) {\n      return eventConverts[eventName] || eventName;\n    }\n\n    getCustomEventName (eventName) {\n      return customEventNames[eventName] ? eventName:  '';\n    }\n\n    /**\n     * \n     * doubletab -> touchend 로 바뀜 \n     * \n     * @param {string} eventName  이벤트 이름 \n     * @param {array} checkMethodFilters 매직 필터 목록  \n     */\n    getDefaultEventObject (eventName, checkMethodFilters) {\n        const context = this.context;\n        let arr = checkMethodFilters;\n      \n        // context 에 속한 변수나 메소드 리스트 체크\n        const checkMethodList = arr.filter(code => !!context[code]);\n      \n        // 이벤트 정의 시점에 적용 되어야 하는 것들은 모두 method() 화 해서 정의한다.\n        const [afters, afterMethods] = splitMethodByKeyword(arr, \"after\");\n        const [befores, beforeMethods] = splitMethodByKeyword(arr, \"before\");\n        const [debounces, debounceMethods] = splitMethodByKeyword(arr, \"debounce\");\n        const [delays, delayMethods] = splitMethodByKeyword(arr, \"delay\");        \n        const [throttles, throttleMethods] = splitMethodByKeyword(arr, \"throttle\");\n        const [captures] = splitMethodByKeyword(arr, \"capture\");\n      \n        // 위의 5개 필터 이외에 있는 코드들은 keycode 로 인식한다.\n        const filteredList = [\n          ...checkMethodList,\n          ...afters,\n          ...befores,\n          ...delays,\n          ...debounces,\n          ...throttles,\n          ...captures\n        ];\n      \n        var codes = arr\n          .filter(code => filteredList.indexOf(code) === -1)\n          .map(code => code.toLowerCase());\n      \n        return {\n          eventName: this.getRealEventName(eventName),\n          customEventName: this.getCustomEventName(eventName), \n          codes,\n          captures,\n          afterMethods,\n          beforeMethods,\n          delayMethods,\n          debounceMethods,\n          throttleMethods,\n          checkMethodList\n        };\n    }\n      \n      \n    addDomEvent (eventObject, callback) {\n        eventObject.callback = this.makeCallback(eventObject, callback);\n        this.addBinding(eventObject);\n      \n        var options = !!eventObject.captures.length\n      \n        if (scrollBlockingEvents[eventObject.eventName]) {\n          options = {\n            passive: true,\n            capture: options  \n          }\n        }\n      \n        Event.addDomEvent(\n          eventObject.dom,\n          eventObject.eventName,\n          eventObject.callback,\n          options\n        );\n    }\n\n    makeCustomEventCallback (eventObject, callback) {\n\n      if (eventObject.customEventName === 'doubletab') {\n        var delay = 300;\n        \n        if (eventObject.delayMethods.length) {\n          delay = +eventObject.delayMethods[0].target;\n        }\n        return (...args) => {\n\n          if (!this.doubleTab) {\n            this.doubleTab = {\n                time: performance.now(),\n            }\n          } else {\n            if (performance.now() - this.doubleTab.time < delay) {\n              callback(...args);\n            }\n\n            this.doubleTab = null;\n          }\n        }\n\n      } \n\n      return callback; \n    }\n      \n    bindingDomEvent ( [eventName, dom, ...delegate], checkMethodFilters, callback ) {\n        let eventObject = this.getDefaultEventObject(eventName, checkMethodFilters);\n      \n        eventObject.dom = this.getDefaultDomElement(dom);\n        eventObject.delegate = delegate.join(SAPARATOR);\n\n        \n        if (eventObject.debounceMethods.length) {\n          var debounceTime = +eventObject.debounceMethods[0].target;\n          callback = debounce(callback, debounceTime);\n        } else if (eventObject.throttleMethods.length) {\n          var throttleTime = +eventObject.throttleMethods[0].target;\n          callback = throttle(callback, throttleTime);\n        }\n\n        // custom event callback 만들기 \n        callback = this.makeCustomEventCallback(eventObject, callback)\n      \n        this.addDomEvent(eventObject, callback);\n    };\n      \n    getEventNames (eventName) {\n        let results = [];\n        \n        eventName.split(NAME_SAPARATOR).forEach(e => {\n            var arr = e.split(NAME_SAPARATOR);\n        \n            results.push.apply(results, arr);\n        });\n        \n        return results;\n    }\n    \n    /**\n     * 이벤트 문자열 파싱하기 \n     * \n     * @param {string} key \n     */\n    parseDomEvent (key) {\n        const context = this.context;\n        let checkMethodFilters = key.split(CHECK_SAPARATOR).map(it => it.trim()).filter(Boolean);\n        \n        var prefix = checkMethodFilters.shift()\n        var eventSelectorAndBehave = prefix.split(DOM_EVENT_SAPARATOR)[1];\n        \n        var arr = eventSelectorAndBehave.split(SAPARATOR);\n        var eventNames = this.getEventNames(arr[0]);\n\n        var callback = context[key].bind(context);\n        \n        for(let i = 0, len = eventNames.length; i< len; i++) {\n          arr[0] = eventNames[i];\n          this.bindingDomEvent(arr, checkMethodFilters, callback);\n        }\n    }  \n}","import BaseHandler from \"./BaseHandler\";\nimport { isObject } from \"../functions/func\";\nimport { CHECK_BIND_PATTERN, BIND_CHECK_FUNCTION, CHECK_SAPARATOR, BIND_CHECK_DEFAULT_FUNCTION, BIND_SAPARATOR } from \"../Event\";\nimport Dom from \"../functions/Dom\";\n\n/**\n * \n * @param {Dom} $element \n * @param {string} key \n * @param {any} value \n */\nconst applyElementAttribute = ($element, key, value) => {\n\n  if (key === 'cssText') {\n    /**\n     * cssText: 'position:absolute'\n     */\n    $element.cssText(value);\n    return; \n  } else if (key === \"style\") {\n    /**\n     * style: { key: value }\n     */\n    if (typeof(value) !== 'string') {\n      $element.css(value);\n    }\n\n    return;\n  } else if (key === \"class\") {\n    //  \"class\" : [ 'className', 'className' ] \n    //  \"class\" : { key: true, key: false } \n    //  \"class\" : 'string-class' \n\n    if (Array.isArray(value)) {\n      $element.addClass(...value.filter(Boolean));\n    } else if (isObject(value)) {\n      const keys = Object.keys(value);\n      for(var i = 0, len = keys.length; i < len; i++) {\n        const className = keys[i];\n        const hasClass = value[className];\n\n        $element.toggleClass(className, hasClass);\n      }\n    } else {\n      $element.el.className  = value;\n    }\n\n    return;\n  } else if (key === 'callback') {\n    if (typeof value === 'function') {\n      value ();\n      return; \n    }\n  }\n\n  if (typeof value === 'undefined') {\n    $element.removeAttr(key);\n  } else {\n    if ($element.el.nodeName === \"TEXTAREA\" && key === \"value\") {\n      $element.text(value);\n    } else if (key === 'text' || key === 'textContent') {\n      $element.text(value);\n    } else if (key === 'innerHTML' || key === 'html') {\n      $element.html(value);\n    } else if (key === 'htmlDiff') {\n      $element.updateDiff(value);\n    } else if (key === 'svgDiff') {\n      $element.updateSVGDiff(value);\n    } else if (key === 'value') {\n      $element.val(value);\n    } else {\n      $element.attr(key, value);\n    }\n  }\n};\n\nexport default class BindHandler extends BaseHandler {\n\n    load (...args) {\n      this.bindData(...args);\n    }\n\n    // 어떻게 실행하는게 좋을까? \n    // this.runHandle('bind', ...);\n    bindData (...args) {\n      if (!this._bindMethods) {\n        this._bindMethods = this.context.filterProps(CHECK_BIND_PATTERN);\n      }\n      /**\n       * BIND 를 해보자.\n       * 이시점에 하는게 맞는지는 모르겠지만 일단은 해보자.\n       * BIND 는 특정 element 에 html 이 아닌 데이타를 업데이트하기 위한 간단한 로직이다.\n       */\n      const bindList = this._bindMethods\n        .filter(originalCallbackName => {\n          if (!args.length) return true; \n          var [callbackName, id] = originalCallbackName.split(CHECK_SAPARATOR);        \n  \n          var [_, $bind] = callbackName.split(' ')\n  \n          return args.indexOf($bind) >  -1 \n        })\n\n        bindList.forEach(async (callbackName) => {\n          const bindMethod = this.context[callbackName];\n          var [callbackName, id] = callbackName.split(CHECK_SAPARATOR);\n  \n          const refObject = this.getRef(id);\n          let refCallback = BIND_CHECK_DEFAULT_FUNCTION;\n  \n          if (refObject != '' && typeof(refObject) === 'string') {\n            refCallback = BIND_CHECK_FUNCTION(refObject);\n          } else if (typeof refObject === 'function') {\n            refCallback = refObject;\n          }\n  \n          const elName = callbackName.split(BIND_SAPARATOR)[1];\n          let $element = this.context.refs[elName];\n  \n          // isBindCheck 는 binding 하기 전에 변화된 지점을 찾아서 업데이트를 제한한다.\n          const isBindCheck = typeof(refCallback) === 'function' && refCallback.call(this.context);\n          if ($element && isBindCheck) {\n            const results = await bindMethod.call(this.context, ...args);\n\n            if (!results) return;\n  \n            const keys = Object.keys(results);\n            for(var elementKeyIndex = 0, len = keys.length; elementKeyIndex < len; elementKeyIndex++) {\n              const key = keys[elementKeyIndex];\n              const value = results[key];\n\n              applyElementAttribute($element, key, value);\n            }\n          }\n        });\n    }    \n\n    destroy() {\n      this._bindMethods = undefined\n    }\n\n\n}","const map = new Map();\n\n/**\n * Element 등록\n * \n * @param {object} classes 클래스명 리스트 \n */ \nexport function registElement(classes = {}) {\n\n    Object.keys(classes).forEach(key => {\n        if (map.has(key)) {\n            // console.warn(`${key} element is duplicated.`)\n            return;\n        } \n\n        map.set(key, classes[key]);\n    })\n}\n\nexport function retriveElement(className) {\n    return map.get(className);\n}","\nconst UUID_REG = /[xy]/g\n\nexport function uuid() {\n    var dt = new Date().getTime();\n    var uuid = 'xxx12-xx-34xx'.replace(UUID_REG, function (c) {\n        var r = (dt + Math.random() * 16) % 16 | 0;\n        dt = Math.floor(dt / 16);\n        return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n    });\n    return uuid;\n}\n\nexport function uuidShort() {\n    var dt = new Date().getTime();\n    var uuid = 'idxxxxxxx'.replace(UUID_REG, function (c) {\n        var r = (dt + Math.random() * 16) % 16 | 0;\n        dt = Math.floor(dt / 16);\n        return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n    });\n    return uuid;\n}\n","import {\n  CHECK_SAPARATOR,\n  CHECK_LOAD_PATTERN,\n  LOAD_SAPARATOR,\n  DOMDIFF,\n  getRef,\n  MAGIC_METHOD,\n} from \"./Event\";\nimport Dom from \"./functions/Dom\";\nimport {\n  isFunction,\n  // Array.isArray,\n  html,\n  keyEach,\n  collectProps,\n  isString\n} from \"./functions/func\";\n\nimport DomEventHandler from \"./handler/DomEventHandler\";\nimport BindHandler from \"./handler/BindHandler\";\nimport { retriveElement } from \"./functions/registElement\";\nimport { uuid, uuidShort } from \"./functions/uuid\";\n\nconst REFERENCE_PROPERTY = \"ref\";\nconst TEMP_DIV = Dom.create(\"div\");\nconst QUERY_PROPERTY = `[${REFERENCE_PROPERTY}]`;\nconst REF_CLASS = 'refclass';\nconst REF_CLASS_PROPERTY = `[${REF_CLASS}]`\nconst VARIABLE_SAPARATOR = \"__ref__variable:\";\n\nexport default class EventMachine {\n  constructor(opt, props) {\n    this.state = {};\n    this.prevState = {};\n    this.refs = {};\n    this.children = {};\n    this._bindings = [];\n    this.id = uuid();    \n    this.__tempVariables = new Map();\n    this.handlers = this.initializeHandler()\n\n    this.initializeProperty(opt, props);\n\n    this.initComponents();\n  }\n\n\n  /**\n   * UIElement instance 에 필요한 기본 속성 설정 \n   */\n  initializeProperty (opt, props = {}) {\n\n    this.opt = opt || {};\n    this.parent = this.opt;\n    this.props = props;\n    this.source = uuid();\n    this.sourceName = this.constructor.name;  \n\n\n\n  }\n\n  initComponents() {\n    this.childComponents = this.components() \n  }\n\n  initializeHandler () {\n    return [\n      new BindHandler(this),\n      new DomEventHandler(this)\n    ]\n  }\n\n  /**\n   * state 를 초기화 한것을 리턴한다. \n   * \n   * @protected\n   * @returns {Object} \n   */\n  initState() {\n    return {};\n  }\n\n  /**\n   * state 를 변경한다. \n   * \n   * @param {Object} state  새로운 state \n   * @param {Boolean} isLoad  다시 로드 할 것인지 체크 , true 면 state 변경후 다시 로드 \n   */\n  setState(state = {}, isLoad = true) {\n    this.prevState = this.state;\n    this.state = Object.assign({}, this.state, state );\n    if (isLoad) {\n      this.load();\n    }\n  }\n\n  /**\n   * state 에 있는 key 필드의 값을 토글한다. \n   * Boolean 형태의 값만 동작한다. \n   * \n   * @param {string} key \n   * @param {Boolean} isLoad \n   */\n  toggleState(key, isLoad = true) {\n    this.setState({\n      [key]: !(this.state[key])\n    }, isLoad)\n  }\n\n  /**\n   * props 를 넘길 때 해당 참조를 그대로 넘기기 위한 함수 \n   * \n   * @param {any} value\n   * @returns {string} 참조 id 생성 \n   */ \n  variable(value) {\n    const id = `${VARIABLE_SAPARATOR}${uuidShort()}`;\n\n    this.__tempVariables.set(id, value);\n\n    return id;\n  }\n\n  /**\n   * 참조 id 를 가지고 있는 variable 을 복구한다. \n   * \n   * @param {string} id\n   * @returns {any}\n   */ \n  recoverVariable(id) {\n    if (isString(id) === false) {\n      return id;\n    }\n\n    let value = id;\n\n    if (this.__tempVariables.has(id)) {\n      value = this.__tempVariables.get(id);\n\n      this.__tempVariables.delete(id);\n    }\n\n    return value;\n  }\n\n  /**\n   * 객체를 다시 그릴 때 사용한다. \n   * \n   * @param {*} props \n   * @protected\n   */\n  _reload(props) {\n    this.props = props;\n    this.state = {}; \n    this.setState(this.initState(), false);\n    this.refresh(true);\n  }\n\n  /**\n   * template 을 렌더링 한다. \n   * \n   * @param {Dom|undefined} $container  컴포넌트가 그려질 대상 \n   */\n  render($container) {\n    this.$el = this.parseTemplate(\n      html`\n        ${this.template()}\n      `\n    );\n    this.refs.$el = this.$el;\n\n    if ($container) {\n      $container.append(this.$el);\n    }\n\n    // LOAD 로 정의된 것들을 수행한다. \n    this.load();\n\n    // render 이후에 실행될 콜백을 정의한다. \n    this.afterRender();\n  }\n\n  initialize() {\n    this.state = this.initState();\n  }\n\n  /**\n   * render 이후에 실행될 함수 \n   * dom 이 실제로 생성된 이후에 수행할 작업들을 정의한다. \n   * \n   * @protected\n   */\n  afterRender() {}\n\n  /**\n   * 하위에 연결될 객체들을 정의한다 \n   * \n   * @protected\n   * @returns {Object}\n   */\n  components() {\n    return {};\n  }\n\n  /**\n   * ref 이름을 가진 Component 를 가지고 온다. \n   * \n   * @param  {any[]} args \n   * @returns {EventMachine}\n   */\n  getRef(...args) {\n    const key = args.join('')\n    return this.refs[key];\n  }\n\n  /**\n   * template() 함수의 결과물을 파싱해서 dom element 를 생성한다. \n   * \n   * @param {string} html \n   * @param {Boolean} [isLoad=false] \n   */\n  parseTemplate(html, isLoad) {\n    //FIXME: html string, element 형태 모두 array 로 받을 수 있도록 해보자. \n    if (Array.isArray(html)) {\n      html = html.join('');\n    }\n\n    html = html.trim();\n    const list = TEMP_DIV.html(html).children();\n    /////////////////////////////////\n\n    for(var i = 0, len = list.length; i < len; i++) {\n      const $el = list[i];\n\n      var ref = $el.attr(REFERENCE_PROPERTY)\n      if (ref) {\n        this.refs[ref] = $el;\n      }\n\n      var refs = $el.$$(QUERY_PROPERTY);\n      var temp = {} \n\n      for(var refsIndex = 0, refsLen = refs.length; refsIndex < refsLen; refsIndex++) {\n        const $dom = refs[refsIndex];\n\n        const name = $dom.attr(REFERENCE_PROPERTY);\n        if (temp[name]) {\n          console.warn(`${ref} is duplicated. - ${this.sourceName}`, this)\n        } else {\n          temp[name] = true; \n        }\n\n        this.refs[name] = $dom;             \n      }\n    }\n\n    if (!isLoad && list.length) {\n      return list[0];\n    }\n\n    return Dom.create(TEMP_DIV.createChildrenFragment());\n  }\n\n  parseProperty ($dom) {\n    let props = {};\n\n    // parse properties \n    for(var t of $dom.el.attributes) {\n      props[t.nodeName] = this.recoverVariable(t.nodeValue);\n    }\n\n    if (props['props']) {\n      props = {\n        ...props,\n        ...getRef(props['props'])\n      }\n    }\n\n    $dom.$$('property').forEach($p => {\n      const [name, value, valueType] = $p.attrs('name', 'value', 'valueType')\n\n      let realValue = value || $p.text();\n\n      if (valueType === 'json') {          \n        realValue = JSON.parse(realValue);\n      }\n    \n      props[name] = realValue; \n    })\n\n    return props;\n  }\n\n  parseSourceName(obj) {\n\n    if (obj.parent) {\n      return [obj.sourceName, ...this.parseSourceName(obj.parent)]\n    }\n\n    return [obj.sourceName]\n  }\n\n  getEventMachineComponent (refClassName) {\n    var EventMachineComponent = retriveElement(refClassName) || this.childComponents[refClassName];\n\n    return EventMachineComponent;\n  }\n\n  parseComponent() {\n    const $el = this.$el;\n\n    let targets = $el.$$(REF_CLASS_PROPERTY);\n\n    targets.forEach($dom => {\n\n      const EventMachineComponent = this.getEventMachineComponent($dom.attr(REF_CLASS))\n\n      if (EventMachineComponent) {\n        let props = this.parseProperty($dom);\n  \n        // create component \n        let refName = $dom.attr(REFERENCE_PROPERTY);\n        var instance = null; \n  \n        // 동일한 refName 의 EventMachine 이 존재하면  해당 컴포넌트는 다시 그려진다. \n        // 루트 element 는 변경되지 않는다. \n        if (this.children[refName]) {\n          instance = this.children[refName] \n          instance._reload(props);\n        } else {\n          // 기존의 refName 이 존재하지 않으면 Component 를 생성해서 element 를 교체한다. \n          instance = new EventMachineComponent(this, props);\n  \n          this.children[refName || instance.id] = instance;\n  \n          instance.render();\n        }\n        \n\n        if (instance.renderTarget) {\n          instance.$el?.appendTo(instance.renderTarget);\n          $dom.remove();\n        } else {\n          $dom.replace(instance.$el);     \n        }\n\n      } else {\n        $dom.remove();\n      }\n \n  \n    })\n\n    keyEach(this.children, (key, obj) => {\n      if (obj && obj.clean()) {\n        delete this.children[key]\n      }\n    })\n  }\n\n  clean () {\n    if (this.$el && !this.$el.hasParent()) {\n\n      keyEach(this.children, (key, child) => {\n        child.clean();\n      })\n\n      this.destroy();  \n\n      this.$el = null;\n      return true; \n    }\n  }\n\n  /**\n   * refresh 는 load 함수들을 실행한다. \n   */\n  refresh() {\n    this.load()\n  }\n\n  _afterLoad () {\n\n    this.runHandlers('initialize');\n\n    this.bindData();\n\n    this.parseComponent();\n  }\n\n  async load(...args) {\n    if (!this._loadMethods) {\n      this._loadMethods = this.filterProps(CHECK_LOAD_PATTERN);\n    }\n\n    // loop 가 비동기라 await 로 대기를 시켜줘야 나머지 html 업데이트에 대한 순서를 맞출 수 있다. \n    const localLoadMethods = this._loadMethods.filter(callbackName => {\n        const elName = callbackName.split(LOAD_SAPARATOR)[1]\n                                  .split(CHECK_SAPARATOR)\n                                  .map(it => it.trim())[0];\n        if (!args.length) return true; \n        return args.indexOf(elName) > -1\n      })\n\n\n\n    await localLoadMethods.forEach(async (callbackName) => {\n      let methodName = callbackName.split(LOAD_SAPARATOR)[1];\n      var [elName, ...checker] = methodName.split(CHECK_SAPARATOR).map(it => it.trim())\n\n      checker = checker.map(it => it.trim())\n      \n      const isDomDiff = Boolean(checker.filter(it => DOMDIFF.includes(it)).length);\n\n      if (this.refs[elName]) {        \n        var newTemplate = await this[callbackName].call(this, ...args);\n\n        if (Array.isArray(newTemplate)) {\n          newTemplate = newTemplate.join('');\n        }\n\n        // create fragment \n        const fragment = this.parseTemplate(html`${newTemplate}`, true);\n        if (isDomDiff) {\n          this.refs[elName].htmlDiff(fragment);\n        } else {\n          this.refs[elName].html(fragment);\n        }\n\n      }\n    });\n\n    this._afterLoad();\n\n  }\n\n  runHandlers(func = 'run', ...args) {\n    this.handlers.forEach(h => h[func](...args));\n  }\n\n  bindData (...args) {\n    this.runHandlers('load', ...args);\n  }\n\n  /**\n   * 템플릿 지정 \n   * \n   * 템플릿을 null 로 지정하면 자동으로 DocumentFragment 을 생성한다.\n   * 화면에는 보이지 않지만 document, window 처럼 다른 영역의 이벤트로 정의하거나 subscribe 형태로 가져올 수 있다.\n   * \n   */ \n  template() {\n    return null;\n  }\n\n  eachChildren(callback) {\n    if (!isFunction(callback)) return;\n\n    keyEach(this.children, (_, Component) => {\n      callback(Component);\n    });\n  }\n\n  rerender () {\n    var $parent = this.$el.parent();\n    this.destroy();\n    this.render($parent);  \n  }\n\n  /**\n   * 자원을 해제한다.\n   * 이것도 역시 자식 컴포넌트까지 제어하기 때문에 가장 최상위 부모에서 한번만 호출되도 된다.\n   * \n   */\n  destroy() {\n    this.eachChildren(childComponent => {\n      childComponent.destroy();\n    });\n\n    this.runHandlers('destroy');\n    if (this.$el) {\n      this.$el.remove();\n    }\n\n    this.$el = null; \n    this.refs = {} \n    this.children = {} \n  }\n\n  /**\n   * property 수집하기\n   * 상위 클래스의 모든 property 를 수집해서 리턴한다.\n   * \n   * @returns {string[]} 나의 상위 모든 메소드를 수집해서 리턴한다. \n   */\n  collectProps() {\n\n    if (!this.__cachedMethodList){\n      this.__cachedMethodList = collectProps(this, (name) => {\n        return name.indexOf(MAGIC_METHOD) === 0; \n      });\n    }\n\n    return this.__cachedMethodList;\n  }\n\n  filterProps(pattern) {\n    return this.collectProps().filter(key => {\n      return key.match(pattern);\n    });\n  }\n\n  /* magic check method  */\n\n  self(e) {\n    return e && e.$dt && e.$dt.is(e.target);\n  }\n  isAltKey(e) {\n    return e.altKey;\n  }\n  isCtrlKey(e) {\n    return e.ctrlKey;\n  }\n  isShiftKey(e) {\n    return e.shiftKey;\n  }\n  isMetaKey(e) {\n    return e.metaKey || e.key == 'Meta' || e.code.indexOf('Meta') > -1 ;\n  }\n  isMouseLeftButton(e) {\n    return e.buttons === 1;     // 1 is left button \n  }\n\n  isMouseRightButton(e) {\n    return e.buttons === 2;     // 2 is right button \n  }  \n\n  hasMouse(e) { \n    return e.pointerType === 'mouse';\n  }\n\n  hasTouch(e) {\n    return e.pointerType === 'touch';\n  }\n\n  hasPen(e) {\n    return e.pointerType === 'pen';\n  }  \n\n  /** before check method */\n\n  /* after check method */\n\n  preventDefault(e) {\n    e.preventDefault();\n    return true;\n  }\n\n  stopPropagation(e) {\n    e.stopPropagation();\n    return true;\n  }\n}\n","import EventMachine from \"./EventMachine\";\nimport { debounce, ifCheck, isFunction, throttle } from \"./functions/func\";\n \n/**\n * @class BaseStore\n * @description BaseStore is the base class for all stores.\n * \n */ \nexport default class BaseStore {\n  constructor(editor) {\n    this.cachedCallback = {};\n    this.callbacks = {};\n    this.commandes = [];\n    this.editor = editor;\n  }\n\n  getCallbacks(event) {\n    if (!this.callbacks[event]) {\n      this.callbacks[event] = []\n    }\n\n    return this.callbacks[event]\n  }\n\n  setCallbacks(event, list = []) {\n    this.callbacks[event] = list; \n  }\n\n  debug (...args) {\n    if (this.editor && this.editor.config.get('debug')) {\n      console.debug(...args );\n    }\n\n  }\n\n  /**\n   * 메세지 등록 \n   * \n   * @param {string} event \n   * @param {Function} originalCallback \n   * @param {EventMachine} context \n   * @param {number} debounceDelay \n   * @param {number} throttleDelay \n   * @param {boolean} enableAllTrigger\n   * @param {boolean} enableSelfTrigger\n   * @param {string[]} [beforeMethods=[]]\n   * @returns {Function} off callback \n   */\n  on(event, originalCallback, context, debounceDelay = 0, throttleDelay = 0, enableAllTrigger = false, enableSelfTrigger = false, beforeMethods = []) {\n    var callback = originalCallback;\n    \n    if (debounceDelay > 0)  callback = debounce(originalCallback, debounceDelay);\n    else if (throttleDelay > 0)  callback = throttle(originalCallback, throttleDelay);\n\n    if (beforeMethods.length) {\n      callback = ifCheck(callback, context, beforeMethods);\n    }\n\n    this.getCallbacks(event).push({ event, callback, context, originalCallback, enableAllTrigger, enableSelfTrigger });\n\n    this.debug('add message event', event, context.sourceName );\n\n    return () => {\n      this.off(event, originalCallback);\n    }\n  }\n\n  /**\n   * 메세지 해제\n   * \n   * @param {string} event \n   * @param {*} originalCallback \n   */\n  off(event, originalCallback) {\n\n    this.debug('off message event', event );\n\n    if (arguments.length == 1) {\n      this.setCallbacks(event);\n    } else if (arguments.length == 2) {      \n      this.setCallbacks(event, this.getCallbacks(event).filter(f => {\n        return f.originalCallback !== originalCallback\n      }));\n    }\n  }\n\n  offAll (context) {\n\n    Object.keys(this.callbacks).forEach(event => {\n      this.setCallbacks(event, this.getCallbacks(event).filter(f => {\n        return f.context !== context;  \n      }))\n    })\n    this.debug('off all message', context.sourceName );\n  }\n\n  getCachedCallbacks (event) {\n    return this.getCallbacks(event);\n  }\n\n  sendMessage(source, event, ...args) {\n    Promise.resolve().then(() => {\n      var list = this.getCachedCallbacks(event);\n      if (list) {\n\n        for(var i = 0, len = list.length; i < len; i++) {\n          const f = list[i];\n          // console.log(source);\n          if (f.enableSelfTrigger) continue;\n\n          if (f.enableAllTrigger || f.originalCallback.source !== source) {\n            f.callback.apply(f.context, args)  \n          }\n        }\n      }\n\n    });\n  }\n\n  nextSendMessage(source, callback, ...args) {\n    Promise.resolve().then(() => {\n      callback(...args)\n    });\n  }\n\n  triggerMessage(source, event, ...args) {\n    Promise.resolve().then(() => {\n      var list = this.getCachedCallbacks(event);\n\n      if (list) {\n        for(var i = 0, len = list.length; i < len; i++) {\n          const f = list[i];\n          if (f.originalCallback.source === source) {\n            f.callback.apply(f.context, args)  \n          }\n        }\n      } else {\n        console.warn(event, ' is not valid event');\n      }\n\n\n    });\n  }\n\n  emit(event, ...args) {\n\n    if (isFunction(event)) {\n      event(...args);\n    } else {\n      this.sendMessage(this.source, event, ...args);\n    }\n\n  }\n\n  /**\n   * 마이크로 Task 를 실행 \n   * \n   * @param {Function} callback  마이크로Task 형식으로 실행될 함수 \n   */\n  nextTick (callback) {\n    this.nextSendMessage(this.source, callback);\n  }\n\n  trigger(event, ...args) {\n\n    if (isFunction(event)) {\n      event(...args);\n    } else {\n      this.triggerMessage(this.source, event, ...args);\n    }\n\n  }\n}\n","import { CHECK_SAPARATOR, CHECK_SUBSCRIBE_PATTERN, SUBSCRIBE_SAPARATOR } from \"./Event\";\nimport EventMachine from \"./EventMachine\";\nimport { isFunction, splitMethodByKeyword } from \"./functions/func\";\nimport { uuidShort } from \"./functions/uuid\";\n\n/**\n * UI 를 만드는 기본 단위 \n * \n * dom handler, \n * bind handler, \n * store handler 를 가진다. \n * \n * @property {Editor} $editor \n */\nclass UIElement extends EventMachine {\n  constructor(opt, props = {}) {\n    super(opt, props);\n\n    this.__UID = new Set();\n    if (props.store) {\n      this.__storeInstance = props.store;\n    }\n\n    this.created();\n\n    this.initialize();\n\n    this.initializeStoreEvent();\n\n  }\n\n  setStore (storeInstance) {\n    this.__storeInstance = storeInstance;\n  }\n\n  /**\n   * 메세징 루트를 재정의 할 수 있음. \n   * \n   * @override\n   */\n  get $store() {\n    return this.__storeInstance || this.parent.$store;\n  }  \n\n  /**\n   * UIElement 가 생성될 때 호출되는 메소드 \n   * @protected\n   */\n  created() {}\n\n  getRealEventName(e, s = MULTI_PREFIX) {\n    var startIndex = e.indexOf(s);\n    return e.substr(startIndex < 0 ? 0 : startIndex + s.length);\n  }\n\n  splitMethod (arr, keyword, defaultValue = 0) {\n    var [methods, params] = splitMethodByKeyword(arr, keyword);\n\n    return [\n      methods.length ? +params[0].target : defaultValue,\n      methods, \n      params\n    ]\n  }\n\n  createLocalCallback(event, callback) {\n    var newCallback = callback.bind(this);\n    newCallback.displayName = `${this.sourceName}.${event}`;\n    newCallback.source = this.source;\n\n    return newCallback;\n  }\n\n  /**\n   * initialize store event\n   *\n   * you can define '@xxx' method(event) in UIElement\n   *\n   * Store Event 를 초기화 한다. \n   *\n   */\n  initializeStoreEvent() {\n    this.filterProps(CHECK_SUBSCRIBE_PATTERN).forEach(key => {\n      const events = this.getRealEventName(key, SUBSCRIBE_SAPARATOR);\n      // context 에 속한 변수나 메소드 리스트 체크\n      const [method, ...methodLine] = events.split(CHECK_SAPARATOR);\n      const checkMethodList = methodLine.map(it => it.trim()).filter(code => this[code]).map(target => ({target}));\n\n      // support deboounce for store event    \n      const [debounceSecond, debounceMethods] = this.splitMethod(methodLine, 'debounce');\n      const [throttleSecond, throttleMethods] = this.splitMethod(methodLine, 'throttle');      \n      const [allTrigger, allTriggerMethods] = this.splitMethod(methodLine, 'allTrigger');   \n      const [selfTrigger, selfTriggerMethods] = this.splitMethod(methodLine, 'selfTrigger');            \n\n      events\n        .split(CHECK_SAPARATOR)\n        .filter(it => {\n          return (\n              checkMethodList.indexOf(it) === -1 &&             \n              debounceMethods.indexOf(it) === -1 && \n              allTriggerMethods.indexOf(it) === -1 &&               \n              selfTriggerMethods.indexOf(it) === -1 &&                             \n              throttleMethods.indexOf(it) === -1\n          )\n        })\n        .map(it => it.trim())\n        .filter(Boolean)\n        .forEach(e => {\n\n          if (isFunction(this[key])) {\n            var callback = this.createLocalCallback(e, this[key] )\n            this.$store.on(e, callback, this, debounceSecond, throttleSecond, allTriggerMethods.length, selfTriggerMethods.length, checkMethodList);\n          }\n\n      });\n    });\n  }\n\n  /**\n   * 현재 UIElement 와 연결된 모든 메세지를 해제한다. \n   */\n  destoryStoreSUBSCRIBE() {\n    this.$store.offAll(this);\n  }\n\n  destroy () {\n    super.destroy()\n\n    this.destoryStoreSUBSCRIBE();\n  }\n\n  /**\n   * UIElement 를 다시 그린다. \n   * \n   * template 정의 부터  메세지 이벤트 정의까지 모두 다시 한다. \n   */\n  rerender() {\n    super.rerender();\n\n    this.initialize();\n\n    this.initializeStoreEvent();\n  }\n\n\n  /**\n   * UIElement 기반으로 메세지를 호출 한다. \n   * 나 이외의 객체들에게 메세지를 전달한다. \n   * \n   * @param {string} messageName\n   * @param {any[]} args \n   */\n  emit(messageName, ...args) {\n    this.$store.source = this.source;\n    this.$store.sourceContext = this; \n    this.$store.emit(messageName, ...args);\n  }\n\n  /**\n   * MicroTask 를 수행한다. \n   * \n   * @param {Function} callback \n   */\n  nextTick (callback) {\n    this.$store.nextTick(callback);\n  }\n\n  /**\n   * \n   * UIElement 자신의 메세지를 수행한다. \n   * emit 은 나외의 객체에게 메세지를 보내고 \n   * \n   * @param {string} messageName \n   * @param {any[]} args \n   */\n  trigger(messageName, ...args) {\n    this.$store.source = this.source;\n    this.$store.trigger(messageName, ...args);\n  }\n\n  /**\n   * 자식 객체에게만 호출되는 메세지를 수행한다.\n   * \n   * @param {string} messageName\n   * @param {any[]} args\n   */ \n  broadcast(messageName, ...args) {\n    Object.keys(this.children).forEach(key => {\n      this.children[key].trigger(messageName, ...args);\n    })\n  }\n\n  /**\n   * message 이벤트에 주어진 callack 을 등록 \n   * 동일한 메세지 명으로 callback 은 list 화 되어서 관리 됩니다. \n   * \n   * @param {string} message 이벤트 메세지 이름 \n   * @param {Function} callback 메세지 지정시 실행될 함수\n   */ \n  on (message, callback) {\n    this.$store.on(message, callback);\n  }\n\n  off (message, callback) {\n    this.$store.off(message, callback);\n  }\n\n  /**\n   * 동적으로 subscribe 함수를 지정합니다. \n   * \n   * template 안에서 동적으로 수행할 수 있습니다. \n   * \n   * 이렇게 생성된 subscribe 함수는 외부에서는 실행 할수가 없는 SUBSCRIBE_SELF 로 생성됩니다. \n   * \n   * 함수 내부에서 context 를 유지하기 때문에 this 로 instance 에 접근 할 수 있습니다. \n   * \n   * @example\n   * \n   * ```js\n   * html`\n   *     <div onClick=${this.subscribe(() => { \n   *        console.log('click is fired'); \n   *        console.log(this.source);\n   *     })}>\n   *        눌러주세요.\n   *     </div>\n   * `\n   * ```\n   * \n   * @param {Function} callback subscribe 함수로 지정할 callback \n   * @param {number} [debounceSecond=0] debounce 시간(ms)\n   * @param {number} [throttleSecond=0] throttle 시간(ms)\n   * @returns {string} function id \n   */ \n  subscribe(callback, debounceSecond = 0, throttleSecond = 0) {\n    const id = `subscribe.${uuidShort()}`;\n\n    const newCallback = this.createLocalCallback(id, callback);\n\n    this.$store.on(id, newCallback, this, debounceSecond, throttleSecond, false, /*self trigger*/true);    \n\n    return id; \n  }\n}\n\nexport default UIElement;\n","import BaseStore from \"./BaseStore\";\nimport Dom from \"./functions/Dom\";\nimport UIElement from \"./UIElement\";\n\n/**\n * UIElement 렌더링 하기 \n * \n * @param {UIElement} ElementClass\n * @param {Object} opt \n * @param {string|HTMLElement} opt.container  렌더링 될 객체 \n * @returns {UIElement}\n */ \nexport const start = (ElementClass, opt = {}) => {\n\n  const $container = Dom.create(opt.container || document.body);\n\n  const app = new ElementClass(opt, {\n    ...opt,\n    store: opt.store || new BaseStore()\n  });\n\n  app.render($container);\n\n  return app; \n};"],"names":["MAGIC_METHOD","makeEventChecker","value","split","CHECK_SAPARATOR","CHECK_DOM_EVENT_PATTERN","CHECK_LOAD_PATTERN","CHECK_BIND_PATTERN","CHECK_SUBSCRIBE_PATTERN","PIPE","join","NAME_SAPARATOR","DOM_EVENT_SAPARATOR","LOAD_SAPARATOR","BIND_SAPARATOR","SUBSCRIBE_SAPARATOR","SAPARATOR","refManager","DOM_EVENT_MAKE","key","SUBSCRIBE_EVENT_MAKE","CHECKER","AFTER","BEFORE","IF","KEY","ARROW_UP","ARROW_DOWN","ARROW_LEFT","ARROW_RIGHT","ENTER","SPACE","ESCAPE","ALT","SHIFT","META","CONTROL","MOUSE","TOUCH","PEN","SELF","LEFT_BUTTON","RIGHT_BUTTON","FIT","PASSIVE","DOMDIFF","DEBOUNCE","t","DELAY","D1000","THROTTLE","ALL_TRIGGER","SELF_TRIGGER","CAPTURE","PREVENT","STOP","SUBSCRIBE","SUBSCRIBE_ALL","SUBSCRIBE_SELF","CONFIG","config","CUSTOM","CLICK","DOUBLECLICK","MOUSEDOWN","MOUSEUP","MOUSEMOVE","MOUSEOVER","MOUSEOUT","MOUSEENTER","MOUSELEAVE","TOUCHSTART","TOUCHMOVE","TOUCHEND","KEYDOWN","KEYUP","KEYPRESS","DRAG","DRAGSTART","DROP","DRAGOVER","DRAGENTER","DRAGLEAVE","DRAGEXIT","DRAGOUT","DRAGEND","CONTEXTMENU","CHANGE","INPUT","FOCUS","FOCUSIN","FOCUSOUT","BLUR","PASTE","RESIZE","SCROLL","SUBMIT","POINTERSTART","POINTEROVER","POINTERENTER","POINTEROUT","POINTERMOVE","POINTEREND","CHANGEINPUT","WHEEL","ANIMATIONSTART","ANIMATIONEND","ANIMATIONITERATION","TRANSITIONSTART","TRANSITIONEND","TRANSITIONRUN","TRANSITIONCANCEL","DOUBLETAB","LOAD","getRef","id","BIND_CHECK_FUNCTION","field","prevState","this","state","BIND_CHECK_DEFAULT_FUNCTION","BIND","normalizeWheelEvent","e","dx","deltaX","dy","deltaY","shiftKey","deltaMode","WheelEvent","DOM_DELTA_LINE","DOM_DELTA_PAGE","limit","delta","maxDelta","Math","sign","min","abs","addDomEvent","dom","eventName","callback","useCapture","addEventListener","removeDomEvent","removeEventListener","pos","touches","posXY","x","pageX","y","pageY","updateProp","node","name","newValue","oldValue","el","setAttribute","removeAttribute","setBooleanProp","setProp","removeBooleanProp","removeUndefinedProp","removeProp","hasPassed","node1","nodeType","Node","TEXT_NODE","getAttribute","getProps","attributes","results","len","length","i","updateElement","parentElement","oldEl","newEl","node2","textContent","nodeName","hasRefClass","replaceChild","cloneNode","COMMENT_NODE","toString","newProps","oldProps","keyList","push","apply","Object","keys","props","Set","updateProps","oldChildren","children","newChildren","max","removeChild","appendChild","element","firstChild","nextSibling","DomDiff","A","B","childrenA","childrenB","Dom","tag","className","attr","document","createElement","k","create","createByHTML","htmlString","list","html","getScrollTop","window","pageYOffset","documentElement","scrollTop","body","getScrollLeft","pageXOffset","scrollLeft","parse","DOMParser","parseFromString","setAttr","obj","forEach","_this","setAttrNS","namespace","_this2","_this3","data","arguments","attrNS","getAttributeNS","setAttributeNS","attrKeyValue","keyField","val","attrs","map","_this4","styles","_this5","style","removeAttr","removeStyle","removeProperty","is","checkElement","isTag","tagName","toLowerCase","closest","cls","temp","checkCls","hasClass","parentNode","path","$parentNode","parent","hasParent","removeClass","classList","remove","contains","addClass","add","onlyOneClass","it","toggleClass","isForce","toggle","innerHTML","empty","append","htmlDiff","fragment","updateDiff","rootElement","updateSVGDiff","find","selector","querySelector","$","findAll","Array","from","querySelectorAll","$$","createTextNode","prepend","prependHTML","$dom","createChildrenFragment","appendHTML","createDocumentFragment","$el","appendTo","target","text","tempText","css","indexOf","setProperty","getComputedStyle","entries","localKey","_this6","getStyleList","_this7","cssText","tempCssText","cssArray","arr","cssFloat","parseFloat","cssInt","parseInt","px","rect","getBoundingClientRect","bbox","getBBox","isSVG","toUpperCase","offsetRect","parentBox","box","top","left","width","height","offsetLeft","offsetTop","offsetWidth","offsetHeight","offset","position","size","contentWidth","contentHeight","tempValue","matches","realVal","type","checked","show","displayType","display","hide","isHide","isShow","currentHide","scrollIntoView","addScrollLeft","dt","addScrollTop","setScrollTop","setScrollLeft","scrollHeight","scrollWidth","on","opt1","opt2","off","getElement","createChild","$element","firstElementChild","nextElementSibling","childLength","replace","newElement","oldElement","isChecked","click","focus","select","range","createRange","selectNodeContents","sel","getSelection","removeAllRanges","addRange","blur","context","contextType","_initContext","getContext","resize","ctx","scale","devicePixelRatio","toDataURL","quality","clear","clearRect","update","call","drawImage","img","drawOption","option","assign","drawLine","x1","y1","x2","y2","beginPath","moveTo","lineTo","stroke","closePath","drawPath","p","index","fill","drawCircle","cx","cy","r","arc","PI","drawText","fillText","naturalWidth","naturalHeight","files","getTotalLength","identity","debounce","delay","undefined","$1","$2","$3","$4","$5","clearTimeout","setTimeout","throttle","keyEach","isNotUndefined","isUndefined","isString","isFunction","short_tag_regexp","HTML_TAG","image","input","br","line","circle","strings","console","log","isArray","match","p1","splitMethodByKeyword","keyword","filterKeys","filter","code","filterMaps","trim","param","BaseHandler","options","initialize","load","refresh","render","run","destroy","scrollBlockingEvents","touchstart","touchmove","mousedown","mouseup","mousemove","eventConverts","doubletab","customEventNames","DomEventHandler","_domEvents","filterProps","parseDomEvent","removeEventAll","getBindings","initBindings","Event","_bindings","addBinding","matchPath","hasDelegate","eventObject","srcElement","delegate","makeCallback","makeDelegateCallback","makeDefaultCallback","returnValue","runEventCallback","delegateTarget","$dt","xy","beforeMethods","every","before","checkEventType","afterMethods","after","hasKeyCode","codes","isAllCheck","checkMethodList","fieldValue","getDefaultDomElement","refs","$root","getRealEventName","getCustomEventName","getDefaultEventObject","checkMethodFilters","afters","befores","debounces","debounceMethods","delays","delayMethods","throttles","throttleMethods","captures","filteredList","customEventName","passive","capture","makeCustomEventCallback","doubleTab","performance","now","time","bindingDomEvent","getEventNames","Boolean","shift","eventNames","bind","applyElementAttribute","isNumber","isObject","BindHandler","bindData","args","_bindMethods","bindList","originalCallbackName","callbackName","bindMethod","refObject","refCallback","elName","isBindCheck","elementKeyIndex","Map","registElement","classes","has","set","UUID_REG","uuid","Date","getTime","c","random","floor","uuidShort","TEMP_DIV","EventMachine","opt","__tempVariables","handlers","initializeHandler","initializeProperty","initComponents","source","sourceName","constructor","childComponents","components","initState","setState","isLoad","toggleState","variable","recoverVariable","get","_reload","$container","parseTemplate","template","afterRender","ref","refsIndex","refsLen","warn","parseProperty","nodeValue","$p","valueType","realValue","JSON","parseSourceName","getEventMachineComponent","refClassName","parseComponent","EventMachineComponent","refName","instance","renderTarget","clean","child","_afterLoad","runHandlers","_loadMethods","localLoadMethods","checker","isDomDiff","includes","newTemplate","func","h","eachChildren","_","Component","rerender","$parent","childComponent","collectProps","__cachedMethodList","root","checkFunction","names","getOwnPropertyNames","getPrototypeOf","pattern","self","isAltKey","altKey","isCtrlKey","ctrlKey","isShiftKey","isMetaKey","metaKey","isMouseLeftButton","buttons","isMouseRightButton","hasMouse","pointerType","hasTouch","hasPen","preventDefault","stopPropagation","BaseStore","editor","cachedCallback","callbacks","commandes","getCallbacks","event","setCallbacks","debug","originalCallback","debounceDelay","throttleDelay","enableAllTrigger","enableSelfTrigger","checkMethods","check","ifCheck","f","offAll","getCachedCallbacks","sendMessage","Promise","resolve","then","nextSendMessage","triggerMessage","emit","nextTick","trigger","UIElement","__UID","store","__storeInstance","created","initializeStoreEvent","setStore","storeInstance","s","MULTI_PREFIX","startIndex","substr","splitMethod","defaultValue","methods","params","createLocalCallback","newCallback","displayName","events","methodLine","debounceSecond","throttleSecond","allTriggerMethods","selfTriggerMethods","$store","destoryStoreSUBSCRIBE","_EventMachine","messageName","sourceContext","broadcast","message","subscribe","start","ElementClass","container","app"],"mappings":"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"}