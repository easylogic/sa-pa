function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){return e||(e=t.slice(0)),t.raw=e,t}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a=function(t,e){return void 0===e&&(e=f)," "+e+" "+t},l=/domevent (.*)/gi,c=/load (.*)/gi,u=/bind (.*)/gi,h=/subscribe (.*)/gi,f="|",d={},p=function(){var t=[].slice.call(arguments).join(":");return function(){return"@magic:domevent "+[t].concat([].slice.call(arguments)).join(" ")}},v=function(){return"@magic:subscribe "+[].slice.call(arguments).join(f)},g=function(t,e){return void 0===e&&(e=f),a(t,e)},m=function(t,e){return void 0===e&&(e=f),a("after("+t+")",e)},x=g,y=g,E=g("ArrowUp"),b=g("ArrowDown"),T=g("ArrowLeft"),C=g("ArrowRight"),A=g("Enter"),O=g("Space"),N=g("Escape"),S=g("isAltKey"),R=g("isShiftKey"),M=g("isMetaKey"),k=g("isCtrlKey"),_=g("hasMouse"),D=g("hasTouch"),w=g("hasPen"),L=g("self"),P=g("isMouseLeftButton"),I=g("isMouseRightButton"),U=g("fit"),B=g("passive"),$=g("domdiff"),j=function(t){return void 0===t&&(t=100),g("debounce("+t+")")},H=j(1e3),F=g("allTrigger()"),V=g("selfTrigger()"),K=g("capture()"),G=m("preventDefault"),W=m("stopPropagation"),z=v,X=p,Y=p("click"),q=p("dblclick"),J=p("mousedown"),Z=p("mouseup"),Q=p("mousemove"),tt=p("mouseover"),et=p("mouseout"),nt=p("mouseenter"),rt=p("mouseleave"),it=p("touchstart"),ot=p("touchmove"),st=p("touchend"),at=p("keydown"),lt=p("keyup"),ct=p("keypress"),ut=p("drag"),ht=p("dragstart"),ft=p("drop"),dt=p("dragover"),pt=p("dragenter"),vt=p("dragleave"),gt=p("dragexit"),mt=p("dragout"),xt=p("dragend"),yt=p("contextmenu"),Et=p("change"),bt=p("input"),Tt=p("focus"),Ct=p("focusin"),At=p("focusout"),Ot=p("blur"),Nt=p("paste"),St=p("resize"),Rt=p("scroll"),Mt=p("submit"),kt=X("pointerover"),_t=X("pointerenter"),Dt=X("pointerout"),wt=X("pointermove"),Lt=X("pointerup"),Pt=X("change","input"),It=X("wheel","mousewheel","DOMMouseScroll"),Ut=p("animationstart"),Bt=p("animationend"),$t=p("animationiteration"),jt=p("transitionstart"),Ht=p("transitionend"),Ft=p("transitionrun"),Vt=p("transitioncancel"),Kt=X("doubletab"),Gt=function(t){return d[t]||""},Wt=function(t){return function(){return this.prevState[t]!=this.state[t]}},zt=function(){return!0};function Xt(t,e){return Math.sign(t)*Math.min(e,Math.abs(t))}var Yt={addDomEvent:function(t,e,n,r){void 0===r&&(r=!1),t&&t.addEventListener(e,n,r)},removeDomEvent:function(t,e,n){t&&t.removeEventListener(e,n)},pos:function(t){return t.touches&&t.touches[0]?t.touches[0]:t},posXY:function(t){var e=this.pos(t);return{x:e.pageX,y:e.pageY}}},qt=function(t,e,n,r){n?r&&n===r||function(t,e,n){"boolean"==typeof n?function(t,e,n){n?(t.setAttribute(e,e),t[e]=n):(t.removeAttribute(e),t[e]=n)}(t,e,n):t.setAttribute(e,n)}(t,e,n):function(t,e,n){"boolean"==typeof n?function(t,e){t.removeAttribute(e),t[e]=!1}(t,e):e&&function(t,e){t.removeAttribute(e)}(t,e)}(t,e,r)};function Jt(t){return t.nodeType!==Node.TEXT_NODE&&"true"===t.getAttribute("data-domdiff-pass")}function Zt(t){for(var e={},n=t.length,r=0;r<n;r++){var i=t[r];e[i.name]=i.value}return e}function Qt(t,e,n,r){if(e)if(n){if(Jt(e)||Jt(n));else if(l=e,(a=n).nodeType===Node.TEXT_NODE&&a.textContent!==l.textContent||a.nodeName!==l.nodeName||function(t){return t.nodeType!==Node.TEXT_NODE&&t.getAttribute("refClass")}(n))t.replaceChild(n.cloneNode(!0),e);else if(n.nodeType!==Node.TEXT_NODE&&n.nodeType!==Node.COMMENT_NODE&&"[object HTMLUnknownElement]"!==n.toString()){!function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var r=[];r.push.apply(r,Object.keys(e)),r.push.apply(r,Object.keys(n));for(var i=[].concat(new Set(r)),o=0,s=i.length;o<s;o++){var a=i[o];qt(t,a,e[a],n[a])}}(e,Zt(n.attributes),Zt(e.attributes));var i=te(e),o=te(n),s=Math.max(i.length,o.length);for(r=0;r<s;r++)Qt(e,i[r],o[r],r)}}else t.removeChild(e);else t.appendChild(n.cloneNode(!0));var a,l}var te=function(t){var e=t.firstChild;if(!e)return[];var n=[];do{n.push(e),e=e.nextSibling}while(e);return n};function ee(t,e){e=e.el||e;for(var n=te(t=t.el||t),r=te(e),i=Math.max(n.length,r.length),o=0;o<i;o++)Qt(t,n[o],r[o],o)}var ne,re=function(){function t(t,e,n){if("string"!=typeof t)this.el=t;else{var r=document.createElement(t);for(var i in e&&(r.className=e),n=n||{})r.setAttribute(i,n[i]);this.el=r}}t.create=function(e,n,r){return new t(e,n,r)},t.createByHTML=function(e){var n=t.create("div").html(e).children();return n.length?t.create(n[0].el):null},t.getScrollTop=function(){return Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)},t.getScrollLeft=function(){return Math.max(window.pageXOffset,document.documentElement.scrollLeft,document.body.scrollLeft)},t.parse=function(t){return DOMParser().parseFromString(t,"text/htmll")},t.body=function(){return t.create(document.body)};var n=t.prototype;return n.setAttr=function(t){var e=this;return Object.keys(t).forEach(function(n){e.attr(n,t[n])}),this},n.setAttrNS=function(t,e){var n=this;return void 0===e&&(e="http://www.w3.org/2000/svg"),Object.keys(t).forEach(function(r){n.attr(r,t[r],e)}),this},n.setProp=function(t){var e=this;return Object.keys(t).forEach(function(n){e.el[n]!=t[n]&&(e.el[n]=t[n])}),this},n.data=function(t,e){return 1===arguments.length?this.attr("data-"+t):2===arguments.length?this.attr("data-"+t,e):this},n.attr=function(t,e){return 1==arguments.length?this.el.getAttribute(t):(this.el.getAttribute(t)!=e&&this.el.setAttribute(t,e),this)},n.attrNS=function(t,e,n){return void 0===n&&(n="http://www.w3.org/2000/svg"),1==arguments.length?this.el.getAttributeNS(n,t):(this.el.getAttributeNS(n,t)!=e&&this.el.setAttributeNS(n,t,e),this)},n.attrKeyValue=function(t){var e;return(e={})[this.el.getAttribute(t)]=this.val(),e},n.attrs=function(){var t=this;return[].slice.call(arguments).map(function(e){return t.el.getAttribute(e)})},n.styles=function(){var t=this;return[].slice.call(arguments).map(function(e){return t.el.style[e]})},n.removeAttr=function(t){return this.el.removeAttribute(t),this},n.removeStyle=function(t){return this.el.style.removeProperty(t),this},n.is=function(t){return this.el===(t.el||t)},n.isTag=function(t){return this.el.tagName.toLowerCase()===t.toLowerCase()},n.closest=function(e){for(var n=this,r=!1;!(r=n.hasClass(e));){if(!n.el.parentNode)return null;n=t.create(n.el.parentNode)}return r?n:null},n.path=function(){if(!this.el)return[];var t=this.parent();return t?[].concat(t.path(),[this]):[this]},n.parent=function(){return t.create(this.el.parentNode)},n.hasParent=function(){return!!this.el.parentNode},n.removeClass=function(){var t;return(t=this.el.classList).remove.apply(t,[].slice.call(arguments)),this},n.hasClass=function(t){return!!this.el.classList&&this.el.classList.contains(t)},n.addClass=function(){var t;return(t=this.el.classList).add.apply(t,[].slice.call(arguments)),this},n.onlyOneClass=function(t){this.parent().children().forEach(function(e){e.removeClass(t)}),this.addClass(t)},n.toggleClass=function(t,e){return this.el.classList.toggle(t,e),this},n.html=function(t){return void 0===t?this.el.innerHTML:("string"==typeof t?this.el.innerHTML=t:this.empty().append(t),this)},n.htmlDiff=function(t){ee(this,t)},n.updateDiff=function(e,n){void 0===n&&(n="div"),ee(this,t.create(n).html(e))},n.updateSVGDiff=function(e,n){void 0===n&&(n="div"),ee(this,t.create(n).html("<svg>"+e+"</svg>").firstChild.firstChild)},n.find=function(t){return this.el.querySelector(t)},n.$=function(e){var n=this.find(e);return n?t.create(n):null},n.findAll=function(t){return Array.from(this.el.querySelectorAll(t))},n.$$=function(e){return this.findAll(e).map(function(e){return t.create(e)})},n.empty=function(){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild);return this},n.append=function(t){return this.el.appendChild("string"==typeof t?document.createTextNode(t):t.el||t),this},n.prepend=function(t){return this.el.prepend("string"==typeof t?document.createTextNode(t):t.el||t),this},n.prependHTML=function(e){var n=t.create("div").html(e);return this.prepend(n.createChildrenFragment()),n},n.appendHTML=function(e){var n=t.create("div").html(e);return this.append(n.createChildrenFragment()),n},n.createChildrenFragment=function(){var t=this.children(),e=document.createDocumentFragment();return t.forEach(function(t){return e.appendChild(t.el)}),e},n.appendTo=function(t){return(t.el?t.el:t).appendChild(this.el),this},n.remove=function(){return this.el.parentNode&&this.el.parentNode.removeChild(this.el),this},n.removeChild=function(t){return this.el.removeChild(t.el||t),this},n.text=function(e){if(void 0===e)return this.el.textContent;var n=e;return e instanceof t&&(n=e.text()),this.el.textContent!==n&&(this.el.textContent=n),this},n.css=function(t,e){var n=this;if(void 0!==t&&void 0!==e)0===t.indexOf("--")&&void 0!==e?this.el.style.setProperty(t,e):this.el.style[t]=e;else if(void 0!==t){if("string"==typeof t)return getComputedStyle(this.el)[t];Object.entries(t).forEach(function(t){var e=t[0],r=t[1];0===e.indexOf("--")&&void 0!==r?n.el.style.setProperty(e,r):n.el.style[e]=r})}return this},n.getComputedStyle=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=getComputedStyle(this.el),e={};return[].slice.call(arguments).forEach(function(n){e[n]=t[n]}),e}),n.getStyleList=function(){for(var t=this,e={},n=this.el.style.length,r=0;r<n;r++){var i=this.el.style[r];e[i]=this.el.style[i]}return[].slice.call(arguments).forEach(function(n){e[n]=t.css(n)}),e},n.cssText=function(t){return void 0===t?this.el.style.cssText:(t!=this.el.tempCssText&&(this.el.style.cssText=t,this.el.tempCssText=t),this)},n.cssArray=function(t){return t[0]&&(this.el.style[t[0]]=t[1]),t[2]&&(this.el.style[t[2]]=t[3]),t[4]&&(this.el.style[t[4]]=t[5]),t[6]&&(this.el.style[t[6]]=t[7]),t[8]&&(this.el.style[t[8]]=t[9]),this},n.cssFloat=function(t){return parseFloat(this.css(t))},n.cssInt=function(t){return parseInt(this.css(t))},n.px=function(t,e){return this.css(t,e+"px")},n.rect=function(){return this.el.getBoundingClientRect()},n.bbox=function(){return this.el.getBBox()},n.isSVG=function(){return"SVG"===this.el.tagName.toUpperCase()},n.offsetRect=function(){if(this.isSVG()){var t=this.parent().rect(),e=this.rect();return{x:e.x-t.x,y:e.y-t.y,top:e.x-t.x,left:e.y-t.y,width:e.width,height:e.height}}return{x:this.el.offsetLeft,y:this.el.offsetTop,top:this.el.offsetTop,left:this.el.offsetLeft,width:this.el.offsetWidth,height:this.el.offsetHeight}},n.offset=function(){var e=this.rect(),n=t.getScrollTop(),r=t.getScrollLeft();return{top:e.top+n,left:e.left+r}},n.offsetLeft=function(){return this.offset().left},n.offsetTop=function(){return this.offset().top},n.position=function(){return this.el.style.top?{top:parseFloat(this.css("top")),left:parseFloat(this.css("left"))}:this.rect()},n.size=function(){return[this.width(),this.height()]},n.width=function(){return this.el.offsetWidth||this.rect().width},n.contentWidth=function(){return this.width()-this.cssFloat("padding-left")-this.cssFloat("padding-right")},n.height=function(){return this.el.offsetHeight||this.rect().height},n.contentHeight=function(){return this.height()-this.cssFloat("padding-top")-this.cssFloat("padding-bottom")},n.val=function(e){if(void 0===e)return this.el.value;if(void 0!==e){var n=e;e instanceof t&&(n=e.val()),this.el.value=n}return this},n.matches=function(t){return this.el&&this.el.matches?this.el.matches(t)?this:this.parent().matches(t):null},n.realVal=function(){switch(this.el.nodeType){case"INPUT":var t=this.attr("type");if("checkbox"==t||"radio"==t)return this.checked();case"SELECT":case"TEXTAREA":return this.el.value}return""},n.int=function(){return parseInt(this.val(),10)},n.float=function(){return parseFloat(this.val())},n.show=function(t){return void 0===t&&(t="block"),this.el.style.display="none"!=t?t:"block",this},n.hide=function(){return this.el.style.display="none",this},n.isHide=function(){return"none"===this.el.style.display},n.isShow=function(){return!this.isHide()},n.toggle=function(t){var e=this.isHide();return 1==arguments.length?t?this.show():this.hide():e?this.show():this.hide()},n.scrollIntoView=function(){this.el.scrollIntoView()},n.addScrollLeft=function(t){return this.el.scrollLeft+=t,this},n.addScrollTop=function(t){return this.el.scrollTop+=t,this},n.setScrollTop=function(t){return this.el.scrollTop=t,this},n.setScrollLeft=function(t){return this.el.scrollLeft=t,this},n.scrollTop=function(){return this.el===document.body?t.getScrollTop():this.el.scrollTop},n.scrollLeft=function(){return this.el===document.body?t.getScrollLeft():this.el.scrollLeft},n.scrollHeight=function(){return this.el.scrollHeight},n.scrollWidth=function(){return this.el.scrollWidth},n.on=function(t,e,n,r){return this.el.addEventListener(t,e,n,r),this},n.off=function(t,e){return this.el.removeEventListener(t,e),this},n.getElement=function(){return this.el},n.createChild=function(e,n,r,i){void 0===n&&(n=""),void 0===r&&(r={}),void 0===i&&(i={});var o=t.create(e,n,r);return o.css(i),this.append(o),o},n.children=function(){var e=this.el.firstElementChild;if(!e)return[];var n=[];do{n.push(t.create(e)),e=e.nextElementSibling}while(e);return n},n.childLength=function(){return this.el.children.length},n.replace=function(t){return this.el.parentNode&&this.el.parentNode.replaceChild(t.el||t,this.el),this},n.replaceChild=function(t,e){return this.el.replaceChild(e.el||e,t.el||t),this},n.checked=function(t){return void 0===t&&(t=!1),0==arguments.length?!!this.el.checked:(this.el.checked=!!t,this)},n.click=function(){return this.el.click(),this},n.focus=function(){return this.el.focus(),this},n.select=function(){if("true"===this.attr("contenteditable")){var t=document.createRange();t.selectNodeContents(this.el);var e=window.getSelection();e.removeAllRanges(),e.addRange(t)}else this.el.select();return this},n.blur=function(){return this.el.blur(),this},n.context=function(t){return void 0===t&&(t="2d"),this._initContext||(this._initContext=this.el.getContext(t)),this._initContext},n.resize=function(t){var e=t.width,n=t.height;this._initContext=null;var r=this.context(),i=window.devicePixelRatio||1;this.px("width",+e),this.px("height",+n),this.el.width=e*i,this.el.height=n*i,r.scale(i,i)},n.toDataURL=function(t,e){return void 0===t&&(t="image/png"),void 0===e&&(e=1),this.el.toDataURL(t,e)},n.clear=function(){this.context().clearRect(0,0,this.el.width,this.el.height)},n.update=function(t){this.clear(),t.call(this,this)},n.drawImage=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var r=this.context(),i=window.devicePixelRatio||1;r.drawImage(t,e,n,t.width,t.height,0,0,this.el.width/i,this.el.height/i)},n.drawOption=function(t){void 0===t&&(t={});var e=this.context();Object.assign(e,t)},n.drawLine=function(t,e,n,r){var i=this.context();i.beginPath(),i.moveTo(t,e),i.lineTo(n,r),i.stroke(),i.closePath()},n.drawPath=function(){var t=this.context();t.beginPath(),[].slice.call(arguments).forEach(function(e,n){0==n?t.moveTo(e[0],e[1]):t.lineTo(e[0],e[1])}),t.stroke(),t.fill(),t.closePath()},n.drawCircle=function(t,e,n){var r=this.context();r.beginPath(),r.arc(t,e,n,0,2*Math.PI),r.stroke(),r.fill()},n.drawText=function(t,e,n){this.context().fillText(n,t,e)},e(t,[{key:"value",get:function(){return this.el.value}},{key:"naturalWidth",get:function(){return this.el.naturalWidth}},{key:"naturalHeight",get:function(){return this.el.naturalHeight}},{key:"files",get:function(){return this.el.files?[].concat(this.el.files):[]}},{key:"totalLength",get:function(){return this.el.getTotalLength()}},{key:"firstChild",get:function(){return t.create(this.el.firstElementChild)}}]),t}(),ie=function(){return!0};function oe(t,e){if(void 0===e&&(e=0),0===e)return t;var n=void 0;return function(r,i,o,s,a){n&&clearTimeout(n),n=setTimeout(function(){t(r,i,o,s,a)},e||300)}}function se(t,e){var n=void 0;return function(r,i,o,s,a){n||(n=setTimeout(function(){t(r,i,o,s,a),n=null},e||300))}}function ae(t,e){Object.keys(t).forEach(function(n,r){e(n,t[n],r)})}function le(t){return!1===function(t){return null==t}(t)}function ce(t){return"string"==typeof t}function ue(t){return"function"==typeof t}var he,fe,de=/\<(\w*)([^\>]*)\/\>/gim,pe=((ne={image:!0,input:!0,br:!0,path:!0,line:!0,circle:!0,rect:!0}).path=!0,ne.polygon=!0,ne.polyline=!0,ne.use=!0,ne),ve=function(t){var e=arguments,n=t.map(function(t,n){var r=[].slice.call(e,1)[n]||"";return ue(r)&&console.log(r),Array.isArray(r)||(r=[r]),t+r.join("")}).join("");return n.replace(de,function(t,e){return pe[e.toLowerCase()]?t:t.replace("/>","></"+e+">")})},ge=function(t,e){var n=t.filter(function(t){return t.indexOf(e+"(")>-1}),r=n.map(function(t){var n=t.split(e+"(")[1].split(")")[0].trim().split(" ");return{target:n[0],param:n[1]}});return[n,r]},me=function(){function t(t,e){void 0===e&&(e={}),this.context=t,this.options=e}var e=t.prototype;return e.initialize=function(){},e.load=function(){},e.refresh=function(){},e.render=function(){},e.getRef=function(t){return this.context.getRef(t)},e.run=function(){},e.destroy=function(){},t}(),xe={touchstart:!0,touchmove:!0,mousedown:!0,mouseup:!0,mousemove:!0},ye={doubletab:"touchend"},Ee={doubletab:!0},be=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.initialize=function(){var t=this;this.destroy(),this._domEvents||(this._domEvents=this.context.filterProps(l)),this._domEvents.forEach(function(e){return t.parseDomEvent(e)})},n.destroy=function(){this.removeEventAll()},n.removeEventAll=function(){var t=this;this.getBindings().forEach(function(e){t.removeDomEvent(e)}),this.initBindings()},n.removeDomEvent=function(t){Yt.removeDomEvent(t.dom,t.eventName,t.callback)},n.getBindings=function(){return this._bindings||this.initBindings(),this._bindings},n.addBinding=function(t){this.getBindings().push(t)},n.initBindings=function(){this._bindings=[]},n.matchPath=function(t,e){return t?t.matches(e)?t:this.matchPath(t.parentElement,e):null},n.hasDelegate=function(t,e){return this.matchPath(t.target||t.srcElement,e.delegate)},n.makeCallback=function(t,e){return t.delegate?this.makeDelegateCallback(t,e):this.makeDefaultCallback(t,e)},n.makeDefaultCallback=function(t,e){var n=this;return function(r){var i=n.runEventCallback(r,t,e);if(le(i))return i}},n.makeDelegateCallback=function(t,e){var n=this;return function(r){var i=n.hasDelegate(r,t);if(i){r.$dt=re.create(i);var o=n.runEventCallback(r,t,e);if(le(o))return o}}},n.runEventCallback=function(t,e,n){var r=this.context;if(t.xy=Yt.posXY(t),e.beforeMethods.length&&e.beforeMethods.every(function(e){return r[e.target].call(r,t,e.param)}),this.checkEventType(t,e)){var i=n(t,t.$dt,t.xy);return!1!==i&&e.afterMethods.length&&e.afterMethods.forEach(function(e){return r[e.target].call(r,t,e.param)}),i}},n.checkEventType=function(t,e){var n=this.context,r=!0;e.codes.length&&(r=!!t.code&&e.codes.indexOf(t.code.toLowerCase())>-1||!!t.key&&e.codes.indexOf(t.key.toLowerCase())>-1);var i=!0;return e.checkMethodList.length&&(i=e.checkMethodList.every(function(e){var r=n[e];return ue(r)&&r?r.call(n,t):!le(r)||!!r})),r&&i},n.getDefaultDomElement=function(t){var e,n=this.context;return(e=t?n.refs[t]||n[t]||window[t]:n.el||n.$el||n.$root)instanceof re?e.getElement():e},n.getRealEventName=function(t){return ye[t]||t},n.getCustomEventName=function(t){return Ee[t]?t:""},n.getDefaultEventObject=function(t,e){var n=this.context,r=e,i=r.filter(function(t){return!!n[t]}),o=ge(r,"after"),s=o[0],a=o[1],l=ge(r,"before"),c=l[0],u=l[1],h=ge(r,"debounce"),f=h[0],d=h[1],p=ge(r,"delay"),v=p[0],g=p[1],m=ge(r,"throttle"),x=m[0],y=m[1],E=ge(r,"capture")[0],b=[].concat(i,s,c,v,f,x,E),T=r.filter(function(t){return-1===b.indexOf(t)}).map(function(t){return t.toLowerCase()});return{eventName:this.getRealEventName(t),customEventName:this.getCustomEventName(t),codes:T,captures:E,afterMethods:a,beforeMethods:u,delayMethods:g,debounceMethods:d,throttleMethods:y,checkMethodList:i}},n.addDomEvent=function(t,e){t.callback=this.makeCallback(t,e),this.addBinding(t);var n=!!t.captures.length;xe[t.eventName]&&(n={passive:!0,capture:n}),Yt.addDomEvent(t.dom,t.eventName,t.callback,n)},n.makeCustomEventCallback=function(t,e){var n=this;if("doubletab"===t.customEventName){var r=300;return t.delayMethods.length&&(r=+t.delayMethods[0].target),function(){n.doubleTab?(performance.now()-n.doubleTab.time<r&&e.apply(void 0,[].slice.call(arguments)),n.doubleTab=null):n.doubleTab={time:performance.now()}}}return e},n.bindingDomEvent=function(t,e,n){var r=t[0],i=t[1],o=t.slice(2),s=this.getDefaultEventObject(r,e);s.dom=this.getDefaultDomElement(i),s.delegate=o.join(" "),s.debounceMethods.length?n=oe(n,+s.debounceMethods[0].target):s.throttleMethods.length&&(n=se(n,+s.throttleMethods[0].target)),n=this.makeCustomEventCallback(s,n),this.addDomEvent(s,n)},n.getEventNames=function(t){var e=[];return t.split(":").forEach(function(t){var n=t.split(":");e.push.apply(e,n)}),e},n.parseDomEvent=function(t){for(var e=this.context,n=t.split(f).map(function(t){return t.trim()}).filter(Boolean),r=n.shift().split("@magic:domevent ")[1].split(" "),i=this.getEventNames(r[0]),o=e[t].bind(e),s=0,a=i.length;s<a;s++)r[0]=i[s],this.bindingDomEvent(r,n,o)},e}(me),Te=function(t,e,n){if("cssText"!==e)if("style"!==e)if("class"!==e)"callback"!==e||"function"!=typeof n?void 0===n?t.removeAttr(e):"TEXTAREA"===t.el.nodeName&&"value"===e||"text"===e||"textContent"===e?t.text(n):"innerHTML"===e||"html"===e?t.html(n):"htmlDiff"===e?t.updateDiff(n):"svgDiff"===e?t.updateSVGDiff(n):"value"===e?t.val(n):t.attr(e,n):n();else if(Array.isArray(n))t.addClass.apply(t,n.filter(Boolean));else if(function(t){return"object"==typeof t&&!Array.isArray(t)&&!function(t){return"number"==typeof t}(t)&&!ce(t)&&null!==t}(n))for(var r=Object.keys(n),i=0,o=r.length;i<o;i++){var s=r[i];t.toggleClass(s,n[s])}else t.el.className=n;else"string"!=typeof n&&t.css(n);else t.cssText(n)},Ce=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.load=function(){this.bindData.apply(this,[].slice.call(arguments))},n.bindData=function(){var t=this,e=[].slice.call(arguments);this._bindMethods||(this._bindMethods=this.context.filterProps(u));var n=this._bindMethods.filter(function(t){if(!e.length)return!0;var n=t.split(f)[0].split(" ");return e.indexOf(n[1])>-1});n.forEach(function(n){try{var r=t.context[n],i=n.split(f);n=i[0];var o=t.getRef(i[1]),s=zt;""!=o&&"string"==typeof o?s=Wt(o):"function"==typeof o&&(s=o);var a=n.split("@magic:bind ")[1],l=t.context.refs[a],c="function"==typeof s&&s.call(t.context);return Promise.resolve(function(){if(l&&c)return Promise.resolve(r.call.apply(r,[t.context].concat(e))).then(function(t){if(t)for(var e=Object.keys(t),n=0,r=e.length;n<r;n++){var i=e[n];Te(l,i,t[i])}})}())}catch(t){return Promise.reject(t)}})},n.destroy=function(){this._bindMethods=void 0},e}(me),Ae=new Map,Oe=/[xy]/g;function Ne(){var t=(new Date).getTime();return"xxx12-xx-34xx".replace(Oe,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)})}function Se(){var t=(new Date).getTime();return"idxxxxxxx".replace(Oe,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)})}var Re=re.create("div"),Me=function(){function t(t,e){this.state={},this.prevState={},this.refs={},this.children={},this._bindings=[],this.id=Ne(),this.__tempVariables=new Map,this.handlers=this.initializeHandler(),this.initializeProperty(t,e),this.initComponents()}var e=t.prototype;return e.initializeProperty=function(t,e){void 0===e&&(e={}),this.opt=t||{},this.parent=this.opt,this.props=e,this.source=Ne(),this.sourceName=this.constructor.name},e.initComponents=function(){this.childComponents=this.components()},e.initializeHandler=function(){return[new Ce(this),new be(this)]},e.initState=function(){return{}},e.setState=function(t,e){void 0===t&&(t={}),void 0===e&&(e=!0),this.prevState=this.state,this.state=Object.assign({},this.state,t),e&&this.load()},e.toggleState=function(t,e){var n;void 0===e&&(e=!0),this.setState(((n={})[t]=!this.state[t],n),e)},e.variable=function(t){var e="__ref__variable:"+Se();return this.__tempVariables.set(e,t),e},e.recoverVariable=function(t){if(!1===ce(t))return t;var e=t;return this.__tempVariables.has(t)&&(e=this.__tempVariables.get(t),this.__tempVariables.delete(t)),e},e._reload=function(t){this.props=t,this.state={},this.setState(this.initState(),!1),this.refresh(!0)},e.render=function(t){this.$el=this.parseTemplate(ve(he||(he=o(["\n        ","\n      "])),this.template())),this.refs.$el=this.$el,t&&t.append(this.$el),this.load(),this.afterRender()},e.initialize=function(){this.state=this.initState()},e.afterRender=function(){},e.components=function(){return{}},e.getRef=function(){var t=[].slice.call(arguments).join("");return this.refs[t]},e.parseTemplate=function(t,e){Array.isArray(t)&&(t=t.join("")),t=t.trim();for(var n=Re.html(t).children(),r=0,i=n.length;r<i;r++){var o=n[r],s=o.attr("ref");s&&(this.refs[s]=o);for(var a=o.$$("[ref]"),l={},c=0,u=a.length;c<u;c++){var h=a[c],f=h.attr("ref");l[f]?console.warn(s+" is duplicated. - "+this.sourceName,this):l[f]=!0,this.refs[f]=h}}return!e&&n.length?n[0]:re.create(Re.createChildrenFragment())},e.parseProperty=function(t){for(var e,r={},i=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t.el.attributes);!(e=i()).done;){var o=e.value;r[o.nodeName]=this.recoverVariable(o.nodeValue)}return r.props&&(r=n({},r,Gt(r.props))),t.$$("property").forEach(function(t){var e=t.attrs("name","value","valueType"),n=e[0],i=e[2],o=e[1]||t.text();"json"===i&&(o=JSON.parse(o)),r[n]=o}),r},e.parseSourceName=function(t){return t.parent?[t.sourceName].concat(this.parseSourceName(t.parent)):[t.sourceName]},e.getEventMachineComponent=function(t){return Ae.get(t)||this.childComponents[t]},e.parseComponent=function(){var t=this;this.$el.$$("[refclass]").forEach(function(e){var n=t.getEventMachineComponent(e.attr("refclass"));if(n){var r,i=t.parseProperty(e),o=e.attr("ref"),s=null;t.children[o]?(s=t.children[o])._reload(i):(s=new n(t,i),t.children[o||s.id]=s,s.render()),s.renderTarget?(null==(r=s.$el)||r.appendTo(s.renderTarget),e.remove()):e.replace(s.$el)}else e.remove()}),ae(this.children,function(e,n){n&&n.clean()&&delete t.children[e]})},e.clean=function(){if(this.$el&&!this.$el.hasParent())return ae(this.children,function(t,e){e.clean()}),this.destroy(),this.$el=null,!0},e.refresh=function(){this.load()},e._afterLoad=function(){this.runHandlers("initialize"),this.bindData(),this.parseComponent()},e.load=function(){try{var t=arguments,e=this,n=[].slice.call(t);e._loadMethods||(e._loadMethods=e.filterProps(c));var r=e._loadMethods.filter(function(t){var e=t.split("@magic:load ")[1].split(f).map(function(t){return t.trim()})[0];return!n.length||n.indexOf(e)>-1});return Promise.resolve(r.forEach(function(t){try{var r=t.split("@magic:load ")[1].split(f).map(function(t){return t.trim()}),i=r[0],s=r.slice(1);s=s.map(function(t){return t.trim()});var a=Boolean(s.filter(function(t){return $.includes(t)}).length),l=function(){var r;if(e.refs[i])return Promise.resolve((r=e[t]).call.apply(r,[e].concat(n))).then(function(t){Array.isArray(t)&&(t=t.join(""));var n=e.parseTemplate(ve(fe||(fe=o(["",""])),t),!0);a?e.refs[i].htmlDiff(n):e.refs[i].html(n)})}();return Promise.resolve(l&&l.then?l.then(function(){}):void 0)}catch(t){return Promise.reject(t)}})).then(function(){e._afterLoad()})}catch(t){return Promise.reject(t)}},e.runHandlers=function(t){var e=arguments;void 0===t&&(t="run"),this.handlers.forEach(function(n){return n[t].apply(n,[].slice.call(e,1))})},e.bindData=function(){this.runHandlers.apply(this,["load"].concat([].slice.call(arguments)))},e.template=function(){return null},e.eachChildren=function(t){ue(t)&&ae(this.children,function(e,n){t(n)})},e.rerender=function(){var t=this.$el.parent();this.destroy(),this.render(t)},e.destroy=function(){this.eachChildren(function(t){t.destroy()}),this.runHandlers("destroy"),this.$el&&this.$el.remove(),this.$el=null,this.refs={},this.children={}},e.collectProps=function(){return this.__cachedMethodList||(this.__cachedMethodList=function(t,e){void 0===e&&(e=ie);var n=t,r=[];do{if(0==n instanceof Object)break;var i=Object.getOwnPropertyNames(n).filter(function(n){return t&&ue(t[n])&&e(n)});r.push.apply(r,i)}while(n=Object.getPrototypeOf(n));return r}(this,function(t){return 0===t.indexOf("@magic:")})),this.__cachedMethodList},e.filterProps=function(t){return this.collectProps().filter(function(e){return e.match(t)})},e.self=function(t){return t&&t.$dt&&t.$dt.is(t.target)},e.isAltKey=function(t){return t.altKey},e.isCtrlKey=function(t){return t.ctrlKey},e.isShiftKey=function(t){return t.shiftKey},e.isMetaKey=function(t){return t.metaKey||"Meta"==t.key||t.code.indexOf("Meta")>-1},e.isMouseLeftButton=function(t){return 1===t.buttons},e.isMouseRightButton=function(t){return 2===t.buttons},e.hasMouse=function(t){return"mouse"===t.pointerType},e.hasTouch=function(t){return"touch"===t.pointerType},e.hasPen=function(t){return"pen"===t.pointerType},e.preventDefault=function(t){return t.preventDefault(),!0},e.stopPropagation=function(t){return t.stopPropagation(),!0},t}(),ke=function(){function t(t){this.cachedCallback={},this.callbacks={},this.commandes=[],this.editor=t}var e=t.prototype;return e.getCallbacks=function(t){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t]},e.setCallbacks=function(t,e){void 0===e&&(e=[]),this.callbacks[t]=e},e.debug=function(){var t;this.editor&&this.editor.config.get("debug")&&(t=console).debug.apply(t,[].slice.call(arguments))},e.on=function(t,e,n,r,i,o,s,a){var l=this;void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=!1),void 0===s&&(s=!1),void 0===a&&(a=[]);var c=e;return r>0?c=oe(e,r):i>0&&(c=se(e,i)),a.length&&(c=function(t,e,n){return function(){var r=[].slice.call(arguments);n.every(function(t){return e[t.target].apply(e,r)})&&t.apply(e,r)}}(c,n,a)),this.getCallbacks(t).push({event:t,callback:c,context:n,originalCallback:e,enableAllTrigger:o,enableSelfTrigger:s}),this.debug("add message event",t,n.sourceName),function(){l.off(t,e)}},e.off=function(t,e){this.debug("off message event",t),1==arguments.length?this.setCallbacks(t):2==arguments.length&&this.setCallbacks(t,this.getCallbacks(t).filter(function(t){return t.originalCallback!==e}))},e.offAll=function(t){var e=this;Object.keys(this.callbacks).forEach(function(n){e.setCallbacks(n,e.getCallbacks(n).filter(function(e){return e.context!==t}))}),this.debug("off all message",t.sourceName)},e.getCachedCallbacks=function(t){return this.getCallbacks(t)},e.sendMessage=function(t,e){var n=arguments,r=this;Promise.resolve().then(function(){var i=r.getCachedCallbacks(e);if(i)for(var o=0,s=i.length;o<s;o++){var a=i[o];a.enableSelfTrigger||(a.enableAllTrigger||a.originalCallback.source!==t)&&a.callback.apply(a.context,[].slice.call(n,2))}})},e.nextSendMessage=function(t,e){var n=arguments;Promise.resolve().then(function(){e.apply(void 0,[].slice.call(n,2))})},e.triggerMessage=function(t,e){var n=arguments,r=this;Promise.resolve().then(function(){var i=r.getCachedCallbacks(e);if(i)for(var o=0,s=i.length;o<s;o++){var a=i[o];a.originalCallback.source===t&&a.callback.apply(a.context,[].slice.call(n,2))}else console.warn(e," is not valid event")})},e.emit=function(t){var e=[].slice.call(arguments,1);ue(t)?t.apply(void 0,e):this.sendMessage.apply(this,[this.source,t].concat(e))},e.nextTick=function(t){this.nextSendMessage(this.source,t)},e.trigger=function(t){var e=[].slice.call(arguments,1);ue(t)?t.apply(void 0,e):this.triggerMessage.apply(this,[this.source,t].concat(e))},t}(),_e=function(t){function n(e,n){var r;return void 0===n&&(n={}),(r=t.call(this,e,n)||this).__UID=new Set,n.store&&(r.__storeInstance=n.store),r.created(),r.initialize(),r.initializeStoreEvent(),r}r(n,t);var i=n.prototype;return i.setStore=function(t){this.__storeInstance=t},i.created=function(){},i.getRealEventName=function(t,e){void 0===e&&(e=MULTI_PREFIX);var n=t.indexOf(e);return t.substr(n<0?0:n+e.length)},i.splitMethod=function(t,e,n){void 0===n&&(n=0);var r=ge(t,e),i=r[0],o=r[1];return[i.length?+o[0].target:n,i,o]},i.createLocalCallback=function(t,e){var n=e.bind(this);return n.displayName=this.sourceName+"."+t,n.source=this.source,n},i.initializeStoreEvent=function(){var t=this;this.filterProps(h).forEach(function(e){var n=t.getRealEventName(e,"@magic:subscribe "),r=n.split(f).slice(1),i=r.map(function(t){return t.trim()}).filter(function(e){return t[e]}).map(function(t){return{target:t}}),o=t.splitMethod(r,"debounce"),s=o[0],a=o[1],l=t.splitMethod(r,"throttle"),c=l[0],u=l[1],h=t.splitMethod(r,"allTrigger")[1],d=t.splitMethod(r,"selfTrigger")[1];n.split(f).filter(function(t){return-1===i.indexOf(t)&&-1===a.indexOf(t)&&-1===h.indexOf(t)&&-1===d.indexOf(t)&&-1===u.indexOf(t)}).map(function(t){return t.trim()}).filter(Boolean).forEach(function(n){if(ue(t[e])){var r=t.createLocalCallback(n,t[e]);t.$store.on(n,r,t,s,c,h.length,d.length,i)}})})},i.destoryStoreSUBSCRIBE=function(){this.$store.offAll(this)},i.destroy=function(){t.prototype.destroy.call(this),this.destoryStoreSUBSCRIBE()},i.rerender=function(){t.prototype.rerender.call(this),this.initialize(),this.initializeStoreEvent()},i.emit=function(t){var e;this.$store.source=this.source,this.$store.sourceContext=this,(e=this.$store).emit.apply(e,[t].concat([].slice.call(arguments,1)))},i.nextTick=function(t){this.$store.nextTick(t)},i.trigger=function(t){var e;this.$store.source=this.source,(e=this.$store).trigger.apply(e,[t].concat([].slice.call(arguments,1)))},i.broadcast=function(t){var e=arguments,n=this;Object.keys(this.children).forEach(function(r){var i;(i=n.children[r]).trigger.apply(i,[t].concat([].slice.call(e,1)))})},i.on=function(t,e){this.$store.on(t,e)},i.off=function(t,e){this.$store.off(t,e)},i.subscribe=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var r="subscribe."+Se(),i=this.createLocalCallback(r,t);return this.$store.on(r,i,this,e,n,!1,!0),r},e(n,[{key:"$store",get:function(){return this.__storeInstance||this.parent.$store}}]),n}(Me);exports.AFTER=m,exports.ALL_TRIGGER=F,exports.ALT=S,exports.ANIMATIONEND=Bt,exports.ANIMATIONITERATION=$t,exports.ANIMATIONSTART=Ut,exports.ARROW_DOWN=b,exports.ARROW_LEFT=T,exports.ARROW_RIGHT=C,exports.ARROW_UP=E,exports.BEFORE=function(t,e){return void 0===e&&(e=f),a("before("+t+")",e)},exports.BIND=function(t){return void 0===t&&(t="$el"),"@magic:bind "+t},exports.BIND_CHECK_DEFAULT_FUNCTION=zt,exports.BIND_CHECK_FUNCTION=Wt,exports.BIND_SAPARATOR="@magic:bind ",exports.BLUR=Ot,exports.BaseStore=ke,exports.CAPTURE=K,exports.CHANGE=Et,exports.CHANGEINPUT=Pt,exports.CHECKER=g,exports.CHECK_BIND_PATTERN=u,exports.CHECK_DOM_EVENT_PATTERN=l,exports.CHECK_LOAD_PATTERN=c,exports.CHECK_SAPARATOR=f,exports.CHECK_SUBSCRIBE_PATTERN=h,exports.CLICK=Y,exports.CONFIG=function(t){return v.apply(void 0,["config:"+t].concat([].slice.call(arguments,1)))},exports.CONTEXTMENU=yt,exports.CONTROL=k,exports.CUSTOM=X,exports.D1000=H,exports.DEBOUNCE=j,exports.DELAY=function(t){return void 0===t&&(t=300),g("delay("+t+")")},exports.DOMDIFF=$,exports.DOM_EVENT_SAPARATOR="@magic:domevent ",exports.DOUBLECLICK=q,exports.DOUBLETAB=Kt,exports.DRAG=ut,exports.DRAGEND=xt,exports.DRAGENTER=pt,exports.DRAGEXIT=gt,exports.DRAGLEAVE=vt,exports.DRAGOUT=mt,exports.DRAGOVER=dt,exports.DRAGSTART=ht,exports.DROP=ft,exports.Dom=re,exports.ENTER=A,exports.ESCAPE=N,exports.FIT=U,exports.FOCUS=Tt,exports.FOCUSIN=Ct,exports.FOCUSOUT=At,exports.IF=x,exports.INPUT=bt,exports.KEY=y,exports.KEYDOWN=at,exports.KEYPRESS=ct,exports.KEYUP=lt,exports.LEFT_BUTTON=P,exports.LOAD=function(t){return void 0===t&&(t="$el"),"@magic:load "+t},exports.LOAD_SAPARATOR="@magic:load ",exports.MAGIC_METHOD="@magic:",exports.META=M,exports.MOUSE=_,exports.MOUSEDOWN=J,exports.MOUSEENTER=nt,exports.MOUSELEAVE=rt,exports.MOUSEMOVE=Q,exports.MOUSEOUT=et,exports.MOUSEOVER=tt,exports.MOUSEUP=Z,exports.NAME_SAPARATOR=":",exports.PASSIVE=B,exports.PASTE=Nt,exports.PEN=w,exports.PIPE=function(){return[].slice.call(arguments).join("|")},exports.POINTEREND=Lt,exports.POINTERENTER=_t,exports.POINTERMOVE=wt,exports.POINTEROUT=Dt,exports.POINTEROVER=kt,exports.POINTERSTART=function(){return X("pointerdown").apply(void 0,[].slice.call(arguments))+P},exports.PREVENT=G,exports.RESIZE=St,exports.RIGHT_BUTTON=I,exports.SAPARATOR=" ",exports.SCROLL=Rt,exports.SELF=L,exports.SELF_TRIGGER=V,exports.SHIFT=R,exports.SPACE=O,exports.STOP=W,exports.SUBMIT=Mt,exports.SUBSCRIBE=z,exports.SUBSCRIBE_ALL=function(){return v.apply(void 0,[].slice.call(arguments).concat([F]))},exports.SUBSCRIBE_SAPARATOR="@magic:subscribe ",exports.SUBSCRIBE_SELF=function(){return v.apply(void 0,[].slice.call(arguments).concat([V]))},exports.THROTTLE=function(t){return void 0===t&&(t=100),g("throttle("+t+")")},exports.TOUCH=D,exports.TOUCHEND=st,exports.TOUCHMOVE=ot,exports.TOUCHSTART=it,exports.TRANSITIONCANCEL=Vt,exports.TRANSITIONEND=Ht,exports.TRANSITIONRUN=Ft,exports.TRANSITIONSTART=jt,exports.UIElement=_e,exports.WHEEL=It,exports.getRef=Gt,exports.makeEventChecker=a,exports.normalizeWheelEvent=function(t){var e=t.deltaX,n=t.deltaY;if(0===e&&t.shiftKey){var r=[e,n];n=r[0],e=r[1]}return t.deltaMode===WheelEvent.DOM_DELTA_LINE?n*=8:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(n*=24),[Xt(e,24),Xt(n,24),0]},exports.registElement=function(t){void 0===t&&(t={}),Object.keys(t).forEach(function(e){Ae.has(e)||Ae.set(e,t[e])})},exports.start=function(t,e){void 0===e&&(e={});var r=re.create(e.container||document.body),i=new t(e,n({},e,{store:e.store||new ke}));return i.render(r),i};
//# sourceMappingURL=sapa.cjs.map
