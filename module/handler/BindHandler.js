import{inherits as t,createSuper as e,classCallCheck as r,createClass as n,slicedToArray as a,asyncToGenerator as s,toConsumableArray as i}from"../_virtual/_rollupPluginBabelHelpers.js";import o from"./BaseHandler.js";import{isObject as l}from"../functions/func.js";import{CHECK_BIND_PATTERN as f,CHECK_SAPARATOR as c,BIND_SAPARATOR as u,BIND_CHECK_DEFAULT_FUNCTION as p,BIND_CHECK_FUNCTION as h}from"../Event.js";var d=function(t,e,r){if("cssText"!==e)if("style"!==e)if("class"!==e)"callback"!==e||"function"!=typeof r?void 0===r?t.removeAttr(e):"TEXTAREA"===t.el.nodeName&&"value"===e||"text"===e||"textContent"===e?t.text(r):"innerHTML"===e||"html"===e?t.html(r):"htmlDiff"===e?t.updateDiff(r):"svgDiff"===e?t.updateSVGDiff(r):"value"===e?t.val(r):t.attr(e,r):r();else if(Array.isArray(r))t.addClass.apply(t,i(r.filter(Boolean)));else if(l(r))for(var n=Object.keys(r),a=0,s=n.length;a<s;a++){var o=n[a],f=r[o];t.toggleClass(o,f)}else t.el.className=r;else"string"!=typeof r&&t.css(r);else t.cssText(r)},v=function(i){t(v,o);var l=e(v);function v(){return r(this,v),l.apply(this,arguments)}return n(v,[{key:"load",value:function(){this.bindData.apply(this,arguments)}},{key:"bindData",value:function(){for(var t=this,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];this._bindMethods||(this._bindMethods=this.context.filterProps(f));var i=this._bindMethods.filter((function(t){if(!r.length)return!0;var e=t.split(c),n=a(e,2),s=n[0];n[1];var i=s.split(" "),o=a(i,2);o[0];var l=o[1];return r.indexOf(l)>-1}));i.forEach(function(){var e=s(regeneratorRuntime.mark((function e(n){var s,i,o,l,f,v,y,m,x,b,g,k,A,C,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.context[n],i=n.split(c),o=a(i,2),n=o[0],l=o[1],f=t.getRef(l),v=p,""!=f&&"string"==typeof f?v=h(f):"function"==typeof f&&(v=f),y=n.split(u)[1],m=t.context.refs[y],x="function"==typeof v&&v.call(t.context),!m||!x){e.next=16;break}return e.next=11,s.call.apply(s,[t.context].concat(r));case 11:if(b=e.sent){e.next=14;break}return e.abrupt("return");case 14:for(g=Object.keys(b),k=0,A=g.length;k<A;k++)C=g[k],T=b[C],d(m,C,T);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"destroy",value:function(){this._bindMethods=void 0}}]),v}();export{v as default};
